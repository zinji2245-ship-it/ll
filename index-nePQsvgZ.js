(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(r){if(r.ep)return;r.ep=!0;const l=t(r);fetch(r.href,l)}})();function GT(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ch={exports:{}},hl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O_;function eI(){if(O_)return hl;O_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(o,r,l){var c=null;if(l!==void 0&&(c=""+l),r.key!==void 0&&(c=""+r.key),"key"in r){l={};for(var h in r)h!=="key"&&(l[h]=r[h])}else l=r;return r=l.ref,{$$typeof:n,type:o,key:c,ref:r!==void 0?r:null,props:l}}return hl.Fragment=e,hl.jsx=t,hl.jsxs=t,hl}var q_;function tI(){return q_||(q_=1,Ch.exports=eI()),Ch.exports}var j=tI(),Ih={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function nI(){if(F_)return Ie;F_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),S=Symbol.iterator;function R(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,L={};function X(O,te,ue){this.props=O,this.context=te,this.refs=L,this.updater=ue||U}X.prototype.isReactComponent={},X.prototype.setState=function(O,te){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,te,"setState")},X.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function ie(){}ie.prototype=X.prototype;function W(O,te,ue){this.props=O,this.context=te,this.refs=L,this.updater=ue||U}var se=W.prototype=new ie;se.constructor=W,q(se,X.prototype),se.isPureReactComponent=!0;var fe=Array.isArray;function le(){}var D={H:null,A:null,T:null,S:null},N=Object.prototype.hasOwnProperty;function M(O,te,ue){var pe=ue.ref;return{$$typeof:n,type:O,key:te,ref:pe!==void 0?pe:null,props:ue}}function P(O,te){return M(O.type,te,O.props)}function V(O){return typeof O=="object"&&O!==null&&O.$$typeof===n}function F(O){var te={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ue){return te[ue]})}var b=/\/+/g;function ke(O,te){return typeof O=="object"&&O!==null&&O.key!=null?F(""+O.key):te.toString(36)}function dt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(le,le):(O.status="pending",O.then(function(te){O.status==="pending"&&(O.status="fulfilled",O.value=te)},function(te){O.status==="pending"&&(O.status="rejected",O.reason=te)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function Q(O,te,ue,pe,Se){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var qe=!1;if(O===null)qe=!0;else switch(Ne){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(O.$$typeof){case n:case e:qe=!0;break;case v:return qe=O._init,Q(qe(O._payload),te,ue,pe,Se)}}if(qe)return Se=Se(O),qe=pe===""?"."+ke(O,0):pe,fe(Se)?(ue="",qe!=null&&(ue=qe.replace(b,"$&/")+"/"),Q(Se,te,ue,"",function(is){return is})):Se!=null&&(V(Se)&&(Se=P(Se,ue+(Se.key==null||O&&O.key===Se.key?"":(""+Se.key).replace(b,"$&/")+"/")+qe)),te.push(Se)),1;qe=0;var xt=pe===""?".":pe+":";if(fe(O))for(var lt=0;lt<O.length;lt++)pe=O[lt],Ne=xt+ke(pe,lt),qe+=Q(pe,te,ue,Ne,Se);else if(lt=R(O),typeof lt=="function")for(O=lt.call(O),lt=0;!(pe=O.next()).done;)pe=pe.value,Ne=xt+ke(pe,lt++),qe+=Q(pe,te,ue,Ne,Se);else if(Ne==="object"){if(typeof O.then=="function")return Q(dt(O),te,ue,pe,Se);throw te=String(O),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return qe}function ae(O,te,ue){if(O==null)return O;var pe=[],Se=0;return Q(O,pe,"","",function(Ne){return te.call(ue,Ne,Se++)}),pe}function ve(O){if(O._status===-1){var te=O._result;te=te(),te.then(function(ue){(O._status===0||O._status===-1)&&(O._status=1,O._result=ue)},function(ue){(O._status===0||O._status===-1)&&(O._status=2,O._result=ue)}),O._status===-1&&(O._status=0,O._result=te)}if(O._status===1)return O._result.default;throw O._result}var Ge=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},Xe={map:ae,forEach:function(O,te,ue){ae(O,function(){te.apply(this,arguments)},ue)},count:function(O){var te=0;return ae(O,function(){te++}),te},toArray:function(O){return ae(O,function(te){return te})||[]},only:function(O){if(!V(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Ie.Activity=T,Ie.Children=Xe,Ie.Component=X,Ie.Fragment=t,Ie.Profiler=r,Ie.PureComponent=W,Ie.StrictMode=o,Ie.Suspense=y,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Ie.cache=function(O){return function(){return O.apply(null,arguments)}},Ie.cacheSignal=function(){return null},Ie.cloneElement=function(O,te,ue){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var pe=q({},O.props),Se=O.key;if(te!=null)for(Ne in te.key!==void 0&&(Se=""+te.key),te)!N.call(te,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&te.ref===void 0||(pe[Ne]=te[Ne]);var Ne=arguments.length-2;if(Ne===1)pe.children=ue;else if(1<Ne){for(var qe=Array(Ne),xt=0;xt<Ne;xt++)qe[xt]=arguments[xt+2];pe.children=qe}return M(O.type,Se,pe)},Ie.createContext=function(O){return O={$$typeof:c,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:l,_context:O},O},Ie.createElement=function(O,te,ue){var pe,Se={},Ne=null;if(te!=null)for(pe in te.key!==void 0&&(Ne=""+te.key),te)N.call(te,pe)&&pe!=="key"&&pe!=="__self"&&pe!=="__source"&&(Se[pe]=te[pe]);var qe=arguments.length-2;if(qe===1)Se.children=ue;else if(1<qe){for(var xt=Array(qe),lt=0;lt<qe;lt++)xt[lt]=arguments[lt+2];Se.children=xt}if(O&&O.defaultProps)for(pe in qe=O.defaultProps,qe)Se[pe]===void 0&&(Se[pe]=qe[pe]);return M(O,Ne,Se)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(O){return{$$typeof:h,render:O}},Ie.isValidElement=V,Ie.lazy=function(O){return{$$typeof:v,_payload:{_status:-1,_result:O},_init:ve}},Ie.memo=function(O,te){return{$$typeof:m,type:O,compare:te===void 0?null:te}},Ie.startTransition=function(O){var te=D.T,ue={};D.T=ue;try{var pe=O(),Se=D.S;Se!==null&&Se(ue,pe),typeof pe=="object"&&pe!==null&&typeof pe.then=="function"&&pe.then(le,Ge)}catch(Ne){Ge(Ne)}finally{te!==null&&ue.types!==null&&(te.types=ue.types),D.T=te}},Ie.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Ie.use=function(O){return D.H.use(O)},Ie.useActionState=function(O,te,ue){return D.H.useActionState(O,te,ue)},Ie.useCallback=function(O,te){return D.H.useCallback(O,te)},Ie.useContext=function(O){return D.H.useContext(O)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(O,te){return D.H.useDeferredValue(O,te)},Ie.useEffect=function(O,te){return D.H.useEffect(O,te)},Ie.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Ie.useId=function(){return D.H.useId()},Ie.useImperativeHandle=function(O,te,ue){return D.H.useImperativeHandle(O,te,ue)},Ie.useInsertionEffect=function(O,te){return D.H.useInsertionEffect(O,te)},Ie.useLayoutEffect=function(O,te){return D.H.useLayoutEffect(O,te)},Ie.useMemo=function(O,te){return D.H.useMemo(O,te)},Ie.useOptimistic=function(O,te){return D.H.useOptimistic(O,te)},Ie.useReducer=function(O,te,ue){return D.H.useReducer(O,te,ue)},Ie.useRef=function(O){return D.H.useRef(O)},Ie.useState=function(O){return D.H.useState(O)},Ie.useSyncExternalStore=function(O,te,ue){return D.H.useSyncExternalStore(O,te,ue)},Ie.useTransition=function(){return D.H.useTransition()},Ie.version="19.2.3",Ie}var B_;function Ap(){return B_||(B_=1,Ih.exports=nI()),Ih.exports}var qt=Ap();const iI=GT(qt);var Rh={exports:{}},pl={},wh={exports:{}},Mh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_;function oI(){return G_||(G_=1,(function(n){function e(Q,ae){var ve=Q.length;Q.push(ae);e:for(;0<ve;){var Ge=ve-1>>>1,Xe=Q[Ge];if(0<r(Xe,ae))Q[Ge]=ae,Q[ve]=Xe,ve=Ge;else break e}}function t(Q){return Q.length===0?null:Q[0]}function o(Q){if(Q.length===0)return null;var ae=Q[0],ve=Q.pop();if(ve!==ae){Q[0]=ve;e:for(var Ge=0,Xe=Q.length,O=Xe>>>1;Ge<O;){var te=2*(Ge+1)-1,ue=Q[te],pe=te+1,Se=Q[pe];if(0>r(ue,ve))pe<Xe&&0>r(Se,ue)?(Q[Ge]=Se,Q[pe]=ve,Ge=pe):(Q[Ge]=ue,Q[te]=ve,Ge=te);else if(pe<Xe&&0>r(Se,ve))Q[Ge]=Se,Q[pe]=ve,Ge=pe;else break e}}return ae}function r(Q,ae){var ve=Q.sortIndex-ae.sortIndex;return ve!==0?ve:Q.id-ae.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var y=[],m=[],v=1,T=null,S=3,R=!1,U=!1,q=!1,L=!1,X=typeof setTimeout=="function"?setTimeout:null,ie=typeof clearTimeout=="function"?clearTimeout:null,W=typeof setImmediate<"u"?setImmediate:null;function se(Q){for(var ae=t(m);ae!==null;){if(ae.callback===null)o(m);else if(ae.startTime<=Q)o(m),ae.sortIndex=ae.expirationTime,e(y,ae);else break;ae=t(m)}}function fe(Q){if(q=!1,se(Q),!U)if(t(y)!==null)U=!0,le||(le=!0,F());else{var ae=t(m);ae!==null&&dt(fe,ae.startTime-Q)}}var le=!1,D=-1,N=5,M=-1;function P(){return L?!0:!(n.unstable_now()-M<N)}function V(){if(L=!1,le){var Q=n.unstable_now();M=Q;var ae=!0;try{e:{U=!1,q&&(q=!1,ie(D),D=-1),R=!0;var ve=S;try{t:{for(se(Q),T=t(y);T!==null&&!(T.expirationTime>Q&&P());){var Ge=T.callback;if(typeof Ge=="function"){T.callback=null,S=T.priorityLevel;var Xe=Ge(T.expirationTime<=Q);if(Q=n.unstable_now(),typeof Xe=="function"){T.callback=Xe,se(Q),ae=!0;break t}T===t(y)&&o(y),se(Q)}else o(y);T=t(y)}if(T!==null)ae=!0;else{var O=t(m);O!==null&&dt(fe,O.startTime-Q),ae=!1}}break e}finally{T=null,S=ve,R=!1}ae=void 0}}finally{ae?F():le=!1}}}var F;if(typeof W=="function")F=function(){W(V)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,ke=b.port2;b.port1.onmessage=V,F=function(){ke.postMessage(null)}}else F=function(){X(V,0)};function dt(Q,ae){D=X(function(){Q(n.unstable_now())},ae)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var ae=3;break;default:ae=S}var ve=S;S=ae;try{return Q()}finally{S=ve}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(Q,ae){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var ve=S;S=Q;try{return ae()}finally{S=ve}},n.unstable_scheduleCallback=function(Q,ae,ve){var Ge=n.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ge+ve:Ge):ve=Ge,Q){case 1:var Xe=-1;break;case 2:Xe=250;break;case 5:Xe=1073741823;break;case 4:Xe=1e4;break;default:Xe=5e3}return Xe=ve+Xe,Q={id:v++,callback:ae,priorityLevel:Q,startTime:ve,expirationTime:Xe,sortIndex:-1},ve>Ge?(Q.sortIndex=ve,e(m,Q),t(y)===null&&Q===t(m)&&(q?(ie(D),D=-1):q=!0,dt(fe,ve-Ge))):(Q.sortIndex=Xe,e(y,Q),U||R||(U=!0,le||(le=!0,F()))),Q},n.unstable_shouldYield=P,n.unstable_wrapCallback=function(Q){var ae=S;return function(){var ve=S;S=ae;try{return Q.apply(this,arguments)}finally{S=ve}}}})(Mh)),Mh}var H_;function sI(){return H_||(H_=1,wh.exports=oI()),wh.exports}var Nh={exports:{}},Zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function rI(){if(z_)return Zt;z_=1;var n=Ap();function e(y){var m="https://react.dev/errors/"+y;if(1<arguments.length){m+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)m+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+y+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var o={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(y,m,v){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:y,containerInfo:m,implementation:v}}var c=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(y,m){if(y==="font")return"";if(typeof m=="string")return m==="use-credentials"?m:""}return Zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,Zt.createPortal=function(y,m){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)throw Error(e(299));return l(y,m,null,v)},Zt.flushSync=function(y){var m=c.T,v=o.p;try{if(c.T=null,o.p=2,y)return y()}finally{c.T=m,o.p=v,o.d.f()}},Zt.preconnect=function(y,m){typeof y=="string"&&(m?(m=m.crossOrigin,m=typeof m=="string"?m==="use-credentials"?m:"":void 0):m=null,o.d.C(y,m))},Zt.prefetchDNS=function(y){typeof y=="string"&&o.d.D(y)},Zt.preinit=function(y,m){if(typeof y=="string"&&m&&typeof m.as=="string"){var v=m.as,T=h(v,m.crossOrigin),S=typeof m.integrity=="string"?m.integrity:void 0,R=typeof m.fetchPriority=="string"?m.fetchPriority:void 0;v==="style"?o.d.S(y,typeof m.precedence=="string"?m.precedence:void 0,{crossOrigin:T,integrity:S,fetchPriority:R}):v==="script"&&o.d.X(y,{crossOrigin:T,integrity:S,fetchPriority:R,nonce:typeof m.nonce=="string"?m.nonce:void 0})}},Zt.preinitModule=function(y,m){if(typeof y=="string")if(typeof m=="object"&&m!==null){if(m.as==null||m.as==="script"){var v=h(m.as,m.crossOrigin);o.d.M(y,{crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0})}}else m==null&&o.d.M(y)},Zt.preload=function(y,m){if(typeof y=="string"&&typeof m=="object"&&m!==null&&typeof m.as=="string"){var v=m.as,T=h(v,m.crossOrigin);o.d.L(y,v,{crossOrigin:T,integrity:typeof m.integrity=="string"?m.integrity:void 0,nonce:typeof m.nonce=="string"?m.nonce:void 0,type:typeof m.type=="string"?m.type:void 0,fetchPriority:typeof m.fetchPriority=="string"?m.fetchPriority:void 0,referrerPolicy:typeof m.referrerPolicy=="string"?m.referrerPolicy:void 0,imageSrcSet:typeof m.imageSrcSet=="string"?m.imageSrcSet:void 0,imageSizes:typeof m.imageSizes=="string"?m.imageSizes:void 0,media:typeof m.media=="string"?m.media:void 0})}},Zt.preloadModule=function(y,m){if(typeof y=="string")if(m){var v=h(m.as,m.crossOrigin);o.d.m(y,{as:typeof m.as=="string"&&m.as!=="script"?m.as:void 0,crossOrigin:v,integrity:typeof m.integrity=="string"?m.integrity:void 0})}else o.d.m(y)},Zt.requestFormReset=function(y){o.d.r(y)},Zt.unstable_batchedUpdates=function(y,m){return y(m)},Zt.useFormState=function(y,m,v){return c.H.useFormState(y,m,v)},Zt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Zt.version="19.2.3",Zt}var Y_;function aI(){if(Y_)return Nh.exports;Y_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Nh.exports=rI(),Nh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J_;function lI(){if(J_)return pl;J_=1;var n=sI(),e=Ap(),t=aI();function o(i){var s="https://react.dev/errors/"+i;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)s+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+i+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function l(i){var s=i,a=i;if(i.alternate)for(;s.return;)s=s.return;else{i=s;do s=i,(s.flags&4098)!==0&&(a=s.return),i=s.return;while(i)}return s.tag===3?a:null}function c(i){if(i.tag===13){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function h(i){if(i.tag===31){var s=i.memoizedState;if(s===null&&(i=i.alternate,i!==null&&(s=i.memoizedState)),s!==null)return s.dehydrated}return null}function y(i){if(l(i)!==i)throw Error(o(188))}function m(i){var s=i.alternate;if(!s){if(s=l(i),s===null)throw Error(o(188));return s!==i?null:i}for(var a=i,u=s;;){var g=a.return;if(g===null)break;var _=g.alternate;if(_===null){if(u=g.return,u!==null){a=u;continue}break}if(g.child===_.child){for(_=g.child;_;){if(_===a)return y(g),i;if(_===u)return y(g),s;_=_.sibling}throw Error(o(188))}if(a.return!==u.return)a=g,u=_;else{for(var A=!1,I=g.child;I;){if(I===a){A=!0,a=g,u=_;break}if(I===u){A=!0,u=g,a=_;break}I=I.sibling}if(!A){for(I=_.child;I;){if(I===a){A=!0,a=_,u=g;break}if(I===u){A=!0,u=_,a=g;break}I=I.sibling}if(!A)throw Error(o(189))}}if(a.alternate!==u)throw Error(o(190))}if(a.tag!==3)throw Error(o(188));return a.stateNode.current===a?i:s}function v(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i;for(i=i.child;i!==null;){if(s=v(i),s!==null)return s;i=i.sibling}return null}var T=Object.assign,S=Symbol.for("react.element"),R=Symbol.for("react.transitional.element"),U=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),X=Symbol.for("react.profiler"),ie=Symbol.for("react.consumer"),W=Symbol.for("react.context"),se=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),le=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function F(i){return i===null||typeof i!="object"?null:(i=V&&i[V]||i["@@iterator"],typeof i=="function"?i:null)}var b=Symbol.for("react.client.reference");function ke(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===b?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case q:return"Fragment";case X:return"Profiler";case L:return"StrictMode";case fe:return"Suspense";case le:return"SuspenseList";case M:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case U:return"Portal";case W:return i.displayName||"Context";case ie:return(i._context.displayName||"Context")+".Consumer";case se:var s=i.render;return i=i.displayName,i||(i=s.displayName||s.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case D:return s=i.displayName||null,s!==null?s:ke(i.type)||"Memo";case N:s=i._payload,i=i._init;try{return ke(i(s))}catch{}}return null}var dt=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ge=[],Xe=-1;function O(i){return{current:i}}function te(i){0>Xe||(i.current=Ge[Xe],Ge[Xe]=null,Xe--)}function ue(i,s){Xe++,Ge[Xe]=i.current,i.current=s}var pe=O(null),Se=O(null),Ne=O(null),qe=O(null);function xt(i,s){switch(ue(Ne,s),ue(Se,i),ue(pe,null),s.nodeType){case 9:case 11:i=(i=s.documentElement)&&(i=i.namespaceURI)?a_(i):0;break;default:if(i=s.tagName,s=s.namespaceURI)s=a_(s),i=l_(s,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}te(pe),ue(pe,i)}function lt(){te(pe),te(Se),te(Ne)}function is(i){i.memoizedState!==null&&ue(qe,i);var s=pe.current,a=l_(s,i.type);s!==a&&(ue(Se,i),ue(pe,a))}function zs(i){Se.current===i&&(te(pe),te(Se)),qe.current===i&&(te(qe),ul._currentValue=ve)}var Ys,Js;function ai(i){if(Ys===void 0)try{throw Error()}catch(a){var s=a.stack.trim().match(/\n( *(at )?)/);Ys=s&&s[1]||"",Js=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ys+i+Js}var ua=!1;function os(i,s){if(!i||ua)return"";ua=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(K){var Y=K}Reflect.construct(i,[],ee)}else{try{ee.call()}catch(K){Y=K}i.call(ee.prototype)}}else{try{throw Error()}catch(K){Y=K}(ee=i())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var g=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");g&&g.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var _=u.DetermineComponentFrameRoot(),A=_[0],I=_[1];if(A&&I){var x=A.split(`
`),z=I.split(`
`);for(g=u=0;u<x.length&&!x[u].includes("DetermineComponentFrameRoot");)u++;for(;g<z.length&&!z[g].includes("DetermineComponentFrameRoot");)g++;if(u===x.length||g===z.length)for(u=x.length-1,g=z.length-1;1<=u&&0<=g&&x[u]!==z[g];)g--;for(;1<=u&&0<=g;u--,g--)if(x[u]!==z[g]){if(u!==1||g!==1)do if(u--,g--,0>g||x[u]!==z[g]){var $=`
`+x[u].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=u&&0<=g);break}}}finally{ua=!1,Error.prepareStackTrace=a}return(a=i?i.displayName||i.name:"")?ai(a):""}function ca(i,s){switch(i.tag){case 26:case 27:case 5:return ai(i.type);case 16:return ai("Lazy");case 13:return i.child!==s&&s!==null?ai("Suspense Fallback"):ai("Suspense");case 19:return ai("SuspenseList");case 0:case 15:return os(i.type,!1);case 11:return os(i.type.render,!1);case 1:return os(i.type,!0);case 31:return ai("Activity");default:return""}}function fa(i){try{var s="",a=null;do s+=ca(i,a),a=i,i=i.return;while(i);return s}catch(u){return`
Error generating stack: `+u.message+`
`+u.stack}}var Tt=Object.prototype.hasOwnProperty,Vt=n.unstable_scheduleCallback,lo=n.unstable_cancelCallback,Rf=n.unstable_shouldYield,Bl=n.unstable_requestPaint,on=n.unstable_now,ss=n.unstable_getCurrentPriorityLevel,da=n.unstable_ImmediatePriority,ha=n.unstable_UserBlockingPriority,uo=n.unstable_NormalPriority,wf=n.unstable_LowPriority,Gl=n.unstable_IdlePriority,Hl=n.log,zl=n.unstable_setDisableYieldValue,zn=null,Ht=null;function wn(i){if(typeof Hl=="function"&&zl(i),Ht&&typeof Ht.setStrictMode=="function")try{Ht.setStrictMode(zn,i)}catch{}}var mt=Math.clz32?Math.clz32:Jl,Yl=Math.log,Ks=Math.LN2;function Jl(i){return i>>>=0,i===0?32:31-(Yl(i)/Ks|0)|0}var li=256,rs=262144,Et=4194304;function ui(i){var s=i&42;if(s!==0)return s;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function ci(i,s,a){var u=i.pendingLanes;if(u===0)return 0;var g=0,_=i.suspendedLanes,A=i.pingedLanes;i=i.warmLanes;var I=u&134217727;return I!==0?(u=I&~_,u!==0?g=ui(u):(A&=I,A!==0?g=ui(A):a||(a=I&~i,a!==0&&(g=ui(a))))):(I=u&~_,I!==0?g=ui(I):A!==0?g=ui(A):a||(a=u&~i,a!==0&&(g=ui(a)))),g===0?0:s!==0&&s!==g&&(s&_)===0&&(_=g&-g,a=s&-s,_>=a||_===32&&(a&4194048)!==0)?s:g}function Yn(i,s){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&s)===0}function Mf(i,s){switch(i){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Kl(){var i=Et;return Et<<=1,(Et&62914560)===0&&(Et=4194304),i}function fi(i){for(var s=[],a=0;31>a;a++)s.push(i);return s}function as(i,s){i.pendingLanes|=s,s!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function Nf(i,s,a,u,g,_){var A=i.pendingLanes;i.pendingLanes=a,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=a,i.entangledLanes&=a,i.errorRecoveryDisabledLanes&=a,i.shellSuspendCounter=0;var I=i.entanglements,x=i.expirationTimes,z=i.hiddenUpdates;for(a=A&~a;0<a;){var $=31-mt(a),ee=1<<$;I[$]=0,x[$]=-1;var Y=z[$];if(Y!==null)for(z[$]=null,$=0;$<Y.length;$++){var K=Y[$];K!==null&&(K.lane&=-536870913)}a&=~ee}u!==0&&ls(i,u,0),_!==0&&g===0&&i.tag!==0&&(i.suspendedLanes|=_&~(A&~s))}function ls(i,s,a){i.pendingLanes|=s,i.suspendedLanes&=~s;var u=31-mt(s);i.entangledLanes|=s,i.entanglements[u]=i.entanglements[u]|1073741824|a&261930}function pa(i,s){var a=i.entangledLanes|=s;for(i=i.entanglements;a;){var u=31-mt(a),g=1<<u;g&s|i[u]&s&&(i[u]|=s),a&=~g}}function ma(i,s){var a=s&-s;return a=(a&42)!==0?1:us(a),(a&(i.suspendedLanes|s))!==0?0:a}function us(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ui(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function Ql(){var i=ae.p;return i!==0?i:(i=window.event,i===void 0?32:b_(i.type))}function Jn(i,s){var a=ae.p;try{return ae.p=i,s()}finally{ae.p=a}}var Kn=Math.random().toString(36).slice(2),St="__reactFiber$"+Kn,Lt="__reactProps$"+Kn,di="__reactContainer$"+Kn,Qs="__reactEvents$"+Kn,Df="__reactListeners$"+Kn,Xl="__reactHandles$"+Kn,$l="__reactResources$"+Kn,hi="__reactMarker$"+Kn;function Xs(i){delete i[St],delete i[Lt],delete i[Qs],delete i[Df],delete i[Xl]}function pi(i){var s=i[St];if(s)return s;for(var a=i.parentNode;a;){if(s=a[di]||a[St]){if(a=s.alternate,s.child!==null||a!==null&&a.child!==null)for(i=m_(i);i!==null;){if(a=i[St])return a;i=m_(i)}return s}i=a,a=i.parentNode}return null}function Mn(i){if(i=i[St]||i[di]){var s=i.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return i}return null}function _n(i){var s=i.tag;if(s===5||s===26||s===27||s===6)return i.stateNode;throw Error(o(33))}function mi(i){var s=i[$l];return s||(s=i[$l]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function At(i){i[hi]=!0}var ga=new Set,ya={};function gi(i,s){yi(i,s),yi(i+"Capture",s)}function yi(i,s){for(ya[i]=s,i=0;i<s.length;i++)ga.add(s[i])}var _a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),va={},Ta={};function Wl(i){return Tt.call(Ta,i)?!0:Tt.call(va,i)?!1:_a.test(i)?Ta[i]=!0:(va[i]=!0,!1)}function $s(i,s,a){if(Wl(s))if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":i.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){i.removeAttribute(s);return}}i.setAttribute(s,""+a)}}function vn(i,s,a){if(a===null)i.removeAttribute(s);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(s);return}i.setAttribute(s,""+a)}}function Ct(i,s,a,u){if(u===null)i.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttributeNS(s,a,""+u)}}function kt(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function co(i){var s=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ea(i,s,a){var u=Object.getOwnPropertyDescriptor(i.constructor.prototype,s);if(!i.hasOwnProperty(s)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,_=u.set;return Object.defineProperty(i,s,{configurable:!0,get:function(){return g.call(this)},set:function(A){a=""+A,_.call(this,A)}}),Object.defineProperty(i,s,{enumerable:u.enumerable}),{getValue:function(){return a},setValue:function(A){a=""+A},stopTracking:function(){i._valueTracker=null,delete i[s]}}}}function $e(i){if(!i._valueTracker){var s=co(i)?"checked":"value";i._valueTracker=Ea(i,s,""+i[s])}}function cs(i){if(!i)return!1;var s=i._valueTracker;if(!s)return!0;var a=s.getValue(),u="";return i&&(u=co(i)?i.checked?"true":"false":i.value),i=u,i!==a?(s.setValue(i),!0):!1}function _i(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var fs=/[\n"\\]/g;function un(i){return i.replace(fs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Ws(i,s,a,u,g,_,A,I){i.name="",A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.type=A:i.removeAttribute("type"),s!=null?A==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+kt(s)):i.value!==""+kt(s)&&(i.value=""+kt(s)):A!=="submit"&&A!=="reset"||i.removeAttribute("value"),s!=null?Sa(i,A,kt(s)):a!=null?Sa(i,A,kt(a)):u!=null&&i.removeAttribute("value"),g==null&&_!=null&&(i.defaultChecked=!!_),g!=null&&(i.checked=g&&typeof g!="function"&&typeof g!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?i.name=""+kt(I):i.removeAttribute("name")}function Zl(i,s,a,u,g,_,A,I){if(_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(i.type=_),s!=null||a!=null){if(!(_!=="submit"&&_!=="reset"||s!=null)){$e(i);return}a=a!=null?""+kt(a):"",s=s!=null?""+kt(s):a,I||s===i.value||(i.value=s),i.defaultValue=s}u=u??g,u=typeof u!="function"&&typeof u!="symbol"&&!!u,i.checked=I?i.checked:!!u,i.defaultChecked=!!u,A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(i.name=A),$e(i)}function Sa(i,s,a){s==="number"&&_i(i.ownerDocument)===i||i.defaultValue===""+a||(i.defaultValue=""+a)}function fo(i,s,a,u){if(i=i.options,s){s={};for(var g=0;g<a.length;g++)s["$"+a[g]]=!0;for(a=0;a<i.length;a++)g=s.hasOwnProperty("$"+i[a].value),i[a].selected!==g&&(i[a].selected=g),g&&u&&(i[a].defaultSelected=!0)}else{for(a=""+kt(a),s=null,g=0;g<i.length;g++){if(i[g].value===a){i[g].selected=!0,u&&(i[g].defaultSelected=!0);return}s!==null||i[g].disabled||(s=i[g])}s!==null&&(s.selected=!0)}}function jl(i,s,a){if(s!=null&&(s=""+kt(s),s!==i.value&&(i.value=s),a==null)){i.defaultValue!==s&&(i.defaultValue=s);return}i.defaultValue=a!=null?""+kt(a):""}function ho(i,s,a,u){if(s==null){if(u!=null){if(a!=null)throw Error(o(92));if(dt(u)){if(1<u.length)throw Error(o(93));u=u[0]}a=u}a==null&&(a=""),s=a}a=kt(s),i.defaultValue=a,u=i.textContent,u===a&&u!==""&&u!==null&&(i.value=u),$e(i)}function cn(i,s){if(s){var a=i.firstChild;if(a&&a===i.lastChild&&a.nodeType===3){a.nodeValue=s;return}}i.textContent=s}var eu=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Aa(i,s,a){var u=s.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?u?i.setProperty(s,""):s==="float"?i.cssFloat="":i[s]="":u?i.setProperty(s,a):typeof a!="number"||a===0||eu.has(s)?s==="float"?i.cssFloat=a:i[s]=(""+a).trim():i[s]=a+"px"}function Ca(i,s,a){if(s!=null&&typeof s!="object")throw Error(o(62));if(i=i.style,a!=null){for(var u in a)!a.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?i.setProperty(u,""):u==="float"?i.cssFloat="":i[u]="");for(var g in s)u=s[g],s.hasOwnProperty(g)&&a[g]!==u&&Aa(i,g,u)}else for(var _ in s)s.hasOwnProperty(_)&&Aa(i,_,s[_])}function Zs(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),po=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function js(i){return po.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Qn(){}var Ia=null;function Nn(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var mo=null,vi=null;function ds(i){var s=Mn(i);if(s&&(i=s.stateNode)){var a=i[Lt]||null;e:switch(i=s.stateNode,s.type){case"input":if(Ws(i,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),s=a.name,a.type==="radio"&&s!=null){for(a=i;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+un(""+s)+'"][type="radio"]'),s=0;s<a.length;s++){var u=a[s];if(u!==i&&u.form===i.form){var g=u[Lt]||null;if(!g)throw Error(o(90));Ws(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name)}}for(s=0;s<a.length;s++)u=a[s],u.form===i.form&&cs(u)}break e;case"textarea":jl(i,a.value,a.defaultValue);break e;case"select":s=a.value,s!=null&&fo(i,!!a.multiple,s,!1)}}}var er=!1;function go(i,s,a){if(er)return i(s,a);er=!0;try{var u=i(s);return u}finally{if(er=!1,(mo!==null||vi!==null)&&(Qu(),mo&&(s=mo,i=vi,vi=mo=null,ds(s),i)))for(s=0;s<i.length;s++)ds(i[s])}}function Xn(i,s){var a=i.stateNode;if(a===null)return null;var u=a[Lt]||null;if(u===null)return null;a=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(i=i.type,u=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!u;break e;default:i=!1}if(i)return null;if(a&&typeof a!="function")throw Error(o(231,s,typeof a));return a}var Dn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),hs=!1;if(Dn)try{var je={};Object.defineProperty(je,"passive",{get:function(){hs=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch{hs=!1}var Ti=null,Ra=null,ps=null;function wa(){if(ps)return ps;var i,s=Ra,a=s.length,u,g="value"in Ti?Ti.value:Ti.textContent,_=g.length;for(i=0;i<a&&s[i]===g[i];i++);var A=a-i;for(u=1;u<=A&&s[a-u]===g[_-u];u++);return ps=g.slice(i,1<u?1-u:void 0)}function ms(i){var s=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&s===13&&(i=13)):i=s,i===10&&(i=13),32<=i||i===13?i:0}function Li(){return!0}function $n(){return!1}function zt(i){function s(a,u,g,_,A){this._reactName=a,this._targetInst=g,this.type=u,this.nativeEvent=_,this.target=A,this.currentTarget=null;for(var I in i)i.hasOwnProperty(I)&&(a=i[I],this[I]=a?a(_):_[I]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?Li:$n,this.isPropagationStopped=$n,this}return T(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),s}var ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ei=zt(ki),yo=T({},ki,{view:0,detail:0}),Ma=zt(yo),_o,tr,Si,nr=T({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vo,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Si&&(Si&&i.type==="mousemove"?(_o=i.screenX-Si.screenX,tr=i.screenY-Si.screenY):tr=_o=0,Si=i),_o)},movementY:function(i){return"movementY"in i?i.movementY:tr}}),Na=zt(nr),gs=T({},nr,{dataTransfer:0}),nu=zt(gs),iu=T({},yo,{relatedTarget:0}),ys=zt(iu),Da=T({},ki,{animationName:0,elapsedTime:0,pseudoElement:0}),ou=zt(Da),ir=T({},ki,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),su=zt(ir),ru=T({},ki,{data:0}),Ai=zt(ru),au={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cu(i){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(i):(i=uu[i])?!!s[i]:!1}function vo(){return cu}var sn=T({},yo,{key:function(i){if(i.key){var s=au[i.key]||i.key;if(s!=="Unidentified")return s}return i.type==="keypress"?(i=ms(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?lu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vo,charCode:function(i){return i.type==="keypress"?ms(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ms(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fu=zt(sn),du=T({},nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Oi=zt(du),p=T({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vo}),E=zt(p),C=T({},ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),w=zt(C),G=T({},nr,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),J=zt(G),re=T({},ki,{newState:0,oldState:0}),we=zt(re),gt=[9,13,27,32],Je=Dn&&"CompositionEvent"in window,ut=null;Dn&&"documentMode"in document&&(ut=document.documentMode);var bn=Dn&&"TextEvent"in window&&!ut,Ci=Dn&&(!Je||ut&&8<ut&&11>=ut),Wn=" ",Zn=!1;function _s(i,s){switch(i){case"keyup":return gt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function or(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var sr=!1;function CA(i,s){switch(i){case"compositionend":return or(s);case"keypress":return s.which!==32?null:(Zn=!0,Wn);case"textInput":return i=s.data,i===Wn&&Zn?null:i;default:return null}}function IA(i,s){if(sr)return i==="compositionend"||!Je&&_s(i,s)?(i=wa(),ps=Ra=Ti=null,sr=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Ci&&s.locale!=="ko"?null:s.data;default:return null}}var RA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _m(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s==="input"?!!RA[i.type]:s==="textarea"}function vm(i,s,a,u){mo?vi?vi.push(u):vi=[u]:mo=u,s=tc(s,"onChange"),0<s.length&&(a=new Ei("onChange","change",null,a,u),i.push({event:a,listeners:s}))}var ba=null,xa=null;function wA(i){t_(i,0)}function hu(i){var s=_n(i);if(cs(s))return i}function Tm(i,s){if(i==="change")return s}var Em=!1;if(Dn){var bf;if(Dn){var xf="oninput"in document;if(!xf){var Sm=document.createElement("div");Sm.setAttribute("oninput","return;"),xf=typeof Sm.oninput=="function"}bf=xf}else bf=!1;Em=bf&&(!document.documentMode||9<document.documentMode)}function Am(){ba&&(ba.detachEvent("onpropertychange",Cm),xa=ba=null)}function Cm(i){if(i.propertyName==="value"&&hu(xa)){var s=[];vm(s,xa,i,Nn(i)),go(wA,s)}}function MA(i,s,a){i==="focusin"?(Am(),ba=s,xa=a,ba.attachEvent("onpropertychange",Cm)):i==="focusout"&&Am()}function NA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return hu(xa)}function DA(i,s){if(i==="click")return hu(s)}function bA(i,s){if(i==="input"||i==="change")return hu(s)}function xA(i,s){return i===s&&(i!==0||1/i===1/s)||i!==i&&s!==s}var Tn=typeof Object.is=="function"?Object.is:xA;function Va(i,s){if(Tn(i,s))return!0;if(typeof i!="object"||i===null||typeof s!="object"||s===null)return!1;var a=Object.keys(i),u=Object.keys(s);if(a.length!==u.length)return!1;for(u=0;u<a.length;u++){var g=a[u];if(!Tt.call(s,g)||!Tn(i[g],s[g]))return!1}return!0}function Im(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Rm(i,s){var a=Im(i);i=0;for(var u;a;){if(a.nodeType===3){if(u=i+a.textContent.length,i<=s&&u>=s)return{node:a,offset:s-i};i=u}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Im(a)}}function wm(i,s){return i&&s?i===s?!0:i&&i.nodeType===3?!1:s&&s.nodeType===3?wm(i,s.parentNode):"contains"in i?i.contains(s):i.compareDocumentPosition?!!(i.compareDocumentPosition(s)&16):!1:!1}function Mm(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var s=_i(i.document);s instanceof i.HTMLIFrameElement;){try{var a=typeof s.contentWindow.location.href=="string"}catch{a=!1}if(a)i=s.contentWindow;else break;s=_i(i.document)}return s}function Vf(i){var s=i&&i.nodeName&&i.nodeName.toLowerCase();return s&&(s==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||s==="textarea"||i.contentEditable==="true")}var VA=Dn&&"documentMode"in document&&11>=document.documentMode,rr=null,Pf=null,Pa=null,Uf=!1;function Nm(i,s,a){var u=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Uf||rr==null||rr!==_i(u)||(u=rr,"selectionStart"in u&&Vf(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pa&&Va(Pa,u)||(Pa=u,u=tc(Pf,"onSelect"),0<u.length&&(s=new Ei("onSelect","select",null,s,a),i.push({event:s,listeners:u}),s.target=rr)))}function vs(i,s){var a={};return a[i.toLowerCase()]=s.toLowerCase(),a["Webkit"+i]="webkit"+s,a["Moz"+i]="moz"+s,a}var ar={animationend:vs("Animation","AnimationEnd"),animationiteration:vs("Animation","AnimationIteration"),animationstart:vs("Animation","AnimationStart"),transitionrun:vs("Transition","TransitionRun"),transitionstart:vs("Transition","TransitionStart"),transitioncancel:vs("Transition","TransitionCancel"),transitionend:vs("Transition","TransitionEnd")},Lf={},Dm={};Dn&&(Dm=document.createElement("div").style,"AnimationEvent"in window||(delete ar.animationend.animation,delete ar.animationiteration.animation,delete ar.animationstart.animation),"TransitionEvent"in window||delete ar.transitionend.transition);function Ts(i){if(Lf[i])return Lf[i];if(!ar[i])return i;var s=ar[i],a;for(a in s)if(s.hasOwnProperty(a)&&a in Dm)return Lf[i]=s[a];return i}var bm=Ts("animationend"),xm=Ts("animationiteration"),Vm=Ts("animationstart"),PA=Ts("transitionrun"),UA=Ts("transitionstart"),LA=Ts("transitioncancel"),Pm=Ts("transitionend"),Um=new Map,kf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kf.push("scrollEnd");function jn(i,s){Um.set(i,s),gi(s,[i])}var pu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},xn=[],lr=0,Of=0;function mu(){for(var i=lr,s=Of=lr=0;s<i;){var a=xn[s];xn[s++]=null;var u=xn[s];xn[s++]=null;var g=xn[s];xn[s++]=null;var _=xn[s];if(xn[s++]=null,u!==null&&g!==null){var A=u.pending;A===null?g.next=g:(g.next=A.next,A.next=g),u.pending=g}_!==0&&Lm(a,g,_)}}function gu(i,s,a,u){xn[lr++]=i,xn[lr++]=s,xn[lr++]=a,xn[lr++]=u,Of|=u,i.lanes|=u,i=i.alternate,i!==null&&(i.lanes|=u)}function qf(i,s,a,u){return gu(i,s,a,u),yu(i)}function Es(i,s){return gu(i,null,null,s),yu(i)}function Lm(i,s,a){i.lanes|=a;var u=i.alternate;u!==null&&(u.lanes|=a);for(var g=!1,_=i.return;_!==null;)_.childLanes|=a,u=_.alternate,u!==null&&(u.childLanes|=a),_.tag===22&&(i=_.stateNode,i===null||i._visibility&1||(g=!0)),i=_,_=_.return;return i.tag===3?(_=i.stateNode,g&&s!==null&&(g=31-mt(a),i=_.hiddenUpdates,u=i[g],u===null?i[g]=[s]:u.push(s),s.lane=a|536870912),_):null}function yu(i){if(50<nl)throw nl=0,Qd=null,Error(o(185));for(var s=i.return;s!==null;)i=s,s=i.return;return i.tag===3?i.stateNode:null}var ur={};function kA(i,s,a,u){this.tag=i,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(i,s,a,u){return new kA(i,s,a,u)}function Ff(i){return i=i.prototype,!(!i||!i.isReactComponent)}function qi(i,s){var a=i.alternate;return a===null?(a=En(i.tag,s,i.key,i.mode),a.elementType=i.elementType,a.type=i.type,a.stateNode=i.stateNode,a.alternate=i,i.alternate=a):(a.pendingProps=s,a.type=i.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=i.flags&65011712,a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,s=i.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},a.sibling=i.sibling,a.index=i.index,a.ref=i.ref,a.refCleanup=i.refCleanup,a}function km(i,s){i.flags&=65011714;var a=i.alternate;return a===null?(i.childLanes=0,i.lanes=s,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,s=a.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),i}function _u(i,s,a,u,g,_){var A=0;if(u=i,typeof i=="function")Ff(i)&&(A=1);else if(typeof i=="string")A=GC(i,a,pe.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case M:return i=En(31,a,s,g),i.elementType=M,i.lanes=_,i;case q:return Ss(a.children,g,_,s);case L:A=8,g|=24;break;case X:return i=En(12,a,s,g|2),i.elementType=X,i.lanes=_,i;case fe:return i=En(13,a,s,g),i.elementType=fe,i.lanes=_,i;case le:return i=En(19,a,s,g),i.elementType=le,i.lanes=_,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case W:A=10;break e;case ie:A=9;break e;case se:A=11;break e;case D:A=14;break e;case N:A=16,u=null;break e}A=29,a=Error(o(130,i===null?"null":typeof i,"")),u=null}return s=En(A,a,s,g),s.elementType=i,s.type=u,s.lanes=_,s}function Ss(i,s,a,u){return i=En(7,i,u,s),i.lanes=a,i}function Bf(i,s,a){return i=En(6,i,null,s),i.lanes=a,i}function Om(i){var s=En(18,null,null,0);return s.stateNode=i,s}function Gf(i,s,a){return s=En(4,i.children!==null?i.children:[],i.key,s),s.lanes=a,s.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},s}var qm=new WeakMap;function Vn(i,s){if(typeof i=="object"&&i!==null){var a=qm.get(i);return a!==void 0?a:(s={value:i,source:s,stack:fa(s)},qm.set(i,s),s)}return{value:i,source:s,stack:fa(s)}}var cr=[],fr=0,vu=null,Ua=0,Pn=[],Un=0,To=null,Ii=1,Ri="";function Fi(i,s){cr[fr++]=Ua,cr[fr++]=vu,vu=i,Ua=s}function Fm(i,s,a){Pn[Un++]=Ii,Pn[Un++]=Ri,Pn[Un++]=To,To=i;var u=Ii;i=Ri;var g=32-mt(u)-1;u&=~(1<<g),a+=1;var _=32-mt(s)+g;if(30<_){var A=g-g%5;_=(u&(1<<A)-1).toString(32),u>>=A,g-=A,Ii=1<<32-mt(s)+g|a<<g|u,Ri=_+i}else Ii=1<<_|a<<g|u,Ri=i}function Hf(i){i.return!==null&&(Fi(i,1),Fm(i,1,0))}function zf(i){for(;i===vu;)vu=cr[--fr],cr[fr]=null,Ua=cr[--fr],cr[fr]=null;for(;i===To;)To=Pn[--Un],Pn[Un]=null,Ri=Pn[--Un],Pn[Un]=null,Ii=Pn[--Un],Pn[Un]=null}function Bm(i,s){Pn[Un++]=Ii,Pn[Un++]=Ri,Pn[Un++]=To,Ii=s.id,Ri=s.overflow,To=i}var Yt=null,st=null,Oe=!1,Eo=null,Ln=!1,Yf=Error(o(519));function So(i){var s=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw La(Vn(s,i)),Yf}function Gm(i){var s=i.stateNode,a=i.type,u=i.memoizedProps;switch(s[St]=i,s[Lt]=u,a){case"dialog":xe("cancel",s),xe("close",s);break;case"iframe":case"object":case"embed":xe("load",s);break;case"video":case"audio":for(a=0;a<ol.length;a++)xe(ol[a],s);break;case"source":xe("error",s);break;case"img":case"image":case"link":xe("error",s),xe("load",s);break;case"details":xe("toggle",s);break;case"input":xe("invalid",s),Zl(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0);break;case"select":xe("invalid",s);break;case"textarea":xe("invalid",s),ho(s,u.value,u.defaultValue,u.children)}a=u.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||s.textContent===""+a||u.suppressHydrationWarning===!0||s_(s.textContent,a)?(u.popover!=null&&(xe("beforetoggle",s),xe("toggle",s)),u.onScroll!=null&&xe("scroll",s),u.onScrollEnd!=null&&xe("scrollend",s),u.onClick!=null&&(s.onclick=Qn),s=!0):s=!1,s||So(i,!0)}function Hm(i){for(Yt=i.return;Yt;)switch(Yt.tag){case 5:case 31:case 13:Ln=!1;return;case 27:case 3:Ln=!0;return;default:Yt=Yt.return}}function dr(i){if(i!==Yt)return!1;if(!Oe)return Hm(i),Oe=!0,!1;var s=i.tag,a;if((a=s!==3&&s!==27)&&((a=s===5)&&(a=i.type,a=!(a!=="form"&&a!=="button")||uh(i.type,i.memoizedProps)),a=!a),a&&st&&So(i),Hm(i),s===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));st=p_(i)}else if(s===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(317));st=p_(i)}else s===27?(s=st,Lo(i.type)?(i=ph,ph=null,st=i):st=s):st=Yt?On(i.stateNode.nextSibling):null;return!0}function As(){st=Yt=null,Oe=!1}function Jf(){var i=Eo;return i!==null&&(pn===null?pn=i:pn.push.apply(pn,i),Eo=null),i}function La(i){Eo===null?Eo=[i]:Eo.push(i)}var Kf=O(null),Cs=null,Bi=null;function Ao(i,s,a){ue(Kf,s._currentValue),s._currentValue=a}function Gi(i){i._currentValue=Kf.current,te(Kf)}function Qf(i,s,a){for(;i!==null;){var u=i.alternate;if((i.childLanes&s)!==s?(i.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),i===a)break;i=i.return}}function Xf(i,s,a,u){var g=i.child;for(g!==null&&(g.return=i);g!==null;){var _=g.dependencies;if(_!==null){var A=g.child;_=_.firstContext;e:for(;_!==null;){var I=_;_=g;for(var x=0;x<s.length;x++)if(I.context===s[x]){_.lanes|=a,I=_.alternate,I!==null&&(I.lanes|=a),Qf(_.return,a,i),u||(A=null);break e}_=I.next}}else if(g.tag===18){if(A=g.return,A===null)throw Error(o(341));A.lanes|=a,_=A.alternate,_!==null&&(_.lanes|=a),Qf(A,a,i),A=null}else A=g.child;if(A!==null)A.return=g;else for(A=g;A!==null;){if(A===i){A=null;break}if(g=A.sibling,g!==null){g.return=A.return,A=g;break}A=A.return}g=A}}function hr(i,s,a,u){i=null;for(var g=s,_=!1;g!==null;){if(!_){if((g.flags&524288)!==0)_=!0;else if((g.flags&262144)!==0)break}if(g.tag===10){var A=g.alternate;if(A===null)throw Error(o(387));if(A=A.memoizedProps,A!==null){var I=g.type;Tn(g.pendingProps.value,A.value)||(i!==null?i.push(I):i=[I])}}else if(g===qe.current){if(A=g.alternate,A===null)throw Error(o(387));A.memoizedState.memoizedState!==g.memoizedState.memoizedState&&(i!==null?i.push(ul):i=[ul])}g=g.return}i!==null&&Xf(s,i,a,u),s.flags|=262144}function Tu(i){for(i=i.firstContext;i!==null;){if(!Tn(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Is(i){Cs=i,Bi=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Jt(i){return zm(Cs,i)}function Eu(i,s){return Cs===null&&Is(i),zm(i,s)}function zm(i,s){var a=s._currentValue;if(s={context:s,memoizedValue:a,next:null},Bi===null){if(i===null)throw Error(o(308));Bi=s,i.dependencies={lanes:0,firstContext:s},i.flags|=524288}else Bi=Bi.next=s;return a}var OA=typeof AbortController<"u"?AbortController:function(){var i=[],s=this.signal={aborted:!1,addEventListener:function(a,u){i.push(u)}};this.abort=function(){s.aborted=!0,i.forEach(function(a){return a()})}},qA=n.unstable_scheduleCallback,FA=n.unstable_NormalPriority,It={$$typeof:W,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function $f(){return{controller:new OA,data:new Map,refCount:0}}function ka(i){i.refCount--,i.refCount===0&&qA(FA,function(){i.controller.abort()})}var Oa=null,Wf=0,pr=0,mr=null;function BA(i,s){if(Oa===null){var a=Oa=[];Wf=0,pr=eh(),mr={status:"pending",value:void 0,then:function(u){a.push(u)}}}return Wf++,s.then(Ym,Ym),s}function Ym(){if(--Wf===0&&Oa!==null){mr!==null&&(mr.status="fulfilled");var i=Oa;Oa=null,pr=0,mr=null;for(var s=0;s<i.length;s++)(0,i[s])()}}function GA(i,s){var a=[],u={status:"pending",value:null,reason:null,then:function(g){a.push(g)}};return i.then(function(){u.status="fulfilled",u.value=s;for(var g=0;g<a.length;g++)(0,a[g])(s)},function(g){for(u.status="rejected",u.reason=g,g=0;g<a.length;g++)(0,a[g])(void 0)}),u}var Jm=Q.S;Q.S=function(i,s){Ny=on(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&BA(i,s),Jm!==null&&Jm(i,s)};var Rs=O(null);function Zf(){var i=Rs.current;return i!==null?i:it.pooledCache}function Su(i,s){s===null?ue(Rs,Rs.current):ue(Rs,s.pool)}function Km(){var i=Zf();return i===null?null:{parent:It._currentValue,pool:i}}var gr=Error(o(460)),jf=Error(o(474)),Au=Error(o(542)),Cu={then:function(){}};function Qm(i){return i=i.status,i==="fulfilled"||i==="rejected"}function Xm(i,s,a){switch(a=i[a],a===void 0?i.push(s):a!==s&&(s.then(Qn,Qn),s=a),s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Wm(i),i;default:if(typeof s.status=="string")s.then(Qn,Qn);else{if(i=it,i!==null&&100<i.shellSuspendCounter)throw Error(o(482));i=s,i.status="pending",i.then(function(u){if(s.status==="pending"){var g=s;g.status="fulfilled",g.value=u}},function(u){if(s.status==="pending"){var g=s;g.status="rejected",g.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw i=s.reason,Wm(i),i}throw Ms=s,gr}}function ws(i){try{var s=i._init;return s(i._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Ms=a,gr):a}}var Ms=null;function $m(){if(Ms===null)throw Error(o(459));var i=Ms;return Ms=null,i}function Wm(i){if(i===gr||i===Au)throw Error(o(483))}var yr=null,qa=0;function Iu(i){var s=qa;return qa+=1,yr===null&&(yr=[]),Xm(yr,i,s)}function Fa(i,s){s=s.props.ref,i.ref=s!==void 0?s:null}function Ru(i,s){throw s.$$typeof===S?Error(o(525)):(i=Object.prototype.toString.call(s),Error(o(31,i==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":i)))}function Zm(i){function s(B,k){if(i){var H=B.deletions;H===null?(B.deletions=[k],B.flags|=16):H.push(k)}}function a(B,k){if(!i)return null;for(;k!==null;)s(B,k),k=k.sibling;return null}function u(B){for(var k=new Map;B!==null;)B.key!==null?k.set(B.key,B):k.set(B.index,B),B=B.sibling;return k}function g(B,k){return B=qi(B,k),B.index=0,B.sibling=null,B}function _(B,k,H){return B.index=H,i?(H=B.alternate,H!==null?(H=H.index,H<k?(B.flags|=67108866,k):H):(B.flags|=67108866,k)):(B.flags|=1048576,k)}function A(B){return i&&B.alternate===null&&(B.flags|=67108866),B}function I(B,k,H,Z){return k===null||k.tag!==6?(k=Bf(H,B.mode,Z),k.return=B,k):(k=g(k,H),k.return=B,k)}function x(B,k,H,Z){var ye=H.type;return ye===q?$(B,k,H.props.children,Z,H.key):k!==null&&(k.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===N&&ws(ye)===k.type)?(k=g(k,H.props),Fa(k,H),k.return=B,k):(k=_u(H.type,H.key,H.props,null,B.mode,Z),Fa(k,H),k.return=B,k)}function z(B,k,H,Z){return k===null||k.tag!==4||k.stateNode.containerInfo!==H.containerInfo||k.stateNode.implementation!==H.implementation?(k=Gf(H,B.mode,Z),k.return=B,k):(k=g(k,H.children||[]),k.return=B,k)}function $(B,k,H,Z,ye){return k===null||k.tag!==7?(k=Ss(H,B.mode,Z,ye),k.return=B,k):(k=g(k,H),k.return=B,k)}function ee(B,k,H){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Bf(""+k,B.mode,H),k.return=B,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case R:return H=_u(k.type,k.key,k.props,null,B.mode,H),Fa(H,k),H.return=B,H;case U:return k=Gf(k,B.mode,H),k.return=B,k;case N:return k=ws(k),ee(B,k,H)}if(dt(k)||F(k))return k=Ss(k,B.mode,H,null),k.return=B,k;if(typeof k.then=="function")return ee(B,Iu(k),H);if(k.$$typeof===W)return ee(B,Eu(B,k),H);Ru(B,k)}return null}function Y(B,k,H,Z){var ye=k!==null?k.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return ye!==null?null:I(B,k,""+H,Z);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case R:return H.key===ye?x(B,k,H,Z):null;case U:return H.key===ye?z(B,k,H,Z):null;case N:return H=ws(H),Y(B,k,H,Z)}if(dt(H)||F(H))return ye!==null?null:$(B,k,H,Z,null);if(typeof H.then=="function")return Y(B,k,Iu(H),Z);if(H.$$typeof===W)return Y(B,k,Eu(B,H),Z);Ru(B,H)}return null}function K(B,k,H,Z,ye){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return B=B.get(H)||null,I(k,B,""+Z,ye);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case R:return B=B.get(Z.key===null?H:Z.key)||null,x(k,B,Z,ye);case U:return B=B.get(Z.key===null?H:Z.key)||null,z(k,B,Z,ye);case N:return Z=ws(Z),K(B,k,H,Z,ye)}if(dt(Z)||F(Z))return B=B.get(H)||null,$(k,B,Z,ye,null);if(typeof Z.then=="function")return K(B,k,H,Iu(Z),ye);if(Z.$$typeof===W)return K(B,k,H,Eu(k,Z),ye);Ru(k,Z)}return null}function me(B,k,H,Z){for(var ye=null,He=null,ge=k,De=k=0,Pe=null;ge!==null&&De<H.length;De++){ge.index>De?(Pe=ge,ge=null):Pe=ge.sibling;var ze=Y(B,ge,H[De],Z);if(ze===null){ge===null&&(ge=Pe);break}i&&ge&&ze.alternate===null&&s(B,ge),k=_(ze,k,De),He===null?ye=ze:He.sibling=ze,He=ze,ge=Pe}if(De===H.length)return a(B,ge),Oe&&Fi(B,De),ye;if(ge===null){for(;De<H.length;De++)ge=ee(B,H[De],Z),ge!==null&&(k=_(ge,k,De),He===null?ye=ge:He.sibling=ge,He=ge);return Oe&&Fi(B,De),ye}for(ge=u(ge);De<H.length;De++)Pe=K(ge,B,De,H[De],Z),Pe!==null&&(i&&Pe.alternate!==null&&ge.delete(Pe.key===null?De:Pe.key),k=_(Pe,k,De),He===null?ye=Pe:He.sibling=Pe,He=Pe);return i&&ge.forEach(function(Bo){return s(B,Bo)}),Oe&&Fi(B,De),ye}function Te(B,k,H,Z){if(H==null)throw Error(o(151));for(var ye=null,He=null,ge=k,De=k=0,Pe=null,ze=H.next();ge!==null&&!ze.done;De++,ze=H.next()){ge.index>De?(Pe=ge,ge=null):Pe=ge.sibling;var Bo=Y(B,ge,ze.value,Z);if(Bo===null){ge===null&&(ge=Pe);break}i&&ge&&Bo.alternate===null&&s(B,ge),k=_(Bo,k,De),He===null?ye=Bo:He.sibling=Bo,He=Bo,ge=Pe}if(ze.done)return a(B,ge),Oe&&Fi(B,De),ye;if(ge===null){for(;!ze.done;De++,ze=H.next())ze=ee(B,ze.value,Z),ze!==null&&(k=_(ze,k,De),He===null?ye=ze:He.sibling=ze,He=ze);return Oe&&Fi(B,De),ye}for(ge=u(ge);!ze.done;De++,ze=H.next())ze=K(ge,B,De,ze.value,Z),ze!==null&&(i&&ze.alternate!==null&&ge.delete(ze.key===null?De:ze.key),k=_(ze,k,De),He===null?ye=ze:He.sibling=ze,He=ze);return i&&ge.forEach(function(jC){return s(B,jC)}),Oe&&Fi(B,De),ye}function nt(B,k,H,Z){if(typeof H=="object"&&H!==null&&H.type===q&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case R:e:{for(var ye=H.key;k!==null;){if(k.key===ye){if(ye=H.type,ye===q){if(k.tag===7){a(B,k.sibling),Z=g(k,H.props.children),Z.return=B,B=Z;break e}}else if(k.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===N&&ws(ye)===k.type){a(B,k.sibling),Z=g(k,H.props),Fa(Z,H),Z.return=B,B=Z;break e}a(B,k);break}else s(B,k);k=k.sibling}H.type===q?(Z=Ss(H.props.children,B.mode,Z,H.key),Z.return=B,B=Z):(Z=_u(H.type,H.key,H.props,null,B.mode,Z),Fa(Z,H),Z.return=B,B=Z)}return A(B);case U:e:{for(ye=H.key;k!==null;){if(k.key===ye)if(k.tag===4&&k.stateNode.containerInfo===H.containerInfo&&k.stateNode.implementation===H.implementation){a(B,k.sibling),Z=g(k,H.children||[]),Z.return=B,B=Z;break e}else{a(B,k);break}else s(B,k);k=k.sibling}Z=Gf(H,B.mode,Z),Z.return=B,B=Z}return A(B);case N:return H=ws(H),nt(B,k,H,Z)}if(dt(H))return me(B,k,H,Z);if(F(H)){if(ye=F(H),typeof ye!="function")throw Error(o(150));return H=ye.call(H),Te(B,k,H,Z)}if(typeof H.then=="function")return nt(B,k,Iu(H),Z);if(H.$$typeof===W)return nt(B,k,Eu(B,H),Z);Ru(B,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,k!==null&&k.tag===6?(a(B,k.sibling),Z=g(k,H),Z.return=B,B=Z):(a(B,k),Z=Bf(H,B.mode,Z),Z.return=B,B=Z),A(B)):a(B,k)}return function(B,k,H,Z){try{qa=0;var ye=nt(B,k,H,Z);return yr=null,ye}catch(ge){if(ge===gr||ge===Au)throw ge;var He=En(29,ge,null,B.mode);return He.lanes=Z,He.return=B,He}finally{}}}var Ns=Zm(!0),jm=Zm(!1),Co=!1;function ed(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function td(i,s){i=i.updateQueue,s.updateQueue===i&&(s.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function Io(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function Ro(i,s,a){var u=i.updateQueue;if(u===null)return null;if(u=u.shared,(Ke&2)!==0){var g=u.pending;return g===null?s.next=s:(s.next=g.next,g.next=s),u.pending=s,s=yu(i),Lm(i,null,a),s}return gu(i,u,s,a),yu(i)}function Ba(i,s,a){if(s=s.updateQueue,s!==null&&(s=s.shared,(a&4194048)!==0)){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,pa(i,a)}}function nd(i,s){var a=i.updateQueue,u=i.alternate;if(u!==null&&(u=u.updateQueue,a===u)){var g=null,_=null;if(a=a.firstBaseUpdate,a!==null){do{var A={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};_===null?g=_=A:_=_.next=A,a=a.next}while(a!==null);_===null?g=_=s:_=_.next=s}else g=_=s;a={baseState:u.baseState,firstBaseUpdate:g,lastBaseUpdate:_,shared:u.shared,callbacks:u.callbacks},i.updateQueue=a;return}i=a.lastBaseUpdate,i===null?a.firstBaseUpdate=s:i.next=s,a.lastBaseUpdate=s}var id=!1;function Ga(){if(id){var i=mr;if(i!==null)throw i}}function Ha(i,s,a,u){id=!1;var g=i.updateQueue;Co=!1;var _=g.firstBaseUpdate,A=g.lastBaseUpdate,I=g.shared.pending;if(I!==null){g.shared.pending=null;var x=I,z=x.next;x.next=null,A===null?_=z:A.next=z,A=x;var $=i.alternate;$!==null&&($=$.updateQueue,I=$.lastBaseUpdate,I!==A&&(I===null?$.firstBaseUpdate=z:I.next=z,$.lastBaseUpdate=x))}if(_!==null){var ee=g.baseState;A=0,$=z=x=null,I=_;do{var Y=I.lane&-536870913,K=Y!==I.lane;if(K?(Ve&Y)===Y:(u&Y)===Y){Y!==0&&Y===pr&&(id=!0),$!==null&&($=$.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var me=i,Te=I;Y=s;var nt=a;switch(Te.tag){case 1:if(me=Te.payload,typeof me=="function"){ee=me.call(nt,ee,Y);break e}ee=me;break e;case 3:me.flags=me.flags&-65537|128;case 0:if(me=Te.payload,Y=typeof me=="function"?me.call(nt,ee,Y):me,Y==null)break e;ee=T({},ee,Y);break e;case 2:Co=!0}}Y=I.callback,Y!==null&&(i.flags|=64,K&&(i.flags|=8192),K=g.callbacks,K===null?g.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:I.tag,payload:I.payload,callback:I.callback,next:null},$===null?(z=$=K,x=ee):$=$.next=K,A|=Y;if(I=I.next,I===null){if(I=g.shared.pending,I===null)break;K=I,I=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);$===null&&(x=ee),g.baseState=x,g.firstBaseUpdate=z,g.lastBaseUpdate=$,_===null&&(g.shared.lanes=0),bo|=A,i.lanes=A,i.memoizedState=ee}}function eg(i,s){if(typeof i!="function")throw Error(o(191,i));i.call(s)}function tg(i,s){var a=i.callbacks;if(a!==null)for(i.callbacks=null,i=0;i<a.length;i++)eg(a[i],s)}var _r=O(null),wu=O(0);function ng(i,s){i=Wi,ue(wu,i),ue(_r,s),Wi=i|s.baseLanes}function od(){ue(wu,Wi),ue(_r,_r.current)}function sd(){Wi=wu.current,te(_r),te(wu)}var Sn=O(null),kn=null;function wo(i){var s=i.alternate;ue(yt,yt.current&1),ue(Sn,i),kn===null&&(s===null||_r.current!==null||s.memoizedState!==null)&&(kn=i)}function rd(i){ue(yt,yt.current),ue(Sn,i),kn===null&&(kn=i)}function ig(i){i.tag===22?(ue(yt,yt.current),ue(Sn,i),kn===null&&(kn=i)):Mo()}function Mo(){ue(yt,yt.current),ue(Sn,Sn.current)}function An(i){te(Sn),kn===i&&(kn=null),te(yt)}var yt=O(0);function Mu(i){for(var s=i;s!==null;){if(s.tag===13){var a=s.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||dh(a)||hh(a)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Hi=0,Me=null,et=null,Rt=null,Nu=!1,vr=!1,Ds=!1,Du=0,za=0,Tr=null,HA=0;function ht(){throw Error(o(321))}function ad(i,s){if(s===null)return!1;for(var a=0;a<s.length&&a<i.length;a++)if(!Tn(i[a],s[a]))return!1;return!0}function ld(i,s,a,u,g,_){return Hi=_,Me=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=i===null||i.memoizedState===null?Fg:Ad,Ds=!1,_=a(u,g),Ds=!1,vr&&(_=sg(s,a,u,g)),og(i),_}function og(i){Q.H=Ka;var s=et!==null&&et.next!==null;if(Hi=0,Rt=et=Me=null,Nu=!1,za=0,Tr=null,s)throw Error(o(300));i===null||wt||(i=i.dependencies,i!==null&&Tu(i)&&(wt=!0))}function sg(i,s,a,u){Me=i;var g=0;do{if(vr&&(Tr=null),za=0,vr=!1,25<=g)throw Error(o(301));if(g+=1,Rt=et=null,i.updateQueue!=null){var _=i.updateQueue;_.lastEffect=null,_.events=null,_.stores=null,_.memoCache!=null&&(_.memoCache.index=0)}Q.H=Bg,_=s(a,u)}while(vr);return _}function zA(){var i=Q.H,s=i.useState()[0];return s=typeof s.then=="function"?Ya(s):s,i=i.useState()[0],(et!==null?et.memoizedState:null)!==i&&(Me.flags|=1024),s}function ud(){var i=Du!==0;return Du=0,i}function cd(i,s,a){s.updateQueue=i.updateQueue,s.flags&=-2053,i.lanes&=~a}function fd(i){if(Nu){for(i=i.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Nu=!1}Hi=0,Rt=et=Me=null,vr=!1,za=Du=0,Tr=null}function rn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?Me.memoizedState=Rt=i:Rt=Rt.next=i,Rt}function _t(){if(et===null){var i=Me.alternate;i=i!==null?i.memoizedState:null}else i=et.next;var s=Rt===null?Me.memoizedState:Rt.next;if(s!==null)Rt=s,et=i;else{if(i===null)throw Me.alternate===null?Error(o(467)):Error(o(310));et=i,i={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},Rt===null?Me.memoizedState=Rt=i:Rt=Rt.next=i}return Rt}function bu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ya(i){var s=za;return za+=1,Tr===null&&(Tr=[]),i=Xm(Tr,i,s),s=Me,(Rt===null?s.memoizedState:Rt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?Fg:Ad),i}function xu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return Ya(i);if(i.$$typeof===W)return Jt(i)}throw Error(o(438,String(i)))}function dd(i){var s=null,a=Me.updateQueue;if(a!==null&&(s=a.memoCache),s==null){var u=Me.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(g){return g.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),a===null&&(a=bu(),Me.updateQueue=a),a.memoCache=s,a=s.data[s.index],a===void 0)for(a=s.data[s.index]=Array(i),u=0;u<i;u++)a[u]=P;return s.index++,a}function zi(i,s){return typeof s=="function"?s(i):s}function Vu(i){var s=_t();return hd(s,et,i)}function hd(i,s,a){var u=i.queue;if(u===null)throw Error(o(311));u.lastRenderedReducer=a;var g=i.baseQueue,_=u.pending;if(_!==null){if(g!==null){var A=g.next;g.next=_.next,_.next=A}s.baseQueue=g=_,u.pending=null}if(_=i.baseState,g===null)i.memoizedState=_;else{s=g.next;var I=A=null,x=null,z=s,$=!1;do{var ee=z.lane&-536870913;if(ee!==z.lane?(Ve&ee)===ee:(Hi&ee)===ee){var Y=z.revertLane;if(Y===0)x!==null&&(x=x.next={lane:0,revertLane:0,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),ee===pr&&($=!0);else if((Hi&Y)===Y){z=z.next,Y===pr&&($=!0);continue}else ee={lane:0,revertLane:z.revertLane,gesture:null,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(I=x=ee,A=_):x=x.next=ee,Me.lanes|=Y,bo|=Y;ee=z.action,Ds&&a(_,ee),_=z.hasEagerState?z.eagerState:a(_,ee)}else Y={lane:ee,revertLane:z.revertLane,gesture:z.gesture,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null},x===null?(I=x=Y,A=_):x=x.next=Y,Me.lanes|=ee,bo|=ee;z=z.next}while(z!==null&&z!==s);if(x===null?A=_:x.next=I,!Tn(_,i.memoizedState)&&(wt=!0,$&&(a=mr,a!==null)))throw a;i.memoizedState=_,i.baseState=A,i.baseQueue=x,u.lastRenderedState=_}return g===null&&(u.lanes=0),[i.memoizedState,u.dispatch]}function pd(i){var s=_t(),a=s.queue;if(a===null)throw Error(o(311));a.lastRenderedReducer=i;var u=a.dispatch,g=a.pending,_=s.memoizedState;if(g!==null){a.pending=null;var A=g=g.next;do _=i(_,A.action),A=A.next;while(A!==g);Tn(_,s.memoizedState)||(wt=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),a.lastRenderedState=_}return[_,u]}function rg(i,s,a){var u=Me,g=_t(),_=Oe;if(_){if(a===void 0)throw Error(o(407));a=a()}else a=s();var A=!Tn((et||g).memoizedState,a);if(A&&(g.memoizedState=a,wt=!0),g=g.queue,yd(ug.bind(null,u,g,i),[i]),g.getSnapshot!==s||A||Rt!==null&&Rt.memoizedState.tag&1){if(u.flags|=2048,Er(9,{destroy:void 0},lg.bind(null,u,g,a,s),null),it===null)throw Error(o(349));_||(Hi&127)!==0||ag(u,s,a)}return a}function ag(i,s,a){i.flags|=16384,i={getSnapshot:s,value:a},s=Me.updateQueue,s===null?(s=bu(),Me.updateQueue=s,s.stores=[i]):(a=s.stores,a===null?s.stores=[i]:a.push(i))}function lg(i,s,a,u){s.value=a,s.getSnapshot=u,cg(s)&&fg(i)}function ug(i,s,a){return a(function(){cg(s)&&fg(i)})}function cg(i){var s=i.getSnapshot;i=i.value;try{var a=s();return!Tn(i,a)}catch{return!0}}function fg(i){var s=Es(i,2);s!==null&&mn(s,i,2)}function md(i){var s=rn();if(typeof i=="function"){var a=i;if(i=a(),Ds){wn(!0);try{a()}finally{wn(!1)}}}return s.memoizedState=s.baseState=i,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:i},s}function dg(i,s,a,u){return i.baseState=a,hd(i,et,typeof u=="function"?u:zi)}function YA(i,s,a,u,g){if(Lu(i))throw Error(o(485));if(i=s.action,i!==null){var _={payload:g,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(A){_.listeners.push(A)}};Q.T!==null?a(!0):_.isTransition=!1,u(_),a=s.pending,a===null?(_.next=s.pending=_,hg(s,_)):(_.next=a.next,s.pending=a.next=_)}}function hg(i,s){var a=s.action,u=s.payload,g=i.state;if(s.isTransition){var _=Q.T,A={};Q.T=A;try{var I=a(g,u),x=Q.S;x!==null&&x(A,I),pg(i,s,I)}catch(z){gd(i,s,z)}finally{_!==null&&A.types!==null&&(_.types=A.types),Q.T=_}}else try{_=a(g,u),pg(i,s,_)}catch(z){gd(i,s,z)}}function pg(i,s,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(u){mg(i,s,u)},function(u){return gd(i,s,u)}):mg(i,s,a)}function mg(i,s,a){s.status="fulfilled",s.value=a,gg(s),i.state=a,s=i.pending,s!==null&&(a=s.next,a===s?i.pending=null:(a=a.next,s.next=a,hg(i,a)))}function gd(i,s,a){var u=i.pending;if(i.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=a,gg(s),s=s.next;while(s!==u)}i.action=null}function gg(i){i=i.listeners;for(var s=0;s<i.length;s++)(0,i[s])()}function yg(i,s){return s}function _g(i,s){if(Oe){var a=it.formState;if(a!==null){e:{var u=Me;if(Oe){if(st){t:{for(var g=st,_=Ln;g.nodeType!==8;){if(!_){g=null;break t}if(g=On(g.nextSibling),g===null){g=null;break t}}_=g.data,g=_==="F!"||_==="F"?g:null}if(g){st=On(g.nextSibling),u=g.data==="F!";break e}}So(u)}u=!1}u&&(s=a[0])}}return a=rn(),a.memoizedState=a.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:s},a.queue=u,a=kg.bind(null,Me,u),u.dispatch=a,u=md(!1),_=Sd.bind(null,Me,!1,u.queue),u=rn(),g={state:s,dispatch:null,action:i,pending:null},u.queue=g,a=YA.bind(null,Me,g,_,a),g.dispatch=a,u.memoizedState=i,[s,a,!1]}function vg(i){var s=_t();return Tg(s,et,i)}function Tg(i,s,a){if(s=hd(i,s,yg)[0],i=Vu(zi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Ya(s)}catch(A){throw A===gr?Au:A}else u=s;s=_t();var g=s.queue,_=g.dispatch;return a!==s.memoizedState&&(Me.flags|=2048,Er(9,{destroy:void 0},JA.bind(null,g,a),null)),[u,_,i]}function JA(i,s){i.action=s}function Eg(i){var s=_t(),a=et;if(a!==null)return Tg(s,a,i);_t(),s=s.memoizedState,a=_t();var u=a.queue.dispatch;return a.memoizedState=i,[s,u,!1]}function Er(i,s,a,u){return i={tag:i,create:a,deps:u,inst:s,next:null},s=Me.updateQueue,s===null&&(s=bu(),Me.updateQueue=s),a=s.lastEffect,a===null?s.lastEffect=i.next=i:(u=a.next,a.next=i,i.next=u,s.lastEffect=i),i}function Sg(){return _t().memoizedState}function Pu(i,s,a,u){var g=rn();Me.flags|=i,g.memoizedState=Er(1|s,{destroy:void 0},a,u===void 0?null:u)}function Uu(i,s,a,u){var g=_t();u=u===void 0?null:u;var _=g.memoizedState.inst;et!==null&&u!==null&&ad(u,et.memoizedState.deps)?g.memoizedState=Er(s,_,a,u):(Me.flags|=i,g.memoizedState=Er(1|s,_,a,u))}function Ag(i,s){Pu(8390656,8,i,s)}function yd(i,s){Uu(2048,8,i,s)}function KA(i){Me.flags|=4;var s=Me.updateQueue;if(s===null)s=bu(),Me.updateQueue=s,s.events=[i];else{var a=s.events;a===null?s.events=[i]:a.push(i)}}function Cg(i){var s=_t().memoizedState;return KA({ref:s,nextImpl:i}),function(){if((Ke&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}function Ig(i,s){return Uu(4,2,i,s)}function Rg(i,s){return Uu(4,4,i,s)}function wg(i,s){if(typeof s=="function"){i=i();var a=s(i);return function(){typeof a=="function"?a():s(null)}}if(s!=null)return i=i(),s.current=i,function(){s.current=null}}function Mg(i,s,a){a=a!=null?a.concat([i]):null,Uu(4,4,wg.bind(null,s,i),a)}function _d(){}function Ng(i,s){var a=_t();s=s===void 0?null:s;var u=a.memoizedState;return s!==null&&ad(s,u[1])?u[0]:(a.memoizedState=[i,s],i)}function Dg(i,s){var a=_t();s=s===void 0?null:s;var u=a.memoizedState;if(s!==null&&ad(s,u[1]))return u[0];if(u=i(),Ds){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[u,s],u}function vd(i,s,a){return a===void 0||(Hi&1073741824)!==0&&(Ve&261930)===0?i.memoizedState=s:(i.memoizedState=a,i=by(),Me.lanes|=i,bo|=i,a)}function bg(i,s,a,u){return Tn(a,s)?a:_r.current!==null?(i=vd(i,a,u),Tn(i,s)||(wt=!0),i):(Hi&42)===0||(Hi&1073741824)!==0&&(Ve&261930)===0?(wt=!0,i.memoizedState=a):(i=by(),Me.lanes|=i,bo|=i,s)}function xg(i,s,a,u,g){var _=ae.p;ae.p=_!==0&&8>_?_:8;var A=Q.T,I={};Q.T=I,Sd(i,!1,s,a);try{var x=g(),z=Q.S;if(z!==null&&z(I,x),x!==null&&typeof x=="object"&&typeof x.then=="function"){var $=GA(x,u);Ja(i,s,$,Rn(i))}else Ja(i,s,u,Rn(i))}catch(ee){Ja(i,s,{then:function(){},status:"rejected",reason:ee},Rn())}finally{ae.p=_,A!==null&&I.types!==null&&(A.types=I.types),Q.T=A}}function QA(){}function Td(i,s,a,u){if(i.tag!==5)throw Error(o(476));var g=Vg(i).queue;xg(i,g,s,ve,a===null?QA:function(){return Pg(i),a(u)})}function Vg(i){var s=i.memoizedState;if(s!==null)return s;s={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:ve},next:null};var a={};return s.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:zi,lastRenderedState:a},next:null},i.memoizedState=s,i=i.alternate,i!==null&&(i.memoizedState=s),s}function Pg(i){var s=Vg(i);s.next===null&&(s=i.alternate.memoizedState),Ja(i,s.next.queue,{},Rn())}function Ed(){return Jt(ul)}function Ug(){return _t().memoizedState}function Lg(){return _t().memoizedState}function XA(i){for(var s=i.return;s!==null;){switch(s.tag){case 24:case 3:var a=Rn();i=Io(a);var u=Ro(s,i,a);u!==null&&(mn(u,s,a),Ba(u,s,a)),s={cache:$f()},i.payload=s;return}s=s.return}}function $A(i,s,a){var u=Rn();a={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Lu(i)?Og(s,a):(a=qf(i,s,a,u),a!==null&&(mn(a,i,u),qg(a,s,u)))}function kg(i,s,a){var u=Rn();Ja(i,s,a,u)}function Ja(i,s,a,u){var g={lane:u,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Lu(i))Og(s,g);else{var _=i.alternate;if(i.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var A=s.lastRenderedState,I=_(A,a);if(g.hasEagerState=!0,g.eagerState=I,Tn(I,A))return gu(i,s,g,0),it===null&&mu(),!1}catch{}finally{}if(a=qf(i,s,g,u),a!==null)return mn(a,i,u),qg(a,s,u),!0}return!1}function Sd(i,s,a,u){if(u={lane:2,revertLane:eh(),gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Lu(i)){if(s)throw Error(o(479))}else s=qf(i,a,u,2),s!==null&&mn(s,i,2)}function Lu(i){var s=i.alternate;return i===Me||s!==null&&s===Me}function Og(i,s){vr=Nu=!0;var a=i.pending;a===null?s.next=s:(s.next=a.next,a.next=s),i.pending=s}function qg(i,s,a){if((a&4194048)!==0){var u=s.lanes;u&=i.pendingLanes,a|=u,s.lanes=a,pa(i,a)}}var Ka={readContext:Jt,use:xu,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useLayoutEffect:ht,useInsertionEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useSyncExternalStore:ht,useId:ht,useHostTransitionStatus:ht,useFormState:ht,useActionState:ht,useOptimistic:ht,useMemoCache:ht,useCacheRefresh:ht};Ka.useEffectEvent=ht;var Fg={readContext:Jt,use:xu,useCallback:function(i,s){return rn().memoizedState=[i,s===void 0?null:s],i},useContext:Jt,useEffect:Ag,useImperativeHandle:function(i,s,a){a=a!=null?a.concat([i]):null,Pu(4194308,4,wg.bind(null,s,i),a)},useLayoutEffect:function(i,s){return Pu(4194308,4,i,s)},useInsertionEffect:function(i,s){Pu(4,2,i,s)},useMemo:function(i,s){var a=rn();s=s===void 0?null:s;var u=i();if(Ds){wn(!0);try{i()}finally{wn(!1)}}return a.memoizedState=[u,s],u},useReducer:function(i,s,a){var u=rn();if(a!==void 0){var g=a(s);if(Ds){wn(!0);try{a(s)}finally{wn(!1)}}}else g=s;return u.memoizedState=u.baseState=g,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:g},u.queue=i,i=i.dispatch=$A.bind(null,Me,i),[u.memoizedState,i]},useRef:function(i){var s=rn();return i={current:i},s.memoizedState=i},useState:function(i){i=md(i);var s=i.queue,a=kg.bind(null,Me,s);return s.dispatch=a,[i.memoizedState,a]},useDebugValue:_d,useDeferredValue:function(i,s){var a=rn();return vd(a,i,s)},useTransition:function(){var i=md(!1);return i=xg.bind(null,Me,i.queue,!0,!1),rn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,s,a){var u=Me,g=rn();if(Oe){if(a===void 0)throw Error(o(407));a=a()}else{if(a=s(),it===null)throw Error(o(349));(Ve&127)!==0||ag(u,s,a)}g.memoizedState=a;var _={value:a,getSnapshot:s};return g.queue=_,Ag(ug.bind(null,u,_,i),[i]),u.flags|=2048,Er(9,{destroy:void 0},lg.bind(null,u,_,a,s),null),a},useId:function(){var i=rn(),s=it.identifierPrefix;if(Oe){var a=Ri,u=Ii;a=(u&~(1<<32-mt(u)-1)).toString(32)+a,s="_"+s+"R_"+a,a=Du++,0<a&&(s+="H"+a.toString(32)),s+="_"}else a=HA++,s="_"+s+"r_"+a.toString(32)+"_";return i.memoizedState=s},useHostTransitionStatus:Ed,useFormState:_g,useActionState:_g,useOptimistic:function(i){var s=rn();s.memoizedState=s.baseState=i;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=a,s=Sd.bind(null,Me,!0,a),a.dispatch=s,[i,s]},useMemoCache:dd,useCacheRefresh:function(){return rn().memoizedState=XA.bind(null,Me)},useEffectEvent:function(i){var s=rn(),a={impl:i};return s.memoizedState=a,function(){if((Ke&2)!==0)throw Error(o(440));return a.impl.apply(void 0,arguments)}}},Ad={readContext:Jt,use:xu,useCallback:Ng,useContext:Jt,useEffect:yd,useImperativeHandle:Mg,useInsertionEffect:Ig,useLayoutEffect:Rg,useMemo:Dg,useReducer:Vu,useRef:Sg,useState:function(){return Vu(zi)},useDebugValue:_d,useDeferredValue:function(i,s){var a=_t();return bg(a,et.memoizedState,i,s)},useTransition:function(){var i=Vu(zi)[0],s=_t().memoizedState;return[typeof i=="boolean"?i:Ya(i),s]},useSyncExternalStore:rg,useId:Ug,useHostTransitionStatus:Ed,useFormState:vg,useActionState:vg,useOptimistic:function(i,s){var a=_t();return dg(a,et,i,s)},useMemoCache:dd,useCacheRefresh:Lg};Ad.useEffectEvent=Cg;var Bg={readContext:Jt,use:xu,useCallback:Ng,useContext:Jt,useEffect:yd,useImperativeHandle:Mg,useInsertionEffect:Ig,useLayoutEffect:Rg,useMemo:Dg,useReducer:pd,useRef:Sg,useState:function(){return pd(zi)},useDebugValue:_d,useDeferredValue:function(i,s){var a=_t();return et===null?vd(a,i,s):bg(a,et.memoizedState,i,s)},useTransition:function(){var i=pd(zi)[0],s=_t().memoizedState;return[typeof i=="boolean"?i:Ya(i),s]},useSyncExternalStore:rg,useId:Ug,useHostTransitionStatus:Ed,useFormState:Eg,useActionState:Eg,useOptimistic:function(i,s){var a=_t();return et!==null?dg(a,et,i,s):(a.baseState=i,[i,a.queue.dispatch])},useMemoCache:dd,useCacheRefresh:Lg};Bg.useEffectEvent=Cg;function Cd(i,s,a,u){s=i.memoizedState,a=a(u,s),a=a==null?s:T({},s,a),i.memoizedState=a,i.lanes===0&&(i.updateQueue.baseState=a)}var Id={enqueueSetState:function(i,s,a){i=i._reactInternals;var u=Rn(),g=Io(u);g.payload=s,a!=null&&(g.callback=a),s=Ro(i,g,u),s!==null&&(mn(s,i,u),Ba(s,i,u))},enqueueReplaceState:function(i,s,a){i=i._reactInternals;var u=Rn(),g=Io(u);g.tag=1,g.payload=s,a!=null&&(g.callback=a),s=Ro(i,g,u),s!==null&&(mn(s,i,u),Ba(s,i,u))},enqueueForceUpdate:function(i,s){i=i._reactInternals;var a=Rn(),u=Io(a);u.tag=2,s!=null&&(u.callback=s),s=Ro(i,u,a),s!==null&&(mn(s,i,a),Ba(s,i,a))}};function Gg(i,s,a,u,g,_,A){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(u,_,A):s.prototype&&s.prototype.isPureReactComponent?!Va(a,u)||!Va(g,_):!0}function Hg(i,s,a,u){i=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(a,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(a,u),s.state!==i&&Id.enqueueReplaceState(s,s.state,null)}function bs(i,s){var a=s;if("ref"in s){a={};for(var u in s)u!=="ref"&&(a[u]=s[u])}if(i=i.defaultProps){a===s&&(a=T({},a));for(var g in i)a[g]===void 0&&(a[g]=i[g])}return a}function zg(i){pu(i)}function Yg(i){console.error(i)}function Jg(i){pu(i)}function ku(i,s){try{var a=i.onUncaughtError;a(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Kg(i,s,a){try{var u=i.onCaughtError;u(a.value,{componentStack:a.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(g){setTimeout(function(){throw g})}}function Rd(i,s,a){return a=Io(a),a.tag=3,a.payload={element:null},a.callback=function(){ku(i,s)},a}function Qg(i){return i=Io(i),i.tag=3,i}function Xg(i,s,a,u){var g=a.type.getDerivedStateFromError;if(typeof g=="function"){var _=u.value;i.payload=function(){return g(_)},i.callback=function(){Kg(s,a,u)}}var A=a.stateNode;A!==null&&typeof A.componentDidCatch=="function"&&(i.callback=function(){Kg(s,a,u),typeof g!="function"&&(xo===null?xo=new Set([this]):xo.add(this));var I=u.stack;this.componentDidCatch(u.value,{componentStack:I!==null?I:""})})}function WA(i,s,a,u,g){if(a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=a.alternate,s!==null&&hr(s,a,g,!0),a=Sn.current,a!==null){switch(a.tag){case 31:case 13:return kn===null?Xu():a.alternate===null&&pt===0&&(pt=3),a.flags&=-257,a.flags|=65536,a.lanes=g,u===Cu?a.flags|=16384:(s=a.updateQueue,s===null?a.updateQueue=new Set([u]):s.add(u),Wd(i,u,g)),!1;case 22:return a.flags|=65536,u===Cu?a.flags|=16384:(s=a.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},a.updateQueue=s):(a=s.retryQueue,a===null?s.retryQueue=new Set([u]):a.add(u)),Wd(i,u,g)),!1}throw Error(o(435,a.tag))}return Wd(i,u,g),Xu(),!1}if(Oe)return s=Sn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=g,u!==Yf&&(i=Error(o(422),{cause:u}),La(Vn(i,a)))):(u!==Yf&&(s=Error(o(423),{cause:u}),La(Vn(s,a))),i=i.current.alternate,i.flags|=65536,g&=-g,i.lanes|=g,u=Vn(u,a),g=Rd(i.stateNode,u,g),nd(i,g),pt!==4&&(pt=2)),!1;var _=Error(o(520),{cause:u});if(_=Vn(_,a),tl===null?tl=[_]:tl.push(_),pt!==4&&(pt=2),s===null)return!0;u=Vn(u,a),a=s;do{switch(a.tag){case 3:return a.flags|=65536,i=g&-g,a.lanes|=i,i=Rd(a.stateNode,u,i),nd(a,i),!1;case 1:if(s=a.type,_=a.stateNode,(a.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(xo===null||!xo.has(_))))return a.flags|=65536,g&=-g,a.lanes|=g,g=Qg(g),Xg(g,i,a,u),nd(a,g),!1}a=a.return}while(a!==null);return!1}var wd=Error(o(461)),wt=!1;function Kt(i,s,a,u){s.child=i===null?jm(s,null,a,u):Ns(s,i.child,a,u)}function $g(i,s,a,u,g){a=a.render;var _=s.ref;if("ref"in u){var A={};for(var I in u)I!=="ref"&&(A[I]=u[I])}else A=u;return Is(s),u=ld(i,s,a,A,_,g),I=ud(),i!==null&&!wt?(cd(i,s,g),Yi(i,s,g)):(Oe&&I&&Hf(s),s.flags|=1,Kt(i,s,u,g),s.child)}function Wg(i,s,a,u,g){if(i===null){var _=a.type;return typeof _=="function"&&!Ff(_)&&_.defaultProps===void 0&&a.compare===null?(s.tag=15,s.type=_,Zg(i,s,_,u,g)):(i=_u(a.type,null,u,s,s.mode,g),i.ref=s.ref,i.return=s,s.child=i)}if(_=i.child,!Ud(i,g)){var A=_.memoizedProps;if(a=a.compare,a=a!==null?a:Va,a(A,u)&&i.ref===s.ref)return Yi(i,s,g)}return s.flags|=1,i=qi(_,u),i.ref=s.ref,i.return=s,s.child=i}function Zg(i,s,a,u,g){if(i!==null){var _=i.memoizedProps;if(Va(_,u)&&i.ref===s.ref)if(wt=!1,s.pendingProps=u=_,Ud(i,g))(i.flags&131072)!==0&&(wt=!0);else return s.lanes=i.lanes,Yi(i,s,g)}return Md(i,s,a,u,g)}function jg(i,s,a,u){var g=u.children,_=i!==null?i.memoizedState:null;if(i===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.mode==="hidden"){if((s.flags&128)!==0){if(_=_!==null?_.baseLanes|a:a,i!==null){for(u=s.child=i.child,g=0;u!==null;)g=g|u.lanes|u.childLanes,u=u.sibling;u=g&~_}else u=0,s.child=null;return ey(i,s,_,a,u)}if((a&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},i!==null&&Su(s,_!==null?_.cachePool:null),_!==null?ng(s,_):od(),ig(s);else return u=s.lanes=536870912,ey(i,s,_!==null?_.baseLanes|a:a,a,u)}else _!==null?(Su(s,_.cachePool),ng(s,_),Mo(),s.memoizedState=null):(i!==null&&Su(s,null),od(),Mo());return Kt(i,s,g,a),s.child}function Qa(i,s){return i!==null&&i.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ey(i,s,a,u,g){var _=Zf();return _=_===null?null:{parent:It._currentValue,pool:_},s.memoizedState={baseLanes:a,cachePool:_},i!==null&&Su(s,null),od(),ig(s),i!==null&&hr(i,s,u,!0),s.childLanes=g,null}function Ou(i,s){return s=Fu({mode:s.mode,children:s.children},i.mode),s.ref=i.ref,i.child=s,s.return=i,s}function ty(i,s,a){return Ns(s,i.child,null,a),i=Ou(s,s.pendingProps),i.flags|=2,An(s),s.memoizedState=null,i}function ZA(i,s,a){var u=s.pendingProps,g=(s.flags&128)!==0;if(s.flags&=-129,i===null){if(Oe){if(u.mode==="hidden")return i=Ou(s,u),s.lanes=536870912,Qa(null,i);if(rd(s),(i=st)?(i=h_(i,Ln),i=i!==null&&i.data==="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:To!==null?{id:Ii,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=Om(i),a.return=s,s.child=a,Yt=s,st=null)):i=null,i===null)throw So(s);return s.lanes=536870912,null}return Ou(s,u)}var _=i.memoizedState;if(_!==null){var A=_.dehydrated;if(rd(s),g)if(s.flags&256)s.flags&=-257,s=ty(i,s,a);else if(s.memoizedState!==null)s.child=i.child,s.flags|=128,s=null;else throw Error(o(558));else if(wt||hr(i,s,a,!1),g=(a&i.childLanes)!==0,wt||g){if(u=it,u!==null&&(A=ma(u,a),A!==0&&A!==_.retryLane))throw _.retryLane=A,Es(i,A),mn(u,i,A),wd;Xu(),s=ty(i,s,a)}else i=_.treeContext,st=On(A.nextSibling),Yt=s,Oe=!0,Eo=null,Ln=!1,i!==null&&Bm(s,i),s=Ou(s,u),s.flags|=4096;return s}return i=qi(i.child,{mode:u.mode,children:u.children}),i.ref=s.ref,s.child=i,i.return=s,i}function qu(i,s){var a=s.ref;if(a===null)i!==null&&i.ref!==null&&(s.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(o(284));(i===null||i.ref!==a)&&(s.flags|=4194816)}}function Md(i,s,a,u,g){return Is(s),a=ld(i,s,a,u,void 0,g),u=ud(),i!==null&&!wt?(cd(i,s,g),Yi(i,s,g)):(Oe&&u&&Hf(s),s.flags|=1,Kt(i,s,a,g),s.child)}function ny(i,s,a,u,g,_){return Is(s),s.updateQueue=null,a=sg(s,u,a,g),og(i),u=ud(),i!==null&&!wt?(cd(i,s,_),Yi(i,s,_)):(Oe&&u&&Hf(s),s.flags|=1,Kt(i,s,a,_),s.child)}function iy(i,s,a,u,g){if(Is(s),s.stateNode===null){var _=ur,A=a.contextType;typeof A=="object"&&A!==null&&(_=Jt(A)),_=new a(u,_),s.memoizedState=_.state!==null&&_.state!==void 0?_.state:null,_.updater=Id,s.stateNode=_,_._reactInternals=s,_=s.stateNode,_.props=u,_.state=s.memoizedState,_.refs={},ed(s),A=a.contextType,_.context=typeof A=="object"&&A!==null?Jt(A):ur,_.state=s.memoizedState,A=a.getDerivedStateFromProps,typeof A=="function"&&(Cd(s,a,A,u),_.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof _.getSnapshotBeforeUpdate=="function"||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(A=_.state,typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount(),A!==_.state&&Id.enqueueReplaceState(_,_.state,null),Ha(s,u,_,g),Ga(),_.state=s.memoizedState),typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(i===null){_=s.stateNode;var I=s.memoizedProps,x=bs(a,I);_.props=x;var z=_.context,$=a.contextType;A=ur,typeof $=="object"&&$!==null&&(A=Jt($));var ee=a.getDerivedStateFromProps;$=typeof ee=="function"||typeof _.getSnapshotBeforeUpdate=="function",I=s.pendingProps!==I,$||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(I||z!==A)&&Hg(s,_,u,A),Co=!1;var Y=s.memoizedState;_.state=Y,Ha(s,u,_,g),Ga(),z=s.memoizedState,I||Y!==z||Co?(typeof ee=="function"&&(Cd(s,a,ee,u),z=s.memoizedState),(x=Co||Gg(s,a,x,u,Y,z,A))?($||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(s.flags|=4194308)):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=z),_.props=u,_.state=z,_.context=A,u=x):(typeof _.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{_=s.stateNode,td(i,s),A=s.memoizedProps,$=bs(a,A),_.props=$,ee=s.pendingProps,Y=_.context,z=a.contextType,x=ur,typeof z=="object"&&z!==null&&(x=Jt(z)),I=a.getDerivedStateFromProps,(z=typeof I=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(A!==ee||Y!==x)&&Hg(s,_,u,x),Co=!1,Y=s.memoizedState,_.state=Y,Ha(s,u,_,g),Ga();var K=s.memoizedState;A!==ee||Y!==K||Co||i!==null&&i.dependencies!==null&&Tu(i.dependencies)?(typeof I=="function"&&(Cd(s,a,I,u),K=s.memoizedState),($=Co||Gg(s,a,$,u,Y,K,x)||i!==null&&i.dependencies!==null&&Tu(i.dependencies))?(z||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,K,x),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,K,x)),typeof _.componentDidUpdate=="function"&&(s.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=K),_.props=u,_.state=K,_.context=x,u=$):(typeof _.componentDidUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||A===i.memoizedProps&&Y===i.memoizedState||(s.flags|=1024),u=!1)}return _=u,qu(i,s),u=(s.flags&128)!==0,_||u?(_=s.stateNode,a=u&&typeof a.getDerivedStateFromError!="function"?null:_.render(),s.flags|=1,i!==null&&u?(s.child=Ns(s,i.child,null,g),s.child=Ns(s,null,a,g)):Kt(i,s,a,g),s.memoizedState=_.state,i=s.child):i=Yi(i,s,g),i}function oy(i,s,a,u){return As(),s.flags|=256,Kt(i,s,a,u),s.child}var Nd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dd(i){return{baseLanes:i,cachePool:Km()}}function bd(i,s,a){return i=i!==null?i.childLanes&~a:0,s&&(i|=In),i}function sy(i,s,a){var u=s.pendingProps,g=!1,_=(s.flags&128)!==0,A;if((A=_)||(A=i!==null&&i.memoizedState===null?!1:(yt.current&2)!==0),A&&(g=!0,s.flags&=-129),A=(s.flags&32)!==0,s.flags&=-33,i===null){if(Oe){if(g?wo(s):Mo(),(i=st)?(i=h_(i,Ln),i=i!==null&&i.data!=="&"?i:null,i!==null&&(s.memoizedState={dehydrated:i,treeContext:To!==null?{id:Ii,overflow:Ri}:null,retryLane:536870912,hydrationErrors:null},a=Om(i),a.return=s,s.child=a,Yt=s,st=null)):i=null,i===null)throw So(s);return hh(i)?s.lanes=32:s.lanes=536870912,null}var I=u.children;return u=u.fallback,g?(Mo(),g=s.mode,I=Fu({mode:"hidden",children:I},g),u=Ss(u,g,a,null),I.return=s,u.return=s,I.sibling=u,s.child=I,u=s.child,u.memoizedState=Dd(a),u.childLanes=bd(i,A,a),s.memoizedState=Nd,Qa(null,u)):(wo(s),xd(s,I))}var x=i.memoizedState;if(x!==null&&(I=x.dehydrated,I!==null)){if(_)s.flags&256?(wo(s),s.flags&=-257,s=Vd(i,s,a)):s.memoizedState!==null?(Mo(),s.child=i.child,s.flags|=128,s=null):(Mo(),I=u.fallback,g=s.mode,u=Fu({mode:"visible",children:u.children},g),I=Ss(I,g,a,null),I.flags|=2,u.return=s,I.return=s,u.sibling=I,s.child=u,Ns(s,i.child,null,a),u=s.child,u.memoizedState=Dd(a),u.childLanes=bd(i,A,a),s.memoizedState=Nd,s=Qa(null,u));else if(wo(s),hh(I)){if(A=I.nextSibling&&I.nextSibling.dataset,A)var z=A.dgst;A=z,u=Error(o(419)),u.stack="",u.digest=A,La({value:u,source:null,stack:null}),s=Vd(i,s,a)}else if(wt||hr(i,s,a,!1),A=(a&i.childLanes)!==0,wt||A){if(A=it,A!==null&&(u=ma(A,a),u!==0&&u!==x.retryLane))throw x.retryLane=u,Es(i,u),mn(A,i,u),wd;dh(I)||Xu(),s=Vd(i,s,a)}else dh(I)?(s.flags|=192,s.child=i.child,s=null):(i=x.treeContext,st=On(I.nextSibling),Yt=s,Oe=!0,Eo=null,Ln=!1,i!==null&&Bm(s,i),s=xd(s,u.children),s.flags|=4096);return s}return g?(Mo(),I=u.fallback,g=s.mode,x=i.child,z=x.sibling,u=qi(x,{mode:"hidden",children:u.children}),u.subtreeFlags=x.subtreeFlags&65011712,z!==null?I=qi(z,I):(I=Ss(I,g,a,null),I.flags|=2),I.return=s,u.return=s,u.sibling=I,s.child=u,Qa(null,u),u=s.child,I=i.child.memoizedState,I===null?I=Dd(a):(g=I.cachePool,g!==null?(x=It._currentValue,g=g.parent!==x?{parent:x,pool:x}:g):g=Km(),I={baseLanes:I.baseLanes|a,cachePool:g}),u.memoizedState=I,u.childLanes=bd(i,A,a),s.memoizedState=Nd,Qa(i.child,u)):(wo(s),a=i.child,i=a.sibling,a=qi(a,{mode:"visible",children:u.children}),a.return=s,a.sibling=null,i!==null&&(A=s.deletions,A===null?(s.deletions=[i],s.flags|=16):A.push(i)),s.child=a,s.memoizedState=null,a)}function xd(i,s){return s=Fu({mode:"visible",children:s},i.mode),s.return=i,i.child=s}function Fu(i,s){return i=En(22,i,null,s),i.lanes=0,i}function Vd(i,s,a){return Ns(s,i.child,null,a),i=xd(s,s.pendingProps.children),i.flags|=2,s.memoizedState=null,i}function ry(i,s,a){i.lanes|=s;var u=i.alternate;u!==null&&(u.lanes|=s),Qf(i.return,s,a)}function Pd(i,s,a,u,g,_){var A=i.memoizedState;A===null?i.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:a,tailMode:g,treeForkCount:_}:(A.isBackwards=s,A.rendering=null,A.renderingStartTime=0,A.last=u,A.tail=a,A.tailMode=g,A.treeForkCount=_)}function ay(i,s,a){var u=s.pendingProps,g=u.revealOrder,_=u.tail;u=u.children;var A=yt.current,I=(A&2)!==0;if(I?(A=A&1|2,s.flags|=128):A&=1,ue(yt,A),Kt(i,s,u,a),u=Oe?Ua:0,!I&&i!==null&&(i.flags&128)!==0)e:for(i=s.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&ry(i,a,s);else if(i.tag===19)ry(i,a,s);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(g){case"forwards":for(a=s.child,g=null;a!==null;)i=a.alternate,i!==null&&Mu(i)===null&&(g=a),a=a.sibling;a=g,a===null?(g=s.child,s.child=null):(g=a.sibling,a.sibling=null),Pd(s,!1,g,a,_,u);break;case"backwards":case"unstable_legacy-backwards":for(a=null,g=s.child,s.child=null;g!==null;){if(i=g.alternate,i!==null&&Mu(i)===null){s.child=g;break}i=g.sibling,g.sibling=a,a=g,g=i}Pd(s,!0,a,null,_,u);break;case"together":Pd(s,!1,null,null,void 0,u);break;default:s.memoizedState=null}return s.child}function Yi(i,s,a){if(i!==null&&(s.dependencies=i.dependencies),bo|=s.lanes,(a&s.childLanes)===0)if(i!==null){if(hr(i,s,a,!1),(a&s.childLanes)===0)return null}else return null;if(i!==null&&s.child!==i.child)throw Error(o(153));if(s.child!==null){for(i=s.child,a=qi(i,i.pendingProps),s.child=a,a.return=s;i.sibling!==null;)i=i.sibling,a=a.sibling=qi(i,i.pendingProps),a.return=s;a.sibling=null}return s.child}function Ud(i,s){return(i.lanes&s)!==0?!0:(i=i.dependencies,!!(i!==null&&Tu(i)))}function jA(i,s,a){switch(s.tag){case 3:xt(s,s.stateNode.containerInfo),Ao(s,It,i.memoizedState.cache),As();break;case 27:case 5:is(s);break;case 4:xt(s,s.stateNode.containerInfo);break;case 10:Ao(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,rd(s),null;break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(wo(s),s.flags|=128,null):(a&s.child.childLanes)!==0?sy(i,s,a):(wo(s),i=Yi(i,s,a),i!==null?i.sibling:null);wo(s);break;case 19:var g=(i.flags&128)!==0;if(u=(a&s.childLanes)!==0,u||(hr(i,s,a,!1),u=(a&s.childLanes)!==0),g){if(u)return ay(i,s,a);s.flags|=128}if(g=s.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ue(yt,yt.current),u)break;return null;case 22:return s.lanes=0,jg(i,s,a,s.pendingProps);case 24:Ao(s,It,i.memoizedState.cache)}return Yi(i,s,a)}function ly(i,s,a){if(i!==null)if(i.memoizedProps!==s.pendingProps)wt=!0;else{if(!Ud(i,a)&&(s.flags&128)===0)return wt=!1,jA(i,s,a);wt=(i.flags&131072)!==0}else wt=!1,Oe&&(s.flags&1048576)!==0&&Fm(s,Ua,s.index);switch(s.lanes=0,s.tag){case 16:e:{var u=s.pendingProps;if(i=ws(s.elementType),s.type=i,typeof i=="function")Ff(i)?(u=bs(i,u),s.tag=1,s=iy(null,s,i,u,a)):(s.tag=0,s=Md(null,s,i,u,a));else{if(i!=null){var g=i.$$typeof;if(g===se){s.tag=11,s=$g(null,s,i,u,a);break e}else if(g===D){s.tag=14,s=Wg(null,s,i,u,a);break e}}throw s=ke(i)||i,Error(o(306,s,""))}}return s;case 0:return Md(i,s,s.type,s.pendingProps,a);case 1:return u=s.type,g=bs(u,s.pendingProps),iy(i,s,u,g,a);case 3:e:{if(xt(s,s.stateNode.containerInfo),i===null)throw Error(o(387));u=s.pendingProps;var _=s.memoizedState;g=_.element,td(i,s),Ha(s,u,null,a);var A=s.memoizedState;if(u=A.cache,Ao(s,It,u),u!==_.cache&&Xf(s,[It],a,!0),Ga(),u=A.element,_.isDehydrated)if(_={element:u,isDehydrated:!1,cache:A.cache},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){s=oy(i,s,u,a);break e}else if(u!==g){g=Vn(Error(o(424)),s),La(g),s=oy(i,s,u,a);break e}else{switch(i=s.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(st=On(i.firstChild),Yt=s,Oe=!0,Eo=null,Ln=!0,a=jm(s,null,u,a),s.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(As(),u===g){s=Yi(i,s,a);break e}Kt(i,s,u,a)}s=s.child}return s;case 26:return qu(i,s),i===null?(a=v_(s.type,null,s.pendingProps,null))?s.memoizedState=a:Oe||(a=s.type,i=s.pendingProps,u=nc(Ne.current).createElement(a),u[St]=s,u[Lt]=i,Qt(u,a,i),At(u),s.stateNode=u):s.memoizedState=v_(s.type,i.memoizedProps,s.pendingProps,i.memoizedState),null;case 27:return is(s),i===null&&Oe&&(u=s.stateNode=g_(s.type,s.pendingProps,Ne.current),Yt=s,Ln=!0,g=st,Lo(s.type)?(ph=g,st=On(u.firstChild)):st=g),Kt(i,s,s.pendingProps.children,a),qu(i,s),i===null&&(s.flags|=4194304),s.child;case 5:return i===null&&Oe&&((g=u=st)&&(u=NC(u,s.type,s.pendingProps,Ln),u!==null?(s.stateNode=u,Yt=s,st=On(u.firstChild),Ln=!1,g=!0):g=!1),g||So(s)),is(s),g=s.type,_=s.pendingProps,A=i!==null?i.memoizedProps:null,u=_.children,uh(g,_)?u=null:A!==null&&uh(g,A)&&(s.flags|=32),s.memoizedState!==null&&(g=ld(i,s,zA,null,null,a),ul._currentValue=g),qu(i,s),Kt(i,s,u,a),s.child;case 6:return i===null&&Oe&&((i=a=st)&&(a=DC(a,s.pendingProps,Ln),a!==null?(s.stateNode=a,Yt=s,st=null,i=!0):i=!1),i||So(s)),null;case 13:return sy(i,s,a);case 4:return xt(s,s.stateNode.containerInfo),u=s.pendingProps,i===null?s.child=Ns(s,null,u,a):Kt(i,s,u,a),s.child;case 11:return $g(i,s,s.type,s.pendingProps,a);case 7:return Kt(i,s,s.pendingProps,a),s.child;case 8:return Kt(i,s,s.pendingProps.children,a),s.child;case 12:return Kt(i,s,s.pendingProps.children,a),s.child;case 10:return u=s.pendingProps,Ao(s,s.type,u.value),Kt(i,s,u.children,a),s.child;case 9:return g=s.type._context,u=s.pendingProps.children,Is(s),g=Jt(g),u=u(g),s.flags|=1,Kt(i,s,u,a),s.child;case 14:return Wg(i,s,s.type,s.pendingProps,a);case 15:return Zg(i,s,s.type,s.pendingProps,a);case 19:return ay(i,s,a);case 31:return ZA(i,s,a);case 22:return jg(i,s,a,s.pendingProps);case 24:return Is(s),u=Jt(It),i===null?(g=Zf(),g===null&&(g=it,_=$f(),g.pooledCache=_,_.refCount++,_!==null&&(g.pooledCacheLanes|=a),g=_),s.memoizedState={parent:u,cache:g},ed(s),Ao(s,It,g)):((i.lanes&a)!==0&&(td(i,s),Ha(s,null,null,a),Ga()),g=i.memoizedState,_=s.memoizedState,g.parent!==u?(g={parent:u,cache:u},s.memoizedState=g,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=g),Ao(s,It,u)):(u=_.cache,Ao(s,It,u),u!==g.cache&&Xf(s,[It],a,!0))),Kt(i,s,s.pendingProps.children,a),s.child;case 29:throw s.pendingProps}throw Error(o(156,s.tag))}function Ji(i){i.flags|=4}function Ld(i,s,a,u,g){if((s=(i.mode&32)!==0)&&(s=!1),s){if(i.flags|=16777216,(g&335544128)===g)if(i.stateNode.complete)i.flags|=8192;else if(Uy())i.flags|=8192;else throw Ms=Cu,jf}else i.flags&=-16777217}function uy(i,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!C_(s))if(Uy())i.flags|=8192;else throw Ms=Cu,jf}function Bu(i,s){s!==null&&(i.flags|=4),i.flags&16384&&(s=i.tag!==22?Kl():536870912,i.lanes|=s,Ir|=s)}function Xa(i,s){if(!Oe)switch(i.tailMode){case"hidden":s=i.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i.tail=null:a.sibling=null;break;case"collapsed":a=i.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s||i.tail===null?i.tail=null:i.tail.sibling=null:u.sibling=null}}function rt(i){var s=i.alternate!==null&&i.alternate.child===i.child,a=0,u=0;if(s)for(var g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags&65011712,u|=g.flags&65011712,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)a|=g.lanes|g.childLanes,u|=g.subtreeFlags,u|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=u,i.childLanes=a,s}function eC(i,s,a){var u=s.pendingProps;switch(zf(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rt(s),null;case 1:return rt(s),null;case 3:return a=s.stateNode,u=null,i!==null&&(u=i.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),Gi(It),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(i===null||i.child===null)&&(dr(s)?Ji(s):i===null||i.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Jf())),rt(s),null;case 26:var g=s.type,_=s.memoizedState;return i===null?(Ji(s),_!==null?(rt(s),uy(s,_)):(rt(s),Ld(s,g,null,u,a))):_?_!==i.memoizedState?(Ji(s),rt(s),uy(s,_)):(rt(s),s.flags&=-16777217):(i=i.memoizedProps,i!==u&&Ji(s),rt(s),Ld(s,g,i,u,a)),null;case 27:if(zs(s),a=Ne.current,g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ji(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return rt(s),null}i=pe.current,dr(s)?Gm(s):(i=g_(g,u,a),s.stateNode=i,Ji(s))}return rt(s),null;case 5:if(zs(s),g=s.type,i!==null&&s.stateNode!=null)i.memoizedProps!==u&&Ji(s);else{if(!u){if(s.stateNode===null)throw Error(o(166));return rt(s),null}if(_=pe.current,dr(s))Gm(s);else{var A=nc(Ne.current);switch(_){case 1:_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":_=A.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":_=A.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":_=A.createElement("div"),_.innerHTML="<script><\/script>",_=_.removeChild(_.firstChild);break;case"select":_=typeof u.is=="string"?A.createElement("select",{is:u.is}):A.createElement("select"),u.multiple?_.multiple=!0:u.size&&(_.size=u.size);break;default:_=typeof u.is=="string"?A.createElement(g,{is:u.is}):A.createElement(g)}}_[St]=s,_[Lt]=u;e:for(A=s.child;A!==null;){if(A.tag===5||A.tag===6)_.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===s)break e;for(;A.sibling===null;){if(A.return===null||A.return===s)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}s.stateNode=_;e:switch(Qt(_,g,u),g){case"button":case"input":case"select":case"textarea":u=!!u.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ji(s)}}return rt(s),Ld(s,s.type,i===null?null:i.memoizedProps,s.pendingProps,a),null;case 6:if(i&&s.stateNode!=null)i.memoizedProps!==u&&Ji(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(o(166));if(i=Ne.current,dr(s)){if(i=s.stateNode,a=s.memoizedProps,u=null,g=Yt,g!==null)switch(g.tag){case 27:case 5:u=g.memoizedProps}i[St]=s,i=!!(i.nodeValue===a||u!==null&&u.suppressHydrationWarning===!0||s_(i.nodeValue,a)),i||So(s,!0)}else i=nc(i).createTextNode(u),i[St]=s,s.stateNode=i}return rt(s),null;case 31:if(a=s.memoizedState,i===null||i.memoizedState!==null){if(u=dr(s),a!==null){if(i===null){if(!u)throw Error(o(318));if(i=s.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(o(557));i[St]=s}else As(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),i=!1}else a=Jf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=a),i=!0;if(!i)return s.flags&256?(An(s),s):(An(s),null);if((s.flags&128)!==0)throw Error(o(558))}return rt(s),null;case 13:if(u=s.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(g=dr(s),u!==null&&u.dehydrated!==null){if(i===null){if(!g)throw Error(o(318));if(g=s.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));g[St]=s}else As(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;rt(s),g=!1}else g=Jf(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=g),g=!0;if(!g)return s.flags&256?(An(s),s):(An(s),null)}return An(s),(s.flags&128)!==0?(s.lanes=a,s):(a=u!==null,i=i!==null&&i.memoizedState!==null,a&&(u=s.child,g=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(g=u.alternate.memoizedState.cachePool.pool),_=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(_=u.memoizedState.cachePool.pool),_!==g&&(u.flags|=2048)),a!==i&&a&&(s.child.flags|=8192),Bu(s,s.updateQueue),rt(s),null);case 4:return lt(),i===null&&oh(s.stateNode.containerInfo),rt(s),null;case 10:return Gi(s.type),rt(s),null;case 19:if(te(yt),u=s.memoizedState,u===null)return rt(s),null;if(g=(s.flags&128)!==0,_=u.rendering,_===null)if(g)Xa(u,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=s.child;i!==null;){if(_=Mu(i),_!==null){for(s.flags|=128,Xa(u,!1),i=_.updateQueue,s.updateQueue=i,Bu(s,i),s.subtreeFlags=0,i=a,a=s.child;a!==null;)km(a,i),a=a.sibling;return ue(yt,yt.current&1|2),Oe&&Fi(s,u.treeForkCount),s.child}i=i.sibling}u.tail!==null&&on()>Ju&&(s.flags|=128,g=!0,Xa(u,!1),s.lanes=4194304)}else{if(!g)if(i=Mu(_),i!==null){if(s.flags|=128,g=!0,i=i.updateQueue,s.updateQueue=i,Bu(s,i),Xa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Oe)return rt(s),null}else 2*on()-u.renderingStartTime>Ju&&a!==536870912&&(s.flags|=128,g=!0,Xa(u,!1),s.lanes=4194304);u.isBackwards?(_.sibling=s.child,s.child=_):(i=u.last,i!==null?i.sibling=_:s.child=_,u.last=_)}return u.tail!==null?(i=u.tail,u.rendering=i,u.tail=i.sibling,u.renderingStartTime=on(),i.sibling=null,a=yt.current,ue(yt,g?a&1|2:a&1),Oe&&Fi(s,u.treeForkCount),i):(rt(s),null);case 22:case 23:return An(s),sd(),u=s.memoizedState!==null,i!==null?i.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(a&536870912)!==0&&(s.flags&128)===0&&(rt(s),s.subtreeFlags&6&&(s.flags|=8192)):rt(s),a=s.updateQueue,a!==null&&Bu(s,a.retryQueue),a=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==a&&(s.flags|=2048),i!==null&&te(Rs),null;case 24:return a=null,i!==null&&(a=i.memoizedState.cache),s.memoizedState.cache!==a&&(s.flags|=2048),Gi(It),rt(s),null;case 25:return null;case 30:return null}throw Error(o(156,s.tag))}function tC(i,s){switch(zf(s),s.tag){case 1:return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 3:return Gi(It),lt(),i=s.flags,(i&65536)!==0&&(i&128)===0?(s.flags=i&-65537|128,s):null;case 26:case 27:case 5:return zs(s),null;case 31:if(s.memoizedState!==null){if(An(s),s.alternate===null)throw Error(o(340));As()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 13:if(An(s),i=s.memoizedState,i!==null&&i.dehydrated!==null){if(s.alternate===null)throw Error(o(340));As()}return i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 19:return te(yt),null;case 4:return lt(),null;case 10:return Gi(s.type),null;case 22:case 23:return An(s),sd(),i!==null&&te(Rs),i=s.flags,i&65536?(s.flags=i&-65537|128,s):null;case 24:return Gi(It),null;case 25:return null;default:return null}}function cy(i,s){switch(zf(s),s.tag){case 3:Gi(It),lt();break;case 26:case 27:case 5:zs(s);break;case 4:lt();break;case 31:s.memoizedState!==null&&An(s);break;case 13:An(s);break;case 19:te(yt);break;case 10:Gi(s.type);break;case 22:case 23:An(s),sd(),i!==null&&te(Rs);break;case 24:Gi(It)}}function $a(i,s){try{var a=s.updateQueue,u=a!==null?a.lastEffect:null;if(u!==null){var g=u.next;a=g;do{if((a.tag&i)===i){u=void 0;var _=a.create,A=a.inst;u=_(),A.destroy=u}a=a.next}while(a!==g)}}catch(I){Ze(s,s.return,I)}}function No(i,s,a){try{var u=s.updateQueue,g=u!==null?u.lastEffect:null;if(g!==null){var _=g.next;u=_;do{if((u.tag&i)===i){var A=u.inst,I=A.destroy;if(I!==void 0){A.destroy=void 0,g=s;var x=a,z=I;try{z()}catch($){Ze(g,x,$)}}}u=u.next}while(u!==_)}}catch($){Ze(s,s.return,$)}}function fy(i){var s=i.updateQueue;if(s!==null){var a=i.stateNode;try{tg(s,a)}catch(u){Ze(i,i.return,u)}}}function dy(i,s,a){a.props=bs(i.type,i.memoizedProps),a.state=i.memoizedState;try{a.componentWillUnmount()}catch(u){Ze(i,s,u)}}function Wa(i,s){try{var a=i.ref;if(a!==null){switch(i.tag){case 26:case 27:case 5:var u=i.stateNode;break;case 30:u=i.stateNode;break;default:u=i.stateNode}typeof a=="function"?i.refCleanup=a(u):a.current=u}}catch(g){Ze(i,s,g)}}function wi(i,s){var a=i.ref,u=i.refCleanup;if(a!==null)if(typeof u=="function")try{u()}catch(g){Ze(i,s,g)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(g){Ze(i,s,g)}else a.current=null}function hy(i){var s=i.type,a=i.memoizedProps,u=i.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":a.autoFocus&&u.focus();break e;case"img":a.src?u.src=a.src:a.srcSet&&(u.srcset=a.srcSet)}}catch(g){Ze(i,i.return,g)}}function kd(i,s,a){try{var u=i.stateNode;AC(u,i.type,a,s),u[Lt]=s}catch(g){Ze(i,i.return,g)}}function py(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Lo(i.type)||i.tag===4}function Od(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||py(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Lo(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function qd(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(i,s):(s=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,s.appendChild(i),a=a._reactRootContainer,a!=null||s.onclick!==null||(s.onclick=Qn));else if(u!==4&&(u===27&&Lo(i.type)&&(a=i.stateNode,s=null),i=i.child,i!==null))for(qd(i,s,a),i=i.sibling;i!==null;)qd(i,s,a),i=i.sibling}function Gu(i,s,a){var u=i.tag;if(u===5||u===6)i=i.stateNode,s?a.insertBefore(i,s):a.appendChild(i);else if(u!==4&&(u===27&&Lo(i.type)&&(a=i.stateNode),i=i.child,i!==null))for(Gu(i,s,a),i=i.sibling;i!==null;)Gu(i,s,a),i=i.sibling}function my(i){var s=i.stateNode,a=i.memoizedProps;try{for(var u=i.type,g=s.attributes;g.length;)s.removeAttributeNode(g[0]);Qt(s,u,a),s[St]=i,s[Lt]=a}catch(_){Ze(i,i.return,_)}}var Ki=!1,Mt=!1,Fd=!1,gy=typeof WeakSet=="function"?WeakSet:Set,Ot=null;function nC(i,s){if(i=i.containerInfo,ah=uc,i=Mm(i),Vf(i)){if("selectionStart"in i)var a={start:i.selectionStart,end:i.selectionEnd};else e:{a=(a=i.ownerDocument)&&a.defaultView||window;var u=a.getSelection&&a.getSelection();if(u&&u.rangeCount!==0){a=u.anchorNode;var g=u.anchorOffset,_=u.focusNode;u=u.focusOffset;try{a.nodeType,_.nodeType}catch{a=null;break e}var A=0,I=-1,x=-1,z=0,$=0,ee=i,Y=null;t:for(;;){for(var K;ee!==a||g!==0&&ee.nodeType!==3||(I=A+g),ee!==_||u!==0&&ee.nodeType!==3||(x=A+u),ee.nodeType===3&&(A+=ee.nodeValue.length),(K=ee.firstChild)!==null;)Y=ee,ee=K;for(;;){if(ee===i)break t;if(Y===a&&++z===g&&(I=A),Y===_&&++$===u&&(x=A),(K=ee.nextSibling)!==null)break;ee=Y,Y=ee.parentNode}ee=K}a=I===-1||x===-1?null:{start:I,end:x}}else a=null}a=a||{start:0,end:0}}else a=null;for(lh={focusedElem:i,selectionRange:a},uc=!1,Ot=s;Ot!==null;)if(s=Ot,i=s.child,(s.subtreeFlags&1028)!==0&&i!==null)i.return=s,Ot=i;else for(;Ot!==null;){switch(s=Ot,_=s.alternate,i=s.flags,s.tag){case 0:if((i&4)!==0&&(i=s.updateQueue,i=i!==null?i.events:null,i!==null))for(a=0;a<i.length;a++)g=i[a],g.ref.impl=g.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&_!==null){i=void 0,a=s,g=_.memoizedProps,_=_.memoizedState,u=a.stateNode;try{var me=bs(a.type,g);i=u.getSnapshotBeforeUpdate(me,_),u.__reactInternalSnapshotBeforeUpdate=i}catch(Te){Ze(a,a.return,Te)}}break;case 3:if((i&1024)!==0){if(i=s.stateNode.containerInfo,a=i.nodeType,a===9)fh(i);else if(a===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":fh(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(o(163))}if(i=s.sibling,i!==null){i.return=s.return,Ot=i;break}Ot=s.return}}function yy(i,s,a){var u=a.flags;switch(a.tag){case 0:case 11:case 15:Xi(i,a),u&4&&$a(5,a);break;case 1:if(Xi(i,a),u&4)if(i=a.stateNode,s===null)try{i.componentDidMount()}catch(A){Ze(a,a.return,A)}else{var g=bs(a.type,s.memoizedProps);s=s.memoizedState;try{i.componentDidUpdate(g,s,i.__reactInternalSnapshotBeforeUpdate)}catch(A){Ze(a,a.return,A)}}u&64&&fy(a),u&512&&Wa(a,a.return);break;case 3:if(Xi(i,a),u&64&&(i=a.updateQueue,i!==null)){if(s=null,a.child!==null)switch(a.child.tag){case 27:case 5:s=a.child.stateNode;break;case 1:s=a.child.stateNode}try{tg(i,s)}catch(A){Ze(a,a.return,A)}}break;case 27:s===null&&u&4&&my(a);case 26:case 5:Xi(i,a),s===null&&u&4&&hy(a),u&512&&Wa(a,a.return);break;case 12:Xi(i,a);break;case 31:Xi(i,a),u&4&&Ty(i,a);break;case 13:Xi(i,a),u&4&&Ey(i,a),u&64&&(i=a.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(a=fC.bind(null,a),bC(i,a))));break;case 22:if(u=a.memoizedState!==null||Ki,!u){s=s!==null&&s.memoizedState!==null||Mt,g=Ki;var _=Mt;Ki=u,(Mt=s)&&!_?$i(i,a,(a.subtreeFlags&8772)!==0):Xi(i,a),Ki=g,Mt=_}break;case 30:break;default:Xi(i,a)}}function _y(i){var s=i.alternate;s!==null&&(i.alternate=null,_y(s)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(s=i.stateNode,s!==null&&Xs(s)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var ct=null,fn=!1;function Qi(i,s,a){for(a=a.child;a!==null;)vy(i,s,a),a=a.sibling}function vy(i,s,a){if(Ht&&typeof Ht.onCommitFiberUnmount=="function")try{Ht.onCommitFiberUnmount(zn,a)}catch{}switch(a.tag){case 26:Mt||wi(a,s),Qi(i,s,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Mt||wi(a,s);var u=ct,g=fn;Lo(a.type)&&(ct=a.stateNode,fn=!1),Qi(i,s,a),rl(a.stateNode),ct=u,fn=g;break;case 5:Mt||wi(a,s);case 6:if(u=ct,g=fn,ct=null,Qi(i,s,a),ct=u,fn=g,ct!==null)if(fn)try{(ct.nodeType===9?ct.body:ct.nodeName==="HTML"?ct.ownerDocument.body:ct).removeChild(a.stateNode)}catch(_){Ze(a,s,_)}else try{ct.removeChild(a.stateNode)}catch(_){Ze(a,s,_)}break;case 18:ct!==null&&(fn?(i=ct,f_(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,a.stateNode),Vr(i)):f_(ct,a.stateNode));break;case 4:u=ct,g=fn,ct=a.stateNode.containerInfo,fn=!0,Qi(i,s,a),ct=u,fn=g;break;case 0:case 11:case 14:case 15:No(2,a,s),Mt||No(4,a,s),Qi(i,s,a);break;case 1:Mt||(wi(a,s),u=a.stateNode,typeof u.componentWillUnmount=="function"&&dy(a,s,u)),Qi(i,s,a);break;case 21:Qi(i,s,a);break;case 22:Mt=(u=Mt)||a.memoizedState!==null,Qi(i,s,a),Mt=u;break;default:Qi(i,s,a)}}function Ty(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{Vr(i)}catch(a){Ze(s,s.return,a)}}}function Ey(i,s){if(s.memoizedState===null&&(i=s.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{Vr(i)}catch(a){Ze(s,s.return,a)}}function iC(i){switch(i.tag){case 31:case 13:case 19:var s=i.stateNode;return s===null&&(s=i.stateNode=new gy),s;case 22:return i=i.stateNode,s=i._retryCache,s===null&&(s=i._retryCache=new gy),s;default:throw Error(o(435,i.tag))}}function Hu(i,s){var a=iC(i);s.forEach(function(u){if(!a.has(u)){a.add(u);var g=dC.bind(null,i,u);u.then(g,g)}})}function dn(i,s){var a=s.deletions;if(a!==null)for(var u=0;u<a.length;u++){var g=a[u],_=i,A=s,I=A;e:for(;I!==null;){switch(I.tag){case 27:if(Lo(I.type)){ct=I.stateNode,fn=!1;break e}break;case 5:ct=I.stateNode,fn=!1;break e;case 3:case 4:ct=I.stateNode.containerInfo,fn=!0;break e}I=I.return}if(ct===null)throw Error(o(160));vy(_,A,g),ct=null,fn=!1,_=g.alternate,_!==null&&(_.return=null),g.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Sy(s,i),s=s.sibling}var ei=null;function Sy(i,s){var a=i.alternate,u=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:dn(s,i),hn(i),u&4&&(No(3,i,i.return),$a(3,i),No(5,i,i.return));break;case 1:dn(s,i),hn(i),u&512&&(Mt||a===null||wi(a,a.return)),u&64&&Ki&&(i=i.updateQueue,i!==null&&(u=i.callbacks,u!==null&&(a=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=a===null?u:a.concat(u))));break;case 26:var g=ei;if(dn(s,i),hn(i),u&512&&(Mt||a===null||wi(a,a.return)),u&4){var _=a!==null?a.memoizedState:null;if(u=i.memoizedState,a===null)if(u===null)if(i.stateNode===null){e:{u=i.type,a=i.memoizedProps,g=g.ownerDocument||g;t:switch(u){case"title":_=g.getElementsByTagName("title")[0],(!_||_[hi]||_[St]||_.namespaceURI==="http://www.w3.org/2000/svg"||_.hasAttribute("itemprop"))&&(_=g.createElement(u),g.head.insertBefore(_,g.querySelector("head > title"))),Qt(_,u,a),_[St]=i,At(_),u=_;break e;case"link":var A=S_("link","href",g).get(u+(a.href||""));if(A){for(var I=0;I<A.length;I++)if(_=A[I],_.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&_.getAttribute("rel")===(a.rel==null?null:a.rel)&&_.getAttribute("title")===(a.title==null?null:a.title)&&_.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){A.splice(I,1);break t}}_=g.createElement(u),Qt(_,u,a),g.head.appendChild(_);break;case"meta":if(A=S_("meta","content",g).get(u+(a.content||""))){for(I=0;I<A.length;I++)if(_=A[I],_.getAttribute("content")===(a.content==null?null:""+a.content)&&_.getAttribute("name")===(a.name==null?null:a.name)&&_.getAttribute("property")===(a.property==null?null:a.property)&&_.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&_.getAttribute("charset")===(a.charSet==null?null:a.charSet)){A.splice(I,1);break t}}_=g.createElement(u),Qt(_,u,a),g.head.appendChild(_);break;default:throw Error(o(468,u))}_[St]=i,At(_),u=_}i.stateNode=u}else A_(g,i.type,i.stateNode);else i.stateNode=E_(g,u,i.memoizedProps);else _!==u?(_===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):_.count--,u===null?A_(g,i.type,i.stateNode):E_(g,u,i.memoizedProps)):u===null&&i.stateNode!==null&&kd(i,i.memoizedProps,a.memoizedProps)}break;case 27:dn(s,i),hn(i),u&512&&(Mt||a===null||wi(a,a.return)),a!==null&&u&4&&kd(i,i.memoizedProps,a.memoizedProps);break;case 5:if(dn(s,i),hn(i),u&512&&(Mt||a===null||wi(a,a.return)),i.flags&32){g=i.stateNode;try{cn(g,"")}catch(me){Ze(i,i.return,me)}}u&4&&i.stateNode!=null&&(g=i.memoizedProps,kd(i,g,a!==null?a.memoizedProps:g)),u&1024&&(Fd=!0);break;case 6:if(dn(s,i),hn(i),u&4){if(i.stateNode===null)throw Error(o(162));u=i.memoizedProps,a=i.stateNode;try{a.nodeValue=u}catch(me){Ze(i,i.return,me)}}break;case 3:if(sc=null,g=ei,ei=ic(s.containerInfo),dn(s,i),ei=g,hn(i),u&4&&a!==null&&a.memoizedState.isDehydrated)try{Vr(s.containerInfo)}catch(me){Ze(i,i.return,me)}Fd&&(Fd=!1,Ay(i));break;case 4:u=ei,ei=ic(i.stateNode.containerInfo),dn(s,i),hn(i),ei=u;break;case 12:dn(s,i),hn(i);break;case 31:dn(s,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Hu(i,u)));break;case 13:dn(s,i),hn(i),i.child.flags&8192&&i.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Yu=on()),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Hu(i,u)));break;case 22:g=i.memoizedState!==null;var x=a!==null&&a.memoizedState!==null,z=Ki,$=Mt;if(Ki=z||g,Mt=$||x,dn(s,i),Mt=$,Ki=z,hn(i),u&8192)e:for(s=i.stateNode,s._visibility=g?s._visibility&-2:s._visibility|1,g&&(a===null||x||Ki||Mt||xs(i)),a=null,s=i;;){if(s.tag===5||s.tag===26){if(a===null){x=a=s;try{if(_=x.stateNode,g)A=_.style,typeof A.setProperty=="function"?A.setProperty("display","none","important"):A.display="none";else{I=x.stateNode;var ee=x.memoizedProps.style,Y=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;I.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(me){Ze(x,x.return,me)}}}else if(s.tag===6){if(a===null){x=s;try{x.stateNode.nodeValue=g?"":x.memoizedProps}catch(me){Ze(x,x.return,me)}}}else if(s.tag===18){if(a===null){x=s;try{var K=x.stateNode;g?d_(K,!0):d_(x.stateNode,!1)}catch(me){Ze(x,x.return,me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===i)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;a===s&&(a=null),s=s.return}a===s&&(a=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=i.updateQueue,u!==null&&(a=u.retryQueue,a!==null&&(u.retryQueue=null,Hu(i,a))));break;case 19:dn(s,i),hn(i),u&4&&(u=i.updateQueue,u!==null&&(i.updateQueue=null,Hu(i,u)));break;case 30:break;case 21:break;default:dn(s,i),hn(i)}}function hn(i){var s=i.flags;if(s&2){try{for(var a,u=i.return;u!==null;){if(py(u)){a=u;break}u=u.return}if(a==null)throw Error(o(160));switch(a.tag){case 27:var g=a.stateNode,_=Od(i);Gu(i,_,g);break;case 5:var A=a.stateNode;a.flags&32&&(cn(A,""),a.flags&=-33);var I=Od(i);Gu(i,I,A);break;case 3:case 4:var x=a.stateNode.containerInfo,z=Od(i);qd(i,z,x);break;default:throw Error(o(161))}}catch($){Ze(i,i.return,$)}i.flags&=-3}s&4096&&(i.flags&=-4097)}function Ay(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var s=i;Ay(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),i=i.sibling}}function Xi(i,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)yy(i,s.alternate,s),s=s.sibling}function xs(i){for(i=i.child;i!==null;){var s=i;switch(s.tag){case 0:case 11:case 14:case 15:No(4,s,s.return),xs(s);break;case 1:wi(s,s.return);var a=s.stateNode;typeof a.componentWillUnmount=="function"&&dy(s,s.return,a),xs(s);break;case 27:rl(s.stateNode);case 26:case 5:wi(s,s.return),xs(s);break;case 22:s.memoizedState===null&&xs(s);break;case 30:xs(s);break;default:xs(s)}i=i.sibling}}function $i(i,s,a){for(a=a&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,g=i,_=s,A=_.flags;switch(_.tag){case 0:case 11:case 15:$i(g,_,a),$a(4,_);break;case 1:if($i(g,_,a),u=_,g=u.stateNode,typeof g.componentDidMount=="function")try{g.componentDidMount()}catch(z){Ze(u,u.return,z)}if(u=_,g=u.updateQueue,g!==null){var I=u.stateNode;try{var x=g.shared.hiddenCallbacks;if(x!==null)for(g.shared.hiddenCallbacks=null,g=0;g<x.length;g++)eg(x[g],I)}catch(z){Ze(u,u.return,z)}}a&&A&64&&fy(_),Wa(_,_.return);break;case 27:my(_);case 26:case 5:$i(g,_,a),a&&u===null&&A&4&&hy(_),Wa(_,_.return);break;case 12:$i(g,_,a);break;case 31:$i(g,_,a),a&&A&4&&Ty(g,_);break;case 13:$i(g,_,a),a&&A&4&&Ey(g,_);break;case 22:_.memoizedState===null&&$i(g,_,a),Wa(_,_.return);break;case 30:break;default:$i(g,_,a)}s=s.sibling}}function Bd(i,s){var a=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),i=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(i=s.memoizedState.cachePool.pool),i!==a&&(i!=null&&i.refCount++,a!=null&&ka(a))}function Gd(i,s){i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ka(i))}function ti(i,s,a,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Cy(i,s,a,u),s=s.sibling}function Cy(i,s,a,u){var g=s.flags;switch(s.tag){case 0:case 11:case 15:ti(i,s,a,u),g&2048&&$a(9,s);break;case 1:ti(i,s,a,u);break;case 3:ti(i,s,a,u),g&2048&&(i=null,s.alternate!==null&&(i=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==i&&(s.refCount++,i!=null&&ka(i)));break;case 12:if(g&2048){ti(i,s,a,u),i=s.stateNode;try{var _=s.memoizedProps,A=_.id,I=_.onPostCommit;typeof I=="function"&&I(A,s.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(x){Ze(s,s.return,x)}}else ti(i,s,a,u);break;case 31:ti(i,s,a,u);break;case 13:ti(i,s,a,u);break;case 23:break;case 22:_=s.stateNode,A=s.alternate,s.memoizedState!==null?_._visibility&2?ti(i,s,a,u):Za(i,s):_._visibility&2?ti(i,s,a,u):(_._visibility|=2,Sr(i,s,a,u,(s.subtreeFlags&10256)!==0||!1)),g&2048&&Bd(A,s);break;case 24:ti(i,s,a,u),g&2048&&Gd(s.alternate,s);break;default:ti(i,s,a,u)}}function Sr(i,s,a,u,g){for(g=g&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var _=i,A=s,I=a,x=u,z=A.flags;switch(A.tag){case 0:case 11:case 15:Sr(_,A,I,x,g),$a(8,A);break;case 23:break;case 22:var $=A.stateNode;A.memoizedState!==null?$._visibility&2?Sr(_,A,I,x,g):Za(_,A):($._visibility|=2,Sr(_,A,I,x,g)),g&&z&2048&&Bd(A.alternate,A);break;case 24:Sr(_,A,I,x,g),g&&z&2048&&Gd(A.alternate,A);break;default:Sr(_,A,I,x,g)}s=s.sibling}}function Za(i,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var a=i,u=s,g=u.flags;switch(u.tag){case 22:Za(a,u),g&2048&&Bd(u.alternate,u);break;case 24:Za(a,u),g&2048&&Gd(u.alternate,u);break;default:Za(a,u)}s=s.sibling}}var ja=8192;function Ar(i,s,a){if(i.subtreeFlags&ja)for(i=i.child;i!==null;)Iy(i,s,a),i=i.sibling}function Iy(i,s,a){switch(i.tag){case 26:Ar(i,s,a),i.flags&ja&&i.memoizedState!==null&&HC(a,ei,i.memoizedState,i.memoizedProps);break;case 5:Ar(i,s,a);break;case 3:case 4:var u=ei;ei=ic(i.stateNode.containerInfo),Ar(i,s,a),ei=u;break;case 22:i.memoizedState===null&&(u=i.alternate,u!==null&&u.memoizedState!==null?(u=ja,ja=16777216,Ar(i,s,a),ja=u):Ar(i,s,a));break;default:Ar(i,s,a)}}function Ry(i){var s=i.alternate;if(s!==null&&(i=s.child,i!==null)){s.child=null;do s=i.sibling,i.sibling=null,i=s;while(i!==null)}}function el(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ot=u,My(u,i)}Ry(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)wy(i),i=i.sibling}function wy(i){switch(i.tag){case 0:case 11:case 15:el(i),i.flags&2048&&No(9,i,i.return);break;case 3:el(i);break;case 12:el(i);break;case 22:var s=i.stateNode;i.memoizedState!==null&&s._visibility&2&&(i.return===null||i.return.tag!==13)?(s._visibility&=-3,zu(i)):el(i);break;default:el(i)}}function zu(i){var s=i.deletions;if((i.flags&16)!==0){if(s!==null)for(var a=0;a<s.length;a++){var u=s[a];Ot=u,My(u,i)}Ry(i)}for(i=i.child;i!==null;){switch(s=i,s.tag){case 0:case 11:case 15:No(8,s,s.return),zu(s);break;case 22:a=s.stateNode,a._visibility&2&&(a._visibility&=-3,zu(s));break;default:zu(s)}i=i.sibling}}function My(i,s){for(;Ot!==null;){var a=Ot;switch(a.tag){case 0:case 11:case 15:No(8,a,s);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var u=a.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ka(a.memoizedState.cache)}if(u=a.child,u!==null)u.return=a,Ot=u;else e:for(a=i;Ot!==null;){u=Ot;var g=u.sibling,_=u.return;if(_y(u),u===a){Ot=null;break e}if(g!==null){g.return=_,Ot=g;break e}Ot=_}}}var oC={getCacheForType:function(i){var s=Jt(It),a=s.data.get(i);return a===void 0&&(a=i(),s.data.set(i,a)),a},cacheSignal:function(){return Jt(It).controller.signal}},sC=typeof WeakMap=="function"?WeakMap:Map,Ke=0,it=null,be=null,Ve=0,We=0,Cn=null,Do=!1,Cr=!1,Hd=!1,Wi=0,pt=0,bo=0,Vs=0,zd=0,In=0,Ir=0,tl=null,pn=null,Yd=!1,Yu=0,Ny=0,Ju=1/0,Ku=null,xo=null,Pt=0,Vo=null,Rr=null,Zi=0,Jd=0,Kd=null,Dy=null,nl=0,Qd=null;function Rn(){return(Ke&2)!==0&&Ve!==0?Ve&-Ve:Q.T!==null?eh():Ql()}function by(){if(In===0)if((Ve&536870912)===0||Oe){var i=rs;rs<<=1,(rs&3932160)===0&&(rs=262144),In=i}else In=536870912;return i=Sn.current,i!==null&&(i.flags|=32),In}function mn(i,s,a){(i===it&&(We===2||We===9)||i.cancelPendingCommit!==null)&&(wr(i,0),Po(i,Ve,In,!1)),as(i,a),((Ke&2)===0||i!==it)&&(i===it&&((Ke&2)===0&&(Vs|=a),pt===4&&Po(i,Ve,In,!1)),Mi(i))}function xy(i,s,a){if((Ke&6)!==0)throw Error(o(327));var u=!a&&(s&127)===0&&(s&i.expiredLanes)===0||Yn(i,s),g=u?lC(i,s):$d(i,s,!0),_=u;do{if(g===0){Cr&&!u&&Po(i,s,0,!1);break}else{if(a=i.current.alternate,_&&!rC(a)){g=$d(i,s,!1),_=!1;continue}if(g===2){if(_=s,i.errorRecoveryDisabledLanes&_)var A=0;else A=i.pendingLanes&-536870913,A=A!==0?A:A&536870912?536870912:0;if(A!==0){s=A;e:{var I=i;g=tl;var x=I.current.memoizedState.isDehydrated;if(x&&(wr(I,A).flags|=256),A=$d(I,A,!1),A!==2){if(Hd&&!x){I.errorRecoveryDisabledLanes|=_,Vs|=_,g=4;break e}_=pn,pn=g,_!==null&&(pn===null?pn=_:pn.push.apply(pn,_))}g=A}if(_=!1,g!==2)continue}}if(g===1){wr(i,0),Po(i,s,0,!0);break}e:{switch(u=i,_=g,_){case 0:case 1:throw Error(o(345));case 4:if((s&4194048)!==s)break;case 6:Po(u,s,In,!Do);break e;case 2:pn=null;break;case 3:case 5:break;default:throw Error(o(329))}if((s&62914560)===s&&(g=Yu+300-on(),10<g)){if(Po(u,s,In,!Do),ci(u,0,!0)!==0)break e;Zi=s,u.timeoutHandle=u_(Vy.bind(null,u,a,pn,Ku,Yd,s,In,Vs,Ir,Do,_,"Throttled",-0,0),g);break e}Vy(u,a,pn,Ku,Yd,s,In,Vs,Ir,Do,_,null,-0,0)}}break}while(!0);Mi(i)}function Vy(i,s,a,u,g,_,A,I,x,z,$,ee,Y,K){if(i.timeoutHandle=-1,ee=s.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qn},Iy(s,_,ee);var me=(_&62914560)===_?Yu-on():(_&4194048)===_?Ny-on():0;if(me=zC(ee,me),me!==null){Zi=_,i.cancelPendingCommit=me(By.bind(null,i,s,_,a,u,g,A,I,x,$,ee,null,Y,K)),Po(i,_,A,!z);return}}By(i,s,_,a,u,g,A,I,x)}function rC(i){for(var s=i;;){var a=s.tag;if((a===0||a===11||a===15)&&s.flags&16384&&(a=s.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var u=0;u<a.length;u++){var g=a[u],_=g.getSnapshot;g=g.value;try{if(!Tn(_(),g))return!1}catch{return!1}}if(a=s.child,s.subtreeFlags&16384&&a!==null)a.return=s,s=a;else{if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Po(i,s,a,u){s&=~zd,s&=~Vs,i.suspendedLanes|=s,i.pingedLanes&=~s,u&&(i.warmLanes|=s),u=i.expirationTimes;for(var g=s;0<g;){var _=31-mt(g),A=1<<_;u[_]=-1,g&=~A}a!==0&&ls(i,a,s)}function Qu(){return(Ke&6)===0?(il(0),!1):!0}function Xd(){if(be!==null){if(We===0)var i=be.return;else i=be,Bi=Cs=null,fd(i),yr=null,qa=0,i=be;for(;i!==null;)cy(i.alternate,i),i=i.return;be=null}}function wr(i,s){var a=i.timeoutHandle;a!==-1&&(i.timeoutHandle=-1,RC(a)),a=i.cancelPendingCommit,a!==null&&(i.cancelPendingCommit=null,a()),Zi=0,Xd(),it=i,be=a=qi(i.current,null),Ve=s,We=0,Cn=null,Do=!1,Cr=Yn(i,s),Hd=!1,Ir=In=zd=Vs=bo=pt=0,pn=tl=null,Yd=!1,(s&8)!==0&&(s|=s&32);var u=i.entangledLanes;if(u!==0)for(i=i.entanglements,u&=s;0<u;){var g=31-mt(u),_=1<<g;s|=i[g],u&=~_}return Wi=s,mu(),a}function Py(i,s){Me=null,Q.H=Ka,s===gr||s===Au?(s=$m(),We=3):s===jf?(s=$m(),We=4):We=s===wd?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Cn=s,be===null&&(pt=1,ku(i,Vn(s,i.current)))}function Uy(){var i=Sn.current;return i===null?!0:(Ve&4194048)===Ve?kn===null:(Ve&62914560)===Ve||(Ve&536870912)!==0?i===kn:!1}function Ly(){var i=Q.H;return Q.H=Ka,i===null?Ka:i}function ky(){var i=Q.A;return Q.A=oC,i}function Xu(){pt=4,Do||(Ve&4194048)!==Ve&&Sn.current!==null||(Cr=!0),(bo&134217727)===0&&(Vs&134217727)===0||it===null||Po(it,Ve,In,!1)}function $d(i,s,a){var u=Ke;Ke|=2;var g=Ly(),_=ky();(it!==i||Ve!==s)&&(Ku=null,wr(i,s)),s=!1;var A=pt;e:do try{if(We!==0&&be!==null){var I=be,x=Cn;switch(We){case 8:Xd(),A=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(s=!0);var z=We;if(We=0,Cn=null,Mr(i,I,x,z),a&&Cr){A=0;break e}break;default:z=We,We=0,Cn=null,Mr(i,I,x,z)}}aC(),A=pt;break}catch($){Py(i,$)}while(!0);return s&&i.shellSuspendCounter++,Bi=Cs=null,Ke=u,Q.H=g,Q.A=_,be===null&&(it=null,Ve=0,mu()),A}function aC(){for(;be!==null;)Oy(be)}function lC(i,s){var a=Ke;Ke|=2;var u=Ly(),g=ky();it!==i||Ve!==s?(Ku=null,Ju=on()+500,wr(i,s)):Cr=Yn(i,s);e:do try{if(We!==0&&be!==null){s=be;var _=Cn;t:switch(We){case 1:We=0,Cn=null,Mr(i,s,_,1);break;case 2:case 9:if(Qm(_)){We=0,Cn=null,qy(s);break}s=function(){We!==2&&We!==9||it!==i||(We=7),Mi(i)},_.then(s,s);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Qm(_)?(We=0,Cn=null,qy(s)):(We=0,Cn=null,Mr(i,s,_,7));break;case 5:var A=null;switch(be.tag){case 26:A=be.memoizedState;case 5:case 27:var I=be;if(A?C_(A):I.stateNode.complete){We=0,Cn=null;var x=I.sibling;if(x!==null)be=x;else{var z=I.return;z!==null?(be=z,$u(z)):be=null}break t}}We=0,Cn=null,Mr(i,s,_,5);break;case 6:We=0,Cn=null,Mr(i,s,_,6);break;case 8:Xd(),pt=6;break e;default:throw Error(o(462))}}uC();break}catch($){Py(i,$)}while(!0);return Bi=Cs=null,Q.H=u,Q.A=g,Ke=a,be!==null?0:(it=null,Ve=0,mu(),pt)}function uC(){for(;be!==null&&!Rf();)Oy(be)}function Oy(i){var s=ly(i.alternate,i,Wi);i.memoizedProps=i.pendingProps,s===null?$u(i):be=s}function qy(i){var s=i,a=s.alternate;switch(s.tag){case 15:case 0:s=ny(a,s,s.pendingProps,s.type,void 0,Ve);break;case 11:s=ny(a,s,s.pendingProps,s.type.render,s.ref,Ve);break;case 5:fd(s);default:cy(a,s),s=be=km(s,Wi),s=ly(a,s,Wi)}i.memoizedProps=i.pendingProps,s===null?$u(i):be=s}function Mr(i,s,a,u){Bi=Cs=null,fd(s),yr=null,qa=0;var g=s.return;try{if(WA(i,g,s,a,Ve)){pt=1,ku(i,Vn(a,i.current)),be=null;return}}catch(_){if(g!==null)throw be=g,_;pt=1,ku(i,Vn(a,i.current)),be=null;return}s.flags&32768?(Oe||u===1?i=!0:Cr||(Ve&536870912)!==0?i=!1:(Do=i=!0,(u===2||u===9||u===3||u===6)&&(u=Sn.current,u!==null&&u.tag===13&&(u.flags|=16384))),Fy(s,i)):$u(s)}function $u(i){var s=i;do{if((s.flags&32768)!==0){Fy(s,Do);return}i=s.return;var a=eC(s.alternate,s,Wi);if(a!==null){be=a;return}if(s=s.sibling,s!==null){be=s;return}be=s=i}while(s!==null);pt===0&&(pt=5)}function Fy(i,s){do{var a=tC(i.alternate,i);if(a!==null){a.flags&=32767,be=a;return}if(a=i.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!s&&(i=i.sibling,i!==null)){be=i;return}be=i=a}while(i!==null);pt=6,be=null}function By(i,s,a,u,g,_,A,I,x){i.cancelPendingCommit=null;do Wu();while(Pt!==0);if((Ke&6)!==0)throw Error(o(327));if(s!==null){if(s===i.current)throw Error(o(177));if(_=s.lanes|s.childLanes,_|=Of,Nf(i,a,_,A,I,x),i===it&&(be=it=null,Ve=0),Rr=s,Vo=i,Zi=a,Jd=_,Kd=g,Dy=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,hC(uo,function(){return Jy(),null})):(i.callbackNode=null,i.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=Q.T,Q.T=null,g=ae.p,ae.p=2,A=Ke,Ke|=4;try{nC(i,s,a)}finally{Ke=A,ae.p=g,Q.T=u}}Pt=1,Gy(),Hy(),zy()}}function Gy(){if(Pt===1){Pt=0;var i=Vo,s=Rr,a=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||a){a=Q.T,Q.T=null;var u=ae.p;ae.p=2;var g=Ke;Ke|=4;try{Sy(s,i);var _=lh,A=Mm(i.containerInfo),I=_.focusedElem,x=_.selectionRange;if(A!==I&&I&&I.ownerDocument&&wm(I.ownerDocument.documentElement,I)){if(x!==null&&Vf(I)){var z=x.start,$=x.end;if($===void 0&&($=z),"selectionStart"in I)I.selectionStart=z,I.selectionEnd=Math.min($,I.value.length);else{var ee=I.ownerDocument||document,Y=ee&&ee.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),me=I.textContent.length,Te=Math.min(x.start,me),nt=x.end===void 0?Te:Math.min(x.end,me);!K.extend&&Te>nt&&(A=nt,nt=Te,Te=A);var B=Rm(I,Te),k=Rm(I,nt);if(B&&k&&(K.rangeCount!==1||K.anchorNode!==B.node||K.anchorOffset!==B.offset||K.focusNode!==k.node||K.focusOffset!==k.offset)){var H=ee.createRange();H.setStart(B.node,B.offset),K.removeAllRanges(),Te>nt?(K.addRange(H),K.extend(k.node,k.offset)):(H.setEnd(k.node,k.offset),K.addRange(H))}}}}for(ee=[],K=I;K=K.parentNode;)K.nodeType===1&&ee.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ee.length;I++){var Z=ee[I];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}uc=!!ah,lh=ah=null}finally{Ke=g,ae.p=u,Q.T=a}}i.current=s,Pt=2}}function Hy(){if(Pt===2){Pt=0;var i=Vo,s=Rr,a=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||a){a=Q.T,Q.T=null;var u=ae.p;ae.p=2;var g=Ke;Ke|=4;try{yy(i,s.alternate,s)}finally{Ke=g,ae.p=u,Q.T=a}}Pt=3}}function zy(){if(Pt===4||Pt===3){Pt=0,Bl();var i=Vo,s=Rr,a=Zi,u=Dy;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Pt=5:(Pt=0,Rr=Vo=null,Yy(i,i.pendingLanes));var g=i.pendingLanes;if(g===0&&(xo=null),Ui(a),s=s.stateNode,Ht&&typeof Ht.onCommitFiberRoot=="function")try{Ht.onCommitFiberRoot(zn,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=Q.T,g=ae.p,ae.p=2,Q.T=null;try{for(var _=i.onRecoverableError,A=0;A<u.length;A++){var I=u[A];_(I.value,{componentStack:I.stack})}}finally{Q.T=s,ae.p=g}}(Zi&3)!==0&&Wu(),Mi(i),g=i.pendingLanes,(a&261930)!==0&&(g&42)!==0?i===Qd?nl++:(nl=0,Qd=i):nl=0,il(0)}}function Yy(i,s){(i.pooledCacheLanes&=s)===0&&(s=i.pooledCache,s!=null&&(i.pooledCache=null,ka(s)))}function Wu(){return Gy(),Hy(),zy(),Jy()}function Jy(){if(Pt!==5)return!1;var i=Vo,s=Jd;Jd=0;var a=Ui(Zi),u=Q.T,g=ae.p;try{ae.p=32>a?32:a,Q.T=null,a=Kd,Kd=null;var _=Vo,A=Zi;if(Pt=0,Rr=Vo=null,Zi=0,(Ke&6)!==0)throw Error(o(331));var I=Ke;if(Ke|=4,wy(_.current),Cy(_,_.current,A,a),Ke=I,il(0,!1),Ht&&typeof Ht.onPostCommitFiberRoot=="function")try{Ht.onPostCommitFiberRoot(zn,_)}catch{}return!0}finally{ae.p=g,Q.T=u,Yy(i,s)}}function Ky(i,s,a){s=Vn(a,s),s=Rd(i.stateNode,s,2),i=Ro(i,s,2),i!==null&&(as(i,2),Mi(i))}function Ze(i,s,a){if(i.tag===3)Ky(i,i,a);else for(;s!==null;){if(s.tag===3){Ky(s,i,a);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(xo===null||!xo.has(u))){i=Vn(a,i),a=Qg(2),u=Ro(s,a,2),u!==null&&(Xg(a,u,s,i),as(u,2),Mi(u));break}}s=s.return}}function Wd(i,s,a){var u=i.pingCache;if(u===null){u=i.pingCache=new sC;var g=new Set;u.set(s,g)}else g=u.get(s),g===void 0&&(g=new Set,u.set(s,g));g.has(a)||(Hd=!0,g.add(a),i=cC.bind(null,i,s,a),s.then(i,i))}function cC(i,s,a){var u=i.pingCache;u!==null&&u.delete(s),i.pingedLanes|=i.suspendedLanes&a,i.warmLanes&=~a,it===i&&(Ve&a)===a&&(pt===4||pt===3&&(Ve&62914560)===Ve&&300>on()-Yu?(Ke&2)===0&&wr(i,0):zd|=a,Ir===Ve&&(Ir=0)),Mi(i)}function Qy(i,s){s===0&&(s=Kl()),i=Es(i,s),i!==null&&(as(i,s),Mi(i))}function fC(i){var s=i.memoizedState,a=0;s!==null&&(a=s.retryLane),Qy(i,a)}function dC(i,s){var a=0;switch(i.tag){case 31:case 13:var u=i.stateNode,g=i.memoizedState;g!==null&&(a=g.retryLane);break;case 19:u=i.stateNode;break;case 22:u=i.stateNode._retryCache;break;default:throw Error(o(314))}u!==null&&u.delete(s),Qy(i,a)}function hC(i,s){return Vt(i,s)}var Zu=null,Nr=null,Zd=!1,ju=!1,jd=!1,Uo=0;function Mi(i){i!==Nr&&i.next===null&&(Nr===null?Zu=Nr=i:Nr=Nr.next=i),ju=!0,Zd||(Zd=!0,mC())}function il(i,s){if(!jd&&ju){jd=!0;do for(var a=!1,u=Zu;u!==null;){if(i!==0){var g=u.pendingLanes;if(g===0)var _=0;else{var A=u.suspendedLanes,I=u.pingedLanes;_=(1<<31-mt(42|i)+1)-1,_&=g&~(A&~I),_=_&201326741?_&201326741|1:_?_|2:0}_!==0&&(a=!0,Zy(u,_))}else _=Ve,_=ci(u,u===it?_:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(_&3)===0||Yn(u,_)||(a=!0,Zy(u,_));u=u.next}while(a);jd=!1}}function pC(){Xy()}function Xy(){ju=Zd=!1;var i=0;Uo!==0&&IC()&&(i=Uo);for(var s=on(),a=null,u=Zu;u!==null;){var g=u.next,_=$y(u,s);_===0?(u.next=null,a===null?Zu=g:a.next=g,g===null&&(Nr=a)):(a=u,(i!==0||(_&3)!==0)&&(ju=!0)),u=g}Pt!==0&&Pt!==5||il(i),Uo!==0&&(Uo=0)}function $y(i,s){for(var a=i.suspendedLanes,u=i.pingedLanes,g=i.expirationTimes,_=i.pendingLanes&-62914561;0<_;){var A=31-mt(_),I=1<<A,x=g[A];x===-1?((I&a)===0||(I&u)!==0)&&(g[A]=Mf(I,s)):x<=s&&(i.expiredLanes|=I),_&=~I}if(s=it,a=Ve,a=ci(i,i===s?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u=i.callbackNode,a===0||i===s&&(We===2||We===9)||i.cancelPendingCommit!==null)return u!==null&&u!==null&&lo(u),i.callbackNode=null,i.callbackPriority=0;if((a&3)===0||Yn(i,a)){if(s=a&-a,s===i.callbackPriority)return s;switch(u!==null&&lo(u),Ui(a)){case 2:case 8:a=ha;break;case 32:a=uo;break;case 268435456:a=Gl;break;default:a=uo}return u=Wy.bind(null,i),a=Vt(a,u),i.callbackPriority=s,i.callbackNode=a,s}return u!==null&&u!==null&&lo(u),i.callbackPriority=2,i.callbackNode=null,2}function Wy(i,s){if(Pt!==0&&Pt!==5)return i.callbackNode=null,i.callbackPriority=0,null;var a=i.callbackNode;if(Wu()&&i.callbackNode!==a)return null;var u=Ve;return u=ci(i,i===it?u:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),u===0?null:(xy(i,u,s),$y(i,on()),i.callbackNode!=null&&i.callbackNode===a?Wy.bind(null,i):null)}function Zy(i,s){if(Wu())return null;xy(i,s,!0)}function mC(){wC(function(){(Ke&6)!==0?Vt(da,pC):Xy()})}function eh(){if(Uo===0){var i=pr;i===0&&(i=li,li<<=1,(li&261888)===0&&(li=256)),Uo=i}return Uo}function jy(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:js(""+i)}function e_(i,s){var a=s.ownerDocument.createElement("input");return a.name=s.name,a.value=s.value,i.id&&a.setAttribute("form",i.id),s.parentNode.insertBefore(a,s),i=new FormData(i),a.parentNode.removeChild(a),i}function gC(i,s,a,u,g){if(s==="submit"&&a&&a.stateNode===g){var _=jy((g[Lt]||null).action),A=u.submitter;A&&(s=(s=A[Lt]||null)?jy(s.formAction):A.getAttribute("formAction"),s!==null&&(_=s,A=null));var I=new Ei("action","action",null,u,g);i.push({event:I,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(Uo!==0){var x=A?e_(g,A):new FormData(g);Td(a,{pending:!0,data:x,method:g.method,action:_},null,x)}}else typeof _=="function"&&(I.preventDefault(),x=A?e_(g,A):new FormData(g),Td(a,{pending:!0,data:x,method:g.method,action:_},_,x))},currentTarget:g}]})}}for(var th=0;th<kf.length;th++){var nh=kf[th],yC=nh.toLowerCase(),_C=nh[0].toUpperCase()+nh.slice(1);jn(yC,"on"+_C)}jn(bm,"onAnimationEnd"),jn(xm,"onAnimationIteration"),jn(Vm,"onAnimationStart"),jn("dblclick","onDoubleClick"),jn("focusin","onFocus"),jn("focusout","onBlur"),jn(PA,"onTransitionRun"),jn(UA,"onTransitionStart"),jn(LA,"onTransitionCancel"),jn(Pm,"onTransitionEnd"),yi("onMouseEnter",["mouseout","mouseover"]),yi("onMouseLeave",["mouseout","mouseover"]),yi("onPointerEnter",["pointerout","pointerover"]),yi("onPointerLeave",["pointerout","pointerover"]),gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),gi("onBeforeInput",["compositionend","keypress","textInput","paste"]),gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vC=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ol));function t_(i,s){s=(s&4)!==0;for(var a=0;a<i.length;a++){var u=i[a],g=u.event;u=u.listeners;e:{var _=void 0;if(s)for(var A=u.length-1;0<=A;A--){var I=u[A],x=I.instance,z=I.currentTarget;if(I=I.listener,x!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=z;try{_(g)}catch($){pu($)}g.currentTarget=null,_=x}else for(A=0;A<u.length;A++){if(I=u[A],x=I.instance,z=I.currentTarget,I=I.listener,x!==_&&g.isPropagationStopped())break e;_=I,g.currentTarget=z;try{_(g)}catch($){pu($)}g.currentTarget=null,_=x}}}}function xe(i,s){var a=s[Qs];a===void 0&&(a=s[Qs]=new Set);var u=i+"__bubble";a.has(u)||(n_(s,i,2,!1),a.add(u))}function ih(i,s,a){var u=0;s&&(u|=4),n_(a,i,u,s)}var ec="_reactListening"+Math.random().toString(36).slice(2);function oh(i){if(!i[ec]){i[ec]=!0,ga.forEach(function(a){a!=="selectionchange"&&(vC.has(a)||ih(a,!1,i),ih(a,!0,i))});var s=i.nodeType===9?i:i.ownerDocument;s===null||s[ec]||(s[ec]=!0,ih("selectionchange",!1,s))}}function n_(i,s,a,u){switch(b_(s)){case 2:var g=KC;break;case 8:g=QC;break;default:g=vh}a=g.bind(null,s,a,i),g=void 0,!hs||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(g=!0),u?g!==void 0?i.addEventListener(s,a,{capture:!0,passive:g}):i.addEventListener(s,a,!0):g!==void 0?i.addEventListener(s,a,{passive:g}):i.addEventListener(s,a,!1)}function sh(i,s,a,u,g){var _=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var A=u.tag;if(A===3||A===4){var I=u.stateNode.containerInfo;if(I===g)break;if(A===4)for(A=u.return;A!==null;){var x=A.tag;if((x===3||x===4)&&A.stateNode.containerInfo===g)return;A=A.return}for(;I!==null;){if(A=pi(I),A===null)return;if(x=A.tag,x===5||x===6||x===26||x===27){u=_=A;continue e}I=I.parentNode}}u=u.return}go(function(){var z=_,$=Nn(a),ee=[];e:{var Y=Um.get(i);if(Y!==void 0){var K=Ei,me=i;switch(i){case"keypress":if(ms(a)===0)break e;case"keydown":case"keyup":K=fu;break;case"focusin":me="focus",K=ys;break;case"focusout":me="blur",K=ys;break;case"beforeblur":case"afterblur":K=ys;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=nu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=E;break;case bm:case xm:case Vm:K=ou;break;case Pm:K=w;break;case"scroll":case"scrollend":K=Ma;break;case"wheel":K=J;break;case"copy":case"cut":case"paste":K=su;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Oi;break;case"toggle":case"beforetoggle":K=we}var Te=(s&4)!==0,nt=!Te&&(i==="scroll"||i==="scrollend"),B=Te?Y!==null?Y+"Capture":null:Y;Te=[];for(var k=z,H;k!==null;){var Z=k;if(H=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||H===null||B===null||(Z=Xn(k,B),Z!=null&&Te.push(sl(k,Z,H))),nt)break;k=k.return}0<Te.length&&(Y=new K(Y,me,null,a,$),ee.push({event:Y,listeners:Te}))}}if((s&7)===0){e:{if(Y=i==="mouseover"||i==="pointerover",K=i==="mouseout"||i==="pointerout",Y&&a!==Ia&&(me=a.relatedTarget||a.fromElement)&&(pi(me)||me[di]))break e;if((K||Y)&&(Y=$.window===$?$:(Y=$.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(me=a.relatedTarget||a.toElement,K=z,me=me?pi(me):null,me!==null&&(nt=l(me),Te=me.tag,me!==nt||Te!==5&&Te!==27&&Te!==6)&&(me=null)):(K=null,me=z),K!==me)){if(Te=Na,Z="onMouseLeave",B="onMouseEnter",k="mouse",(i==="pointerout"||i==="pointerover")&&(Te=Oi,Z="onPointerLeave",B="onPointerEnter",k="pointer"),nt=K==null?Y:_n(K),H=me==null?Y:_n(me),Y=new Te(Z,k+"leave",K,a,$),Y.target=nt,Y.relatedTarget=H,Z=null,pi($)===z&&(Te=new Te(B,k+"enter",me,a,$),Te.target=H,Te.relatedTarget=nt,Z=Te),nt=Z,K&&me)t:{for(Te=TC,B=K,k=me,H=0,Z=B;Z;Z=Te(Z))H++;Z=0;for(var ye=k;ye;ye=Te(ye))Z++;for(;0<H-Z;)B=Te(B),H--;for(;0<Z-H;)k=Te(k),Z--;for(;H--;){if(B===k||k!==null&&B===k.alternate){Te=B;break t}B=Te(B),k=Te(k)}Te=null}else Te=null;K!==null&&i_(ee,Y,K,Te,!1),me!==null&&nt!==null&&i_(ee,nt,me,Te,!0)}}e:{if(Y=z?_n(z):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var He=Tm;else if(_m(Y))if(Em)He=bA;else{He=NA;var ge=MA}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?z&&Zs(z.elementType)&&(He=Tm):He=DA;if(He&&(He=He(i,z))){vm(ee,He,a,$);break e}ge&&ge(i,Y,z),i==="focusout"&&z&&Y.type==="number"&&z.memoizedProps.value!=null&&Sa(Y,"number",Y.value)}switch(ge=z?_n(z):window,i){case"focusin":(_m(ge)||ge.contentEditable==="true")&&(rr=ge,Pf=z,Pa=null);break;case"focusout":Pa=Pf=rr=null;break;case"mousedown":Uf=!0;break;case"contextmenu":case"mouseup":case"dragend":Uf=!1,Nm(ee,a,$);break;case"selectionchange":if(VA)break;case"keydown":case"keyup":Nm(ee,a,$)}var De;if(Je)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else sr?_s(i,a)&&(Pe="onCompositionEnd"):i==="keydown"&&a.keyCode===229&&(Pe="onCompositionStart");Pe&&(Ci&&a.locale!=="ko"&&(sr||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&sr&&(De=wa()):(Ti=$,Ra="value"in Ti?Ti.value:Ti.textContent,sr=!0)),ge=tc(z,Pe),0<ge.length&&(Pe=new Ai(Pe,i,null,a,$),ee.push({event:Pe,listeners:ge}),De?Pe.data=De:(De=or(a),De!==null&&(Pe.data=De)))),(De=bn?CA(i,a):IA(i,a))&&(Pe=tc(z,"onBeforeInput"),0<Pe.length&&(ge=new Ai("onBeforeInput","beforeinput",null,a,$),ee.push({event:ge,listeners:Pe}),ge.data=De)),gC(ee,i,z,a,$)}t_(ee,s)})}function sl(i,s,a){return{instance:i,listener:s,currentTarget:a}}function tc(i,s){for(var a=s+"Capture",u=[];i!==null;){var g=i,_=g.stateNode;if(g=g.tag,g!==5&&g!==26&&g!==27||_===null||(g=Xn(i,a),g!=null&&u.unshift(sl(i,g,_)),g=Xn(i,s),g!=null&&u.push(sl(i,g,_))),i.tag===3)return u;i=i.return}return[]}function TC(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function i_(i,s,a,u,g){for(var _=s._reactName,A=[];a!==null&&a!==u;){var I=a,x=I.alternate,z=I.stateNode;if(I=I.tag,x!==null&&x===u)break;I!==5&&I!==26&&I!==27||z===null||(x=z,g?(z=Xn(a,_),z!=null&&A.unshift(sl(a,z,x))):g||(z=Xn(a,_),z!=null&&A.push(sl(a,z,x)))),a=a.return}A.length!==0&&i.push({event:s,listeners:A})}var EC=/\r\n?/g,SC=/\u0000|\uFFFD/g;function o_(i){return(typeof i=="string"?i:""+i).replace(EC,`
`).replace(SC,"")}function s_(i,s){return s=o_(s),o_(i)===s}function tt(i,s,a,u,g,_){switch(a){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||cn(i,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&cn(i,""+u);break;case"className":vn(i,"class",u);break;case"tabIndex":vn(i,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":vn(i,a,u);break;case"style":Ca(i,u,_);break;case"data":if(s!=="object"){vn(i,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||a!=="href")){i.removeAttribute(a);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=js(""+u),i.setAttribute(a,u);break;case"action":case"formAction":if(typeof u=="function"){i.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof _=="function"&&(a==="formAction"?(s!=="input"&&tt(i,s,"name",g.name,g,null),tt(i,s,"formEncType",g.formEncType,g,null),tt(i,s,"formMethod",g.formMethod,g,null),tt(i,s,"formTarget",g.formTarget,g,null)):(tt(i,s,"encType",g.encType,g,null),tt(i,s,"method",g.method,g,null),tt(i,s,"target",g.target,g,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){i.removeAttribute(a);break}u=js(""+u),i.setAttribute(a,u);break;case"onClick":u!=null&&(i.onclick=Qn);break;case"onScroll":u!=null&&xe("scroll",i);break;case"onScrollEnd":u!=null&&xe("scrollend",i);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"multiple":i.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":i.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){i.removeAttribute("xlink:href");break}a=js(""+u),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""+u):i.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,""):i.removeAttribute(a);break;case"capture":case"download":u===!0?i.setAttribute(a,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?i.setAttribute(a,u):i.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?i.setAttribute(a,u):i.removeAttribute(a);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?i.removeAttribute(a):i.setAttribute(a,u);break;case"popover":xe("beforetoggle",i),xe("toggle",i),$s(i,"popover",u);break;case"xlinkActuate":Ct(i,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Ct(i,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Ct(i,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Ct(i,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Ct(i,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Ct(i,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Ct(i,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":$s(i,"is",u);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=tu.get(a)||a,$s(i,a,u))}}function rh(i,s,a,u,g,_){switch(a){case"style":Ca(i,u,_);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(o(61));if(a=u.__html,a!=null){if(g.children!=null)throw Error(o(60));i.innerHTML=a}}break;case"children":typeof u=="string"?cn(i,u):(typeof u=="number"||typeof u=="bigint")&&cn(i,""+u);break;case"onScroll":u!=null&&xe("scroll",i);break;case"onScrollEnd":u!=null&&xe("scrollend",i);break;case"onClick":u!=null&&(i.onclick=Qn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ya.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(g=a.endsWith("Capture"),s=a.slice(2,g?a.length-7:void 0),_=i[Lt]||null,_=_!=null?_[a]:null,typeof _=="function"&&i.removeEventListener(s,_,g),typeof u=="function")){typeof _!="function"&&_!==null&&(a in i?i[a]=null:i.hasAttribute(a)&&i.removeAttribute(a)),i.addEventListener(s,u,g);break e}a in i?i[a]=u:u===!0?i.setAttribute(a,""):$s(i,a,u)}}}function Qt(i,s,a){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":xe("error",i),xe("load",i);var u=!1,g=!1,_;for(_ in a)if(a.hasOwnProperty(_)){var A=a[_];if(A!=null)switch(_){case"src":u=!0;break;case"srcSet":g=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:tt(i,s,_,A,a,null)}}g&&tt(i,s,"srcSet",a.srcSet,a,null),u&&tt(i,s,"src",a.src,a,null);return;case"input":xe("invalid",i);var I=_=A=g=null,x=null,z=null;for(u in a)if(a.hasOwnProperty(u)){var $=a[u];if($!=null)switch(u){case"name":g=$;break;case"type":A=$;break;case"checked":x=$;break;case"defaultChecked":z=$;break;case"value":_=$;break;case"defaultValue":I=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(o(137,s));break;default:tt(i,s,u,$,a,null)}}Zl(i,_,I,x,z,A,g,!1);return;case"select":xe("invalid",i),u=A=_=null;for(g in a)if(a.hasOwnProperty(g)&&(I=a[g],I!=null))switch(g){case"value":_=I;break;case"defaultValue":A=I;break;case"multiple":u=I;default:tt(i,s,g,I,a,null)}s=_,a=A,i.multiple=!!u,s!=null?fo(i,!!u,s,!1):a!=null&&fo(i,!!u,a,!0);return;case"textarea":xe("invalid",i),_=g=u=null;for(A in a)if(a.hasOwnProperty(A)&&(I=a[A],I!=null))switch(A){case"value":u=I;break;case"defaultValue":g=I;break;case"children":_=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(91));break;default:tt(i,s,A,I,a,null)}ho(i,u,g,_);return;case"option":for(x in a)if(a.hasOwnProperty(x)&&(u=a[x],u!=null))switch(x){case"selected":i.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(i,s,x,u,a,null)}return;case"dialog":xe("beforetoggle",i),xe("toggle",i),xe("cancel",i),xe("close",i);break;case"iframe":case"object":xe("load",i);break;case"video":case"audio":for(u=0;u<ol.length;u++)xe(ol[u],i);break;case"image":xe("error",i),xe("load",i);break;case"details":xe("toggle",i);break;case"embed":case"source":case"link":xe("error",i),xe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(z in a)if(a.hasOwnProperty(z)&&(u=a[z],u!=null))switch(z){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,s));default:tt(i,s,z,u,a,null)}return;default:if(Zs(s)){for($ in a)a.hasOwnProperty($)&&(u=a[$],u!==void 0&&rh(i,s,$,u,a,void 0));return}}for(I in a)a.hasOwnProperty(I)&&(u=a[I],u!=null&&tt(i,s,I,u,a,null))}function AC(i,s,a,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var g=null,_=null,A=null,I=null,x=null,z=null,$=null;for(K in a){var ee=a[K];if(a.hasOwnProperty(K)&&ee!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":x=ee;default:u.hasOwnProperty(K)||tt(i,s,K,null,u,ee)}}for(var Y in u){var K=u[Y];if(ee=a[Y],u.hasOwnProperty(Y)&&(K!=null||ee!=null))switch(Y){case"type":_=K;break;case"name":g=K;break;case"checked":z=K;break;case"defaultChecked":$=K;break;case"value":A=K;break;case"defaultValue":I=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(o(137,s));break;default:K!==ee&&tt(i,s,Y,K,u,ee)}}Ws(i,A,I,x,z,$,_,g);return;case"select":K=A=I=Y=null;for(_ in a)if(x=a[_],a.hasOwnProperty(_)&&x!=null)switch(_){case"value":break;case"multiple":K=x;default:u.hasOwnProperty(_)||tt(i,s,_,null,u,x)}for(g in u)if(_=u[g],x=a[g],u.hasOwnProperty(g)&&(_!=null||x!=null))switch(g){case"value":Y=_;break;case"defaultValue":I=_;break;case"multiple":A=_;default:_!==x&&tt(i,s,g,_,u,x)}s=I,a=A,u=K,Y!=null?fo(i,!!a,Y,!1):!!u!=!!a&&(s!=null?fo(i,!!a,s,!0):fo(i,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(I in a)if(g=a[I],a.hasOwnProperty(I)&&g!=null&&!u.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:tt(i,s,I,null,u,g)}for(A in u)if(g=u[A],_=a[A],u.hasOwnProperty(A)&&(g!=null||_!=null))switch(A){case"value":Y=g;break;case"defaultValue":K=g;break;case"children":break;case"dangerouslySetInnerHTML":if(g!=null)throw Error(o(91));break;default:g!==_&&tt(i,s,A,g,u,_)}jl(i,Y,K);return;case"option":for(var me in a)if(Y=a[me],a.hasOwnProperty(me)&&Y!=null&&!u.hasOwnProperty(me))switch(me){case"selected":i.selected=!1;break;default:tt(i,s,me,null,u,Y)}for(x in u)if(Y=u[x],K=a[x],u.hasOwnProperty(x)&&Y!==K&&(Y!=null||K!=null))switch(x){case"selected":i.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:tt(i,s,x,Y,u,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Te in a)Y=a[Te],a.hasOwnProperty(Te)&&Y!=null&&!u.hasOwnProperty(Te)&&tt(i,s,Te,null,u,Y);for(z in u)if(Y=u[z],K=a[z],u.hasOwnProperty(z)&&Y!==K&&(Y!=null||K!=null))switch(z){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,s));break;default:tt(i,s,z,Y,u,K)}return;default:if(Zs(s)){for(var nt in a)Y=a[nt],a.hasOwnProperty(nt)&&Y!==void 0&&!u.hasOwnProperty(nt)&&rh(i,s,nt,void 0,u,Y);for($ in u)Y=u[$],K=a[$],!u.hasOwnProperty($)||Y===K||Y===void 0&&K===void 0||rh(i,s,$,Y,u,K);return}}for(var B in a)Y=a[B],a.hasOwnProperty(B)&&Y!=null&&!u.hasOwnProperty(B)&&tt(i,s,B,null,u,Y);for(ee in u)Y=u[ee],K=a[ee],!u.hasOwnProperty(ee)||Y===K||Y==null&&K==null||tt(i,s,ee,Y,u,K)}function r_(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function CC(){if(typeof performance.getEntriesByType=="function"){for(var i=0,s=0,a=performance.getEntriesByType("resource"),u=0;u<a.length;u++){var g=a[u],_=g.transferSize,A=g.initiatorType,I=g.duration;if(_&&I&&r_(A)){for(A=0,I=g.responseEnd,u+=1;u<a.length;u++){var x=a[u],z=x.startTime;if(z>I)break;var $=x.transferSize,ee=x.initiatorType;$&&r_(ee)&&(x=x.responseEnd,A+=$*(x<I?1:(I-z)/(x-z)))}if(--u,s+=8*(_+A)/(g.duration/1e3),i++,10<i)break}}if(0<i)return s/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var ah=null,lh=null;function nc(i){return i.nodeType===9?i:i.ownerDocument}function a_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function l_(i,s){if(i===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&s==="foreignObject"?0:i}function uh(i,s){return i==="textarea"||i==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ch=null;function IC(){var i=window.event;return i&&i.type==="popstate"?i===ch?!1:(ch=i,!0):(ch=null,!1)}var u_=typeof setTimeout=="function"?setTimeout:void 0,RC=typeof clearTimeout=="function"?clearTimeout:void 0,c_=typeof Promise=="function"?Promise:void 0,wC=typeof queueMicrotask=="function"?queueMicrotask:typeof c_<"u"?function(i){return c_.resolve(null).then(i).catch(MC)}:u_;function MC(i){setTimeout(function(){throw i})}function Lo(i){return i==="head"}function f_(i,s){var a=s,u=0;do{var g=a.nextSibling;if(i.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"||a==="/&"){if(u===0){i.removeChild(g),Vr(s);return}u--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")u++;else if(a==="html")rl(i.ownerDocument.documentElement);else if(a==="head"){a=i.ownerDocument.head,rl(a);for(var _=a.firstChild;_;){var A=_.nextSibling,I=_.nodeName;_[hi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&_.rel.toLowerCase()==="stylesheet"||a.removeChild(_),_=A}}else a==="body"&&rl(i.ownerDocument.body);a=g}while(a);Vr(s)}function d_(i,s){var a=i;i=0;do{var u=a.nextSibling;if(a.nodeType===1?s?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(s?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),u&&u.nodeType===8)if(a=u.data,a==="/$"){if(i===0)break;i--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||i++;a=u}while(a)}function fh(i){var s=i.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var a=s;switch(s=s.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fh(a),Xs(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}i.removeChild(a)}}function NC(i,s,a,u){for(;i.nodeType===1;){var g=a;if(i.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(u){if(!i[hi])switch(s){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(_=i.getAttribute("rel"),_==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(_!==g.rel||i.getAttribute("href")!==(g.href==null||g.href===""?null:g.href)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin)||i.getAttribute("title")!==(g.title==null?null:g.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(_=i.getAttribute("src"),(_!==(g.src==null?null:g.src)||i.getAttribute("type")!==(g.type==null?null:g.type)||i.getAttribute("crossorigin")!==(g.crossOrigin==null?null:g.crossOrigin))&&_&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(s==="input"&&i.type==="hidden"){var _=g.name==null?null:""+g.name;if(g.type==="hidden"&&i.getAttribute("name")===_)return i}else return i;if(i=On(i.nextSibling),i===null)break}return null}function DC(i,s,a){if(s==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=On(i.nextSibling),i===null))return null;return i}function h_(i,s){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!s||(i=On(i.nextSibling),i===null))return null;return i}function dh(i){return i.data==="$?"||i.data==="$~"}function hh(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function bC(i,s){var a=i.ownerDocument;if(i.data==="$~")i._reactRetry=s;else if(i.data!=="$?"||a.readyState!=="loading")s();else{var u=function(){s(),a.removeEventListener("DOMContentLoaded",u)};a.addEventListener("DOMContentLoaded",u),i._reactRetry=u}}function On(i){for(;i!=null;i=i.nextSibling){var s=i.nodeType;if(s===1||s===3)break;if(s===8){if(s=i.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return i}var ph=null;function p_(i){i=i.nextSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="/$"||a==="/&"){if(s===0)return On(i.nextSibling);s--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||s++}i=i.nextSibling}return null}function m_(i){i=i.previousSibling;for(var s=0;i;){if(i.nodeType===8){var a=i.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(s===0)return i;s--}else a!=="/$"&&a!=="/&"||s++}i=i.previousSibling}return null}function g_(i,s,a){switch(s=nc(a),i){case"html":if(i=s.documentElement,!i)throw Error(o(452));return i;case"head":if(i=s.head,!i)throw Error(o(453));return i;case"body":if(i=s.body,!i)throw Error(o(454));return i;default:throw Error(o(451))}}function rl(i){for(var s=i.attributes;s.length;)i.removeAttributeNode(s[0]);Xs(i)}var qn=new Map,y_=new Set;function ic(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var ji=ae.d;ae.d={f:xC,r:VC,D:PC,C:UC,L:LC,m:kC,X:qC,S:OC,M:FC};function xC(){var i=ji.f(),s=Qu();return i||s}function VC(i){var s=Mn(i);s!==null&&s.tag===5&&s.type==="form"?Pg(s):ji.r(i)}var Dr=typeof document>"u"?null:document;function __(i,s,a){var u=Dr;if(u&&typeof s=="string"&&s){var g=un(s);g='link[rel="'+i+'"][href="'+g+'"]',typeof a=="string"&&(g+='[crossorigin="'+a+'"]'),y_.has(g)||(y_.add(g),i={rel:i,crossOrigin:a,href:s},u.querySelector(g)===null&&(s=u.createElement("link"),Qt(s,"link",i),At(s),u.head.appendChild(s)))}}function PC(i){ji.D(i),__("dns-prefetch",i,null)}function UC(i,s){ji.C(i,s),__("preconnect",i,s)}function LC(i,s,a){ji.L(i,s,a);var u=Dr;if(u&&i&&s){var g='link[rel="preload"][as="'+un(s)+'"]';s==="image"&&a&&a.imageSrcSet?(g+='[imagesrcset="'+un(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(g+='[imagesizes="'+un(a.imageSizes)+'"]')):g+='[href="'+un(i)+'"]';var _=g;switch(s){case"style":_=br(i);break;case"script":_=xr(i)}qn.has(_)||(i=T({rel:"preload",href:s==="image"&&a&&a.imageSrcSet?void 0:i,as:s},a),qn.set(_,i),u.querySelector(g)!==null||s==="style"&&u.querySelector(al(_))||s==="script"&&u.querySelector(ll(_))||(s=u.createElement("link"),Qt(s,"link",i),At(s),u.head.appendChild(s)))}}function kC(i,s){ji.m(i,s);var a=Dr;if(a&&i){var u=s&&typeof s.as=="string"?s.as:"script",g='link[rel="modulepreload"][as="'+un(u)+'"][href="'+un(i)+'"]',_=g;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":_=xr(i)}if(!qn.has(_)&&(i=T({rel:"modulepreload",href:i},s),qn.set(_,i),a.querySelector(g)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(ll(_)))return}u=a.createElement("link"),Qt(u,"link",i),At(u),a.head.appendChild(u)}}}function OC(i,s,a){ji.S(i,s,a);var u=Dr;if(u&&i){var g=mi(u).hoistableStyles,_=br(i);s=s||"default";var A=g.get(_);if(!A){var I={loading:0,preload:null};if(A=u.querySelector(al(_)))I.loading=5;else{i=T({rel:"stylesheet",href:i,"data-precedence":s},a),(a=qn.get(_))&&mh(i,a);var x=A=u.createElement("link");At(x),Qt(x,"link",i),x._p=new Promise(function(z,$){x.onload=z,x.onerror=$}),x.addEventListener("load",function(){I.loading|=1}),x.addEventListener("error",function(){I.loading|=2}),I.loading|=4,oc(A,s,u)}A={type:"stylesheet",instance:A,count:1,state:I},g.set(_,A)}}}function qC(i,s){ji.X(i,s);var a=Dr;if(a&&i){var u=mi(a).hoistableScripts,g=xr(i),_=u.get(g);_||(_=a.querySelector(ll(g)),_||(i=T({src:i,async:!0},s),(s=qn.get(g))&&gh(i,s),_=a.createElement("script"),At(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function FC(i,s){ji.M(i,s);var a=Dr;if(a&&i){var u=mi(a).hoistableScripts,g=xr(i),_=u.get(g);_||(_=a.querySelector(ll(g)),_||(i=T({src:i,async:!0,type:"module"},s),(s=qn.get(g))&&gh(i,s),_=a.createElement("script"),At(_),Qt(_,"link",i),a.head.appendChild(_)),_={type:"script",instance:_,count:1,state:null},u.set(g,_))}}function v_(i,s,a,u){var g=(g=Ne.current)?ic(g):null;if(!g)throw Error(o(446));switch(i){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(s=br(a.href),a=mi(g).hoistableStyles,u=a.get(s),u||(u={type:"style",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){i=br(a.href);var _=mi(g).hoistableStyles,A=_.get(i);if(A||(g=g.ownerDocument||g,A={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},_.set(i,A),(_=g.querySelector(al(i)))&&!_._p&&(A.instance=_,A.state.loading=5),qn.has(i)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},qn.set(i,a),_||BC(g,i,a,A.state))),s&&u===null)throw Error(o(528,""));return A}if(s&&u!==null)throw Error(o(529,""));return null;case"script":return s=a.async,a=a.src,typeof a=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=xr(a),a=mi(g).hoistableScripts,u=a.get(s),u||(u={type:"script",instance:null,count:0,state:null},a.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,i))}}function br(i){return'href="'+un(i)+'"'}function al(i){return'link[rel="stylesheet"]['+i+"]"}function T_(i){return T({},i,{"data-precedence":i.precedence,precedence:null})}function BC(i,s,a,u){i.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=i.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Qt(s,"link",a),At(s),i.head.appendChild(s))}function xr(i){return'[src="'+un(i)+'"]'}function ll(i){return"script[async]"+i}function E_(i,s,a){if(s.count++,s.instance===null)switch(s.type){case"style":var u=i.querySelector('style[data-href~="'+un(a.href)+'"]');if(u)return s.instance=u,At(u),u;var g=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return u=(i.ownerDocument||i).createElement("style"),At(u),Qt(u,"style",g),oc(u,a.precedence,i),s.instance=u;case"stylesheet":g=br(a.href);var _=i.querySelector(al(g));if(_)return s.state.loading|=4,s.instance=_,At(_),_;u=T_(a),(g=qn.get(g))&&mh(u,g),_=(i.ownerDocument||i).createElement("link"),At(_);var A=_;return A._p=new Promise(function(I,x){A.onload=I,A.onerror=x}),Qt(_,"link",u),s.state.loading|=4,oc(_,a.precedence,i),s.instance=_;case"script":return _=xr(a.src),(g=i.querySelector(ll(_)))?(s.instance=g,At(g),g):(u=a,(g=qn.get(_))&&(u=T({},a),gh(u,g)),i=i.ownerDocument||i,g=i.createElement("script"),At(g),Qt(g,"link",u),i.head.appendChild(g),s.instance=g);case"void":return null;default:throw Error(o(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,oc(u,a.precedence,i));return s.instance}function oc(i,s,a){for(var u=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),g=u.length?u[u.length-1]:null,_=g,A=0;A<u.length;A++){var I=u[A];if(I.dataset.precedence===s)_=I;else if(_!==g)break}_?_.parentNode.insertBefore(i,_.nextSibling):(s=a.nodeType===9?a.head:a,s.insertBefore(i,s.firstChild))}function mh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.title==null&&(i.title=s.title)}function gh(i,s){i.crossOrigin==null&&(i.crossOrigin=s.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=s.referrerPolicy),i.integrity==null&&(i.integrity=s.integrity)}var sc=null;function S_(i,s,a){if(sc===null){var u=new Map,g=sc=new Map;g.set(a,u)}else g=sc,u=g.get(a),u||(u=new Map,g.set(a,u));if(u.has(i))return u;for(u.set(i,null),a=a.getElementsByTagName(i),g=0;g<a.length;g++){var _=a[g];if(!(_[hi]||_[St]||i==="link"&&_.getAttribute("rel")==="stylesheet")&&_.namespaceURI!=="http://www.w3.org/2000/svg"){var A=_.getAttribute(s)||"";A=i+A;var I=u.get(A);I?I.push(_):u.set(A,[_])}}return u}function A_(i,s,a){i=i.ownerDocument||i,i.head.insertBefore(a,s==="title"?i.querySelector("head > title"):null)}function GC(i,s,a){if(a===1||s.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return i=s.disabled,typeof s.precedence=="string"&&i==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function C_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function HC(i,s,a,u){if(a.type==="stylesheet"&&(typeof u.media!="string"||matchMedia(u.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var g=br(u.href),_=s.querySelector(al(g));if(_){s=_._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(i.count++,i=rc.bind(i),s.then(i,i)),a.state.loading|=4,a.instance=_,At(_);return}_=s.ownerDocument||s,u=T_(u),(g=qn.get(g))&&mh(u,g),_=_.createElement("link"),At(_);var A=_;A._p=new Promise(function(I,x){A.onload=I,A.onerror=x}),Qt(_,"link",u),a.instance=_}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(a,s),(s=a.state.preload)&&(a.state.loading&3)===0&&(i.count++,a=rc.bind(i),s.addEventListener("load",a),s.addEventListener("error",a))}}var yh=0;function zC(i,s){return i.stylesheets&&i.count===0&&lc(i,i.stylesheets),0<i.count||0<i.imgCount?function(a){var u=setTimeout(function(){if(i.stylesheets&&lc(i,i.stylesheets),i.unsuspend){var _=i.unsuspend;i.unsuspend=null,_()}},6e4+s);0<i.imgBytes&&yh===0&&(yh=62500*CC());var g=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&lc(i,i.stylesheets),i.unsuspend)){var _=i.unsuspend;i.unsuspend=null,_()}},(i.imgBytes>yh?50:800)+s);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(u),clearTimeout(g)}}:null}function rc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)lc(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var ac=null;function lc(i,s){i.stylesheets=null,i.unsuspend!==null&&(i.count++,ac=new Map,s.forEach(YC,i),ac=null,rc.call(i))}function YC(i,s){if(!(s.state.loading&4)){var a=ac.get(i);if(a)var u=a.get(null);else{a=new Map,ac.set(i,a);for(var g=i.querySelectorAll("link[data-precedence],style[data-precedence]"),_=0;_<g.length;_++){var A=g[_];(A.nodeName==="LINK"||A.getAttribute("media")!=="not all")&&(a.set(A.dataset.precedence,A),u=A)}u&&a.set(null,u)}g=s.instance,A=g.getAttribute("data-precedence"),_=a.get(A)||u,_===u&&a.set(null,g),a.set(A,g),this.count++,u=rc.bind(this),g.addEventListener("load",u),g.addEventListener("error",u),_?_.parentNode.insertBefore(g,_.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(g,i.firstChild)),s.state.loading|=4}}var ul={$$typeof:W,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function JC(i,s,a,u,g,_,A,I,x){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=fi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fi(0),this.hiddenUpdates=fi(null),this.identifierPrefix=u,this.onUncaughtError=g,this.onCaughtError=_,this.onRecoverableError=A,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=x,this.incompleteTransitions=new Map}function I_(i,s,a,u,g,_,A,I,x,z,$,ee){return i=new JC(i,s,a,A,x,z,$,ee,I),s=1,_===!0&&(s|=24),_=En(3,null,null,s),i.current=_,_.stateNode=i,s=$f(),s.refCount++,i.pooledCache=s,s.refCount++,_.memoizedState={element:u,isDehydrated:a,cache:s},ed(_),i}function R_(i){return i?(i=ur,i):ur}function w_(i,s,a,u,g,_){g=R_(g),u.context===null?u.context=g:u.pendingContext=g,u=Io(s),u.payload={element:a},_=_===void 0?null:_,_!==null&&(u.callback=_),a=Ro(i,u,s),a!==null&&(mn(a,i,s),Ba(a,i,s))}function M_(i,s){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var a=i.retryLane;i.retryLane=a!==0&&a<s?a:s}}function _h(i,s){M_(i,s),(i=i.alternate)&&M_(i,s)}function N_(i){if(i.tag===13||i.tag===31){var s=Es(i,67108864);s!==null&&mn(s,i,67108864),_h(i,67108864)}}function D_(i){if(i.tag===13||i.tag===31){var s=Rn();s=us(s);var a=Es(i,s);a!==null&&mn(a,i,s),_h(i,s)}}var uc=!0;function KC(i,s,a,u){var g=Q.T;Q.T=null;var _=ae.p;try{ae.p=2,vh(i,s,a,u)}finally{ae.p=_,Q.T=g}}function QC(i,s,a,u){var g=Q.T;Q.T=null;var _=ae.p;try{ae.p=8,vh(i,s,a,u)}finally{ae.p=_,Q.T=g}}function vh(i,s,a,u){if(uc){var g=Th(u);if(g===null)sh(i,s,u,cc,a),x_(i,u);else if($C(g,i,s,a,u))u.stopPropagation();else if(x_(i,u),s&4&&-1<XC.indexOf(i)){for(;g!==null;){var _=Mn(g);if(_!==null)switch(_.tag){case 3:if(_=_.stateNode,_.current.memoizedState.isDehydrated){var A=ui(_.pendingLanes);if(A!==0){var I=_;for(I.pendingLanes|=2,I.entangledLanes|=2;A;){var x=1<<31-mt(A);I.entanglements[1]|=x,A&=~x}Mi(_),(Ke&6)===0&&(Ju=on()+500,il(0))}}break;case 31:case 13:I=Es(_,2),I!==null&&mn(I,_,2),Qu(),_h(_,2)}if(_=Th(u),_===null&&sh(i,s,u,cc,a),_===g)break;g=_}g!==null&&u.stopPropagation()}else sh(i,s,u,null,a)}}function Th(i){return i=Nn(i),Eh(i)}var cc=null;function Eh(i){if(cc=null,i=pi(i),i!==null){var s=l(i);if(s===null)i=null;else{var a=s.tag;if(a===13){if(i=c(s),i!==null)return i;i=null}else if(a===31){if(i=h(s),i!==null)return i;i=null}else if(a===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;i=null}else s!==i&&(i=null)}}return cc=i,null}function b_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ss()){case da:return 2;case ha:return 8;case uo:case wf:return 32;case Gl:return 268435456;default:return 32}default:return 32}}var Sh=!1,ko=null,Oo=null,qo=null,cl=new Map,fl=new Map,Fo=[],XC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function x_(i,s){switch(i){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Oo=null;break;case"mouseover":case"mouseout":qo=null;break;case"pointerover":case"pointerout":cl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":fl.delete(s.pointerId)}}function dl(i,s,a,u,g,_){return i===null||i.nativeEvent!==_?(i={blockedOn:s,domEventName:a,eventSystemFlags:u,nativeEvent:_,targetContainers:[g]},s!==null&&(s=Mn(s),s!==null&&N_(s)),i):(i.eventSystemFlags|=u,s=i.targetContainers,g!==null&&s.indexOf(g)===-1&&s.push(g),i)}function $C(i,s,a,u,g){switch(s){case"focusin":return ko=dl(ko,i,s,a,u,g),!0;case"dragenter":return Oo=dl(Oo,i,s,a,u,g),!0;case"mouseover":return qo=dl(qo,i,s,a,u,g),!0;case"pointerover":var _=g.pointerId;return cl.set(_,dl(cl.get(_)||null,i,s,a,u,g)),!0;case"gotpointercapture":return _=g.pointerId,fl.set(_,dl(fl.get(_)||null,i,s,a,u,g)),!0}return!1}function V_(i){var s=pi(i.target);if(s!==null){var a=l(s);if(a!==null){if(s=a.tag,s===13){if(s=c(a),s!==null){i.blockedOn=s,Jn(i.priority,function(){D_(a)});return}}else if(s===31){if(s=h(a),s!==null){i.blockedOn=s,Jn(i.priority,function(){D_(a)});return}}else if(s===3&&a.stateNode.current.memoizedState.isDehydrated){i.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}i.blockedOn=null}function fc(i){if(i.blockedOn!==null)return!1;for(var s=i.targetContainers;0<s.length;){var a=Th(i.nativeEvent);if(a===null){a=i.nativeEvent;var u=new a.constructor(a.type,a);Ia=u,a.target.dispatchEvent(u),Ia=null}else return s=Mn(a),s!==null&&N_(s),i.blockedOn=a,!1;s.shift()}return!0}function P_(i,s,a){fc(i)&&a.delete(s)}function WC(){Sh=!1,ko!==null&&fc(ko)&&(ko=null),Oo!==null&&fc(Oo)&&(Oo=null),qo!==null&&fc(qo)&&(qo=null),cl.forEach(P_),fl.forEach(P_)}function dc(i,s){i.blockedOn===s&&(i.blockedOn=null,Sh||(Sh=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,WC)))}var hc=null;function U_(i){hc!==i&&(hc=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){hc===i&&(hc=null);for(var s=0;s<i.length;s+=3){var a=i[s],u=i[s+1],g=i[s+2];if(typeof u!="function"){if(Eh(u||a)===null)continue;break}var _=Mn(a);_!==null&&(i.splice(s,3),s-=3,Td(_,{pending:!0,data:g,method:a.method,action:u},u,g))}}))}function Vr(i){function s(x){return dc(x,i)}ko!==null&&dc(ko,i),Oo!==null&&dc(Oo,i),qo!==null&&dc(qo,i),cl.forEach(s),fl.forEach(s);for(var a=0;a<Fo.length;a++){var u=Fo[a];u.blockedOn===i&&(u.blockedOn=null)}for(;0<Fo.length&&(a=Fo[0],a.blockedOn===null);)V_(a),a.blockedOn===null&&Fo.shift();if(a=(i.ownerDocument||i).$$reactFormReplay,a!=null)for(u=0;u<a.length;u+=3){var g=a[u],_=a[u+1],A=g[Lt]||null;if(typeof _=="function")A||U_(a);else if(A){var I=null;if(_&&_.hasAttribute("formAction")){if(g=_,A=_[Lt]||null)I=A.formAction;else if(Eh(g)!==null)continue}else I=A.action;typeof I=="function"?a[u+1]=I:(a.splice(u,3),u-=3),U_(a)}}}function L_(){function i(_){_.canIntercept&&_.info==="react-transition"&&_.intercept({handler:function(){return new Promise(function(A){return g=A})},focusReset:"manual",scroll:"manual"})}function s(){g!==null&&(g(),g=null),u||setTimeout(a,20)}function a(){if(!u&&!navigation.transition){var _=navigation.currentEntry;_&&_.url!=null&&navigation.navigate(_.url,{state:_.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var u=!1,g=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(a,100),function(){u=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),g!==null&&(g(),g=null)}}}function Ah(i){this._internalRoot=i}pc.prototype.render=Ah.prototype.render=function(i){var s=this._internalRoot;if(s===null)throw Error(o(409));var a=s.current,u=Rn();w_(a,u,i,s,null,null)},pc.prototype.unmount=Ah.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var s=i.containerInfo;w_(i.current,2,null,i,null,null),Qu(),s[di]=null}};function pc(i){this._internalRoot=i}pc.prototype.unstable_scheduleHydration=function(i){if(i){var s=Ql();i={blockedOn:null,target:i,priority:s};for(var a=0;a<Fo.length&&s!==0&&s<Fo[a].priority;a++);Fo.splice(a,0,i),a===0&&V_(i)}};var k_=e.version;if(k_!=="19.2.3")throw Error(o(527,k_,"19.2.3"));ae.findDOMNode=function(i){var s=i._reactInternals;if(s===void 0)throw typeof i.render=="function"?Error(o(188)):(i=Object.keys(i).join(","),Error(o(268,i)));return i=m(s),i=i!==null?v(i):null,i=i===null?null:i.stateNode,i};var ZC={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{zn=mc.inject(ZC),Ht=mc}catch{}}return pl.createRoot=function(i,s){if(!r(i))throw Error(o(299));var a=!1,u="",g=zg,_=Yg,A=Jg;return s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(g=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(A=s.onRecoverableError)),s=I_(i,1,!1,null,null,a,u,null,g,_,A,L_),i[di]=s.current,oh(i),new Ah(s)},pl.hydrateRoot=function(i,s,a){if(!r(i))throw Error(o(299));var u=!1,g="",_=zg,A=Yg,I=Jg,x=null;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onUncaughtError!==void 0&&(_=a.onUncaughtError),a.onCaughtError!==void 0&&(A=a.onCaughtError),a.onRecoverableError!==void 0&&(I=a.onRecoverableError),a.formState!==void 0&&(x=a.formState)),s=I_(i,1,!0,s,a??null,u,g,x,_,A,I,L_),s.context=R_(null),a=s.current,u=Rn(),u=us(u),g=Io(u),g.callback=null,Ro(a,g,u),a=u,s.current.lanes=a,as(s,a),Mi(s),i[di]=s.current,oh(i),new pc(s)},pl.version="19.2.3",pl}var K_;function uI(){if(K_)return Rh.exports;K_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Rh.exports=lI(),Rh.exports}var cI=uI();const fI=GT(cI),dI=[{id:"happy",nameKey:"mood_happy",descKey:"mood_happy_desc",color:"yellow"},{id:"sad",nameKey:"mood_sad",descKey:"mood_sad_desc",color:"blue"},{id:"energetic",nameKey:"mood_energetic",descKey:"mood_energetic_desc",color:"orange"},{id:"relaxed",nameKey:"mood_relaxed",descKey:"mood_relaxed_desc",color:"green"},{id:"stressed",nameKey:"mood_stressed",descKey:"mood_stressed_desc",color:"red"},{id:"creative",nameKey:"mood_creative",descKey:"mood_creative_desc",color:"purple"}],HT={en:{app_title:"Find Your Spark",app_tagline:"Your Personal Inspiration Engine. Tailored To How You Feel.",intro_desc:"Discover Personalized Ideas And Inspiration Perfectly Matched To Your Current Mood. Ready To Begin?",get_started:"Get Started",how_feeling:"How Are You Feeling Today?",change_mood:"Change Mood",community_archive:"Showing Top Sparks from the Community Archive",custom_sparks:"Custom Sparks For Your {mood} Mood",personalized_inspiration:"Personalized inspiration to help you navigate your day.",discover_more:"Discover More",the_spark:"The Spark",copy_spark:"Copy Spark",community_favorite:"Community Favorite",live_ai_spark:"Live AI Spark",mood_happy:"Happy",mood_happy_desc:"Feeling Joyful And Bright",mood_sad:"Sad",mood_sad_desc:"Need A Little Pick-Me-Up",mood_energetic:"Energetic",mood_energetic_desc:"Ready To Take On The World",mood_relaxed:"Relaxed",mood_relaxed_desc:"Calm, Cool, And Collected",mood_stressed:"Stressed",mood_stressed_desc:"Feeling Overwhelmed And Tense",mood_creative:"Creative",mood_creative_desc:"Inspired And Ready To Create",cat_Activity:"Activity",cat_Mindfulness:"Mindfulness",cat_Social:"Social",cat_Creative:"Creative",cat_Inspirational:"Inspirational",cat_Music:"Music",connecting_ai:"Connecting to AI Spark Engine for {mood}..."},es:{app_title:"Encuentra tu Chispa",app_tagline:"Tu motor de inspiracin personal. Adaptado a cmo te sientes.",intro_desc:"Descubre ideas e inspiracin personalizadas que se ajustan perfectamente a tu estado de nimo actual. Listo para empezar?",get_started:"Empezar",how_feeling:"Cmo te sientes hoy?",change_mood:"Cambiar nimo",community_archive:"Mostrando las mejores chispas del archivo de la comunidad",custom_sparks:"Chispas personalizadas para tu nimo {mood}",personalized_inspiration:"Inspiracin personalizada para ayudarte en tu da.",discover_more:"Descubrir ms",the_spark:"La Chispa",copy_spark:"Copiar Chispa",community_favorite:"Favorito de la comunidad",live_ai_spark:"Chispa de IA en vivo",mood_happy:"Feliz",mood_happy_desc:"Sintindote alegre y radiante",mood_sad:"Triste",mood_sad_desc:"Necesitas un pequeo empujn",mood_energetic:"Enrgico",mood_energetic_desc:"Listo para comerte el mundo",mood_relaxed:"Relajado",mood_relaxed_desc:"Tranquilo y sereno",mood_stressed:"Estresado",mood_stressed_desc:"Sintindote abrumado y tenso",mood_creative:"Creativo",mood_creative_desc:"Inspirado y listo para crear",cat_Activity:"Actividad",cat_Mindfulness:"Atencin plena",cat_Social:"Social",cat_Creative:"Creativo",cat_Inspirational:"Inspirador",cat_Music:"Msica",connecting_ai:"Conectando al motor de IA para {mood}..."},fr:{app_title:"Trouvez votre tincelle",app_tagline:"Votre moteur d'inspiration personnel. Adapt  votre ressenti.",intro_desc:"Dcouvrez des ides personnalises et une inspiration parfaitement adaptes  votre humeur actuelle. Prt  commencer ?",get_started:"Commencer",how_feeling:"Comment vous sentez-vous aujourd'hui ?",change_mood:"Changer d'humeur",community_archive:"Affichage des meilleures tincelles de l'archive communautaire",custom_sparks:"tincelles personnalises pour votre humeur {mood}",personalized_inspiration:"Une inspiration personnalise pour vous aider  traverser la journe.",discover_more:"En savoir plus",the_spark:"L'tincelle",copy_spark:"Copier l'tincelle",community_favorite:"Favori de la communaut",live_ai_spark:"tincelle IA en direct",mood_happy:"Heureux",mood_happy_desc:"Se sentir joyeux et radieux",mood_sad:"Triste",mood_sad_desc:"Besoin d'un petit remontant",mood_energetic:"nergique",mood_energetic_desc:"Prt  conqurir le monde",mood_relaxed:"Dtendu",mood_relaxed_desc:"Calme, frais et serein",mood_stressed:"Stress",mood_stressed_desc:"Se sentir dpass et tendu",mood_creative:"Cratif",mood_creative_desc:"Inspir et prt  crer",cat_Activity:"Activit",cat_Mindfulness:"Pleine conscience",cat_Social:"Social",cat_Creative:"Cratif",cat_Inspirational:"Inspirationnel",cat_Music:"Musique",connecting_ai:"Connexion au moteur d'IA pour {mood}..."},de:{app_title:"Finde deinen Funken",app_tagline:"Deine persnliche Inspirationsquelle. Abgestimmt auf dein Befinden.",intro_desc:"Entdecke personalisierte Ideen und Inspirationen, die perfekt zu deiner aktuellen Stimmung passen. Bereit anzufangen?",get_started:"Loslegen",how_feeling:"Wie fhlst du heute?",change_mood:"Stimmung ndern",community_archive:"Die besten Funken aus dem Community-Archiv",custom_sparks:"Individuelle Funken fr deine {mood} Stimmung",personalized_inspiration:"Personalisierte Inspiration, die dir durch den Tag hilft.",discover_more:"Mehr entdecken",the_spark:"Der Funke",copy_spark:"Funken kopieren",community_favorite:"Community-Favorit",live_ai_spark:"Live KI-Funke",mood_happy:"Glcklich",mood_happy_desc:"Frhlich und strahlend fhlen",mood_sad:"Traurig",mood_sad_desc:"Brauche eine kleine Aufmunterung",mood_energetic:"Energetisch",mood_energetic_desc:"Bereit, die Welt zu erobern",mood_relaxed:"Entspannt",mood_relaxed_desc:"Ruhig, gelassen und entspannt",mood_stressed:"Gestresst",mood_stressed_desc:"berwltigt und angespannt fhlen",mood_creative:"Kreativ",mood_creative_desc:"Inspiriert und bereit zu erschaffen",cat_Activity:"Aktivitt",cat_Mindfulness:"Achtsamkeit",cat_Social:"Soziales",cat_Creative:"Kreativ",cat_Inspirational:"Inspirierend",cat_Music:"Musik",connecting_ai:"Verbindung zum KI-Modul fr {mood} wird hergestellt..."},ar:{app_title:"  ",app_tagline:"  .   .",intro_desc:"         .    ",get_started:" ",how_feeling:"  ",change_mood:" ",community_archive:"     ",custom_sparks:"   {mood}",personalized_inspiration:"    .",discover_more:" ",the_spark:"",copy_spark:" ",community_favorite:"  ",live_ai_spark:"   ",mood_happy:"",mood_happy_desc:"  ",mood_sad:"",mood_sad_desc:"  ",mood_energetic:"",mood_energetic_desc:"  ",mood_relaxed:"",mood_relaxed_desc:"  ",mood_stressed:"",mood_stressed_desc:"  ",mood_creative:"",mood_creative_desc:"  ",cat_Activity:"",cat_Mindfulness:"",cat_Social:"",cat_Creative:"",cat_Inspirational:"",cat_Music:"",connecting_ai:"      {mood}..."},fr_ca:{app_title:"Trouve ton tincelle",app_tagline:"Ton moteur d'inspiration perso. Adapt  comment tu te sens.",intro_desc:"Dcouvre des ides et de l'inspiration personnalises qui matchent ton humeur. Prt pour l'aventure?",get_started:"C'est parti",how_feeling:"Comment tu te sens aujourd'hui?",change_mood:"Changer d'humeur",community_archive:"Les meilleures tincelles de la communaut",custom_sparks:"tincelles personnalises pour ton humeur {mood}",personalized_inspiration:"De l'inspiration sur mesure pour ta journe.",discover_more:"En dcouvrir plus",the_spark:"L'tincelle",copy_spark:"Copier l'tincelle",community_favorite:"Coup de cur",live_ai_spark:"tincelle IA en direct",mood_happy:"Joyeux",mood_happy_desc:"Tout sourire et plein d'nergie",mood_sad:"Triste",mood_sad_desc:"Besoin d'un petit remontant",mood_energetic:"En feu",mood_energetic_desc:"Prt  conqurir le monde",mood_relaxed:"Relax",mood_relaxed_desc:"Calme et pos",mood_stressed:"Stress",mood_stressed_desc:"Un peu trop dans le jus",mood_creative:"Cratif",mood_creative_desc:"Inspir et prt  crer",cat_Activity:"Activit",cat_Mindfulness:"Pleine conscience",cat_Social:"Social",cat_Creative:"Cration",cat_Inspirational:"Inspiration",cat_Music:"Musique",connecting_ai:"Connexion au moteur d'IA pour {mood}..."}};var hI={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pI,mI;function gI(){return{geminiUrl:pI,vertexUrl:mI}}function yI(n,e,t,o){var r,l;if(!(n!=null&&n.baseUrl)){const c=gI();return e?(r=c.vertexUrl)!==null&&r!==void 0?r:t:(l=c.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ro{}function ce(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function d(n,e,t){for(let l=0;l<e.length-1;l++){const c=e[l];if(c.endsWith("[]")){const h=c.slice(0,-2);if(!(h in n))if(Array.isArray(t))n[h]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${c}`);if(Array.isArray(n[h])){const y=n[h];if(Array.isArray(t))for(let m=0;m<y.length;m++){const v=y[m];d(v,e.slice(l+1),t[m])}else for(const m of y)d(m,e.slice(l+1),t)}return}else if(c.endsWith("[0]")){const h=c.slice(0,-3);h in n||(n[h]=[{}]);const y=n[h];d(y[0],e.slice(l+1),t);return}(!n[c]||typeof n[c]!="object")&&(n[c]={}),n=n[c]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[o]=t}function f(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let o=0;o<e.length;o++){if(typeof n!="object"||n===null)return t;const r=e[o];if(r.endsWith("[]")){const l=r.slice(0,-2);if(l in n){const c=n[l];return Array.isArray(c)?c.map(h=>f(h,e.slice(o+1),t)):t}else return t}else n=n[r]}return n}catch(o){if(o instanceof TypeError)return t;throw o}}function _I(n,e){for(const[t,o]of Object.entries(e)){const r=t.split("."),l=o.split("."),c=new Set;let h=-1;for(let y=0;y<r.length;y++)if(r[y]==="*"){h=y;break}if(h!==-1&&l.length>h)for(let y=h;y<l.length;y++){const m=l[y];m!=="*"&&!m.endsWith("[]")&&!m.endsWith("[0]")&&c.add(m)}Gh(n,r,l,0,c)}}function Gh(n,e,t,o,r){if(o>=e.length||typeof n!="object"||n===null)return;const l=e[o];if(l.endsWith("[]")){const c=l.slice(0,-2),h=n;if(c in h&&Array.isArray(h[c]))for(const y of h[c])Gh(y,e,t,o+1,r)}else if(l==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const c=n,h=Object.keys(c).filter(m=>!m.startsWith("_")&&!r.has(m)),y={};for(const m of h)y[m]=c[m];for(const[m,v]of Object.entries(y)){const T=[];for(const S of t.slice(o))S==="*"?T.push(m):T.push(S);d(c,T,v)}for(const m of h)delete c[m]}}else{const c=n;l in c&&Gh(c[l],e,t,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Cp(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vI(n){const e={},t=f(n,["operationName"]);t!=null&&d(e,["operationName"],t);const o=f(n,["resourceName"]);return o!=null&&d(e,["_url","resourceName"],o),e}function TI(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],SI(c)),e}function EI(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],AI(c)),e}function SI(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>CI(c))),d(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function AI(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>II(c))),d(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function CI(n){const e={},t=f(n,["video"]);return t!=null&&d(e,["video"],bI(t)),e}function II(n){const e={},t=f(n,["_self"]);return t!=null&&d(e,["video"],xI(t)),e}function RI(n){const e={},t=f(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function wI(n){const e={},t=f(n,["operationName"]);return t!=null&&d(e,["_url","operationName"],t),e}function MI(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],NI(c)),e}function NI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&d(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function zT(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],DI(c)),e}function DI(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&d(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function bI(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&d(e,["videoBytes"],Cp(o));const r=f(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function xI(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],Cp(o));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Q_;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Q_||(Q_={}));var X_;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(X_||(X_={}));var $_;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})($_||($_={}));var yn;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(yn||(yn={}));var W_;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(W_||(W_={}));var Z_;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Z_||(Z_={}));var j_;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(j_||(j_={}));var ev;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(ev||(ev={}));var tv;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(tv||(tv={}));var nv;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(nv||(nv={}));var iv;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(iv||(iv={}));var ov;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(ov||(ov={}));var sv;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(sv||(sv={}));var rv;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(rv||(rv={}));var av;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(av||(av={}));var lv;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(lv||(lv={}));var uv;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(uv||(uv={}));var cv;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(cv||(cv={}));var fv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(fv||(fv={}));var Uc;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Uc||(Uc={}));var dv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(dv||(dv={}));var hv;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(hv||(hv={}));var pv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(pv||(pv={}));var Hh;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Hh||(Hh={}));var mv;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(mv||(mv={}));var gv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(gv||(gv={}));var yv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(yv||(yv={}));var _v;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(_v||(_v={}));var vv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(vv||(vv={}));var Tv;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Tv||(Tv={}));var Ev;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(Ev||(Ev={}));var Sv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Sv||(Sv={}));var Av;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Av||(Av={}));var Cv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Cv||(Cv={}));var Iv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Iv||(Iv={}));var Rv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Rv||(Rv={}));var wv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(wv||(wv={}));var Mv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Mv||(Mv={}));var Nv;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(Nv||(Nv={}));var Dv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Dv||(Dv={}));var bv;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(bv||(bv={}));var xv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(xv||(xv={}));var Vv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Vv||(Vv={}));var Pv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Pv||(Pv={}));var Uv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Uv||(Uv={}));var Lv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Lv||(Lv={}));var kv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(kv||(kv={}));var Ov;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Ov||(Ov={}));var qv;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(qv||(qv={}));var Fv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Fv||(Fv={}));var Bv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Bv||(Bv={}));var Gv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Gv||(Gv={}));var Hv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Hv||(Hv={}));var zv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(zv||(zv={}));var Yv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Yv||(Yv={}));var qr;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(qr||(qr={}));class zh{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class ml{get text(){var e,t,o,r,l,c,h,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let m="",v=!1;const T=[];for(const S of(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[R,U]of Object.entries(S))R!=="text"&&R!=="thought"&&R!=="thoughtSignature"&&(U!==null||U!==void 0)&&T.push(R);if(typeof S.text=="string"){if(typeof S.thought=="boolean"&&S.thought)continue;v=!0,m+=S.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),v?m:void 0}get data(){var e,t,o,r,l,c,h,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let m="";const v=[];for(const T of(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)!==null&&y!==void 0?y:[]){for(const[S,R]of Object.entries(T))S!=="inlineData"&&(R!==null||R!==void 0)&&v.push(S);T.inlineData&&typeof T.inlineData.data=="string"&&(m+=atob(T.inlineData.data))}return v.length>0&&console.warn(`there are non-data parts ${v} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),m.length>0?btoa(m):void 0}get functionCalls(){var e,t,o,r,l,c,h,y;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const m=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(v=>v.functionCall).map(v=>v.functionCall).filter(v=>v!==void 0);if((m==null?void 0:m.length)!==0)return m}get executableCode(){var e,t,o,r,l,c,h,y,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const v=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.code}get codeExecutionResult(){var e,t,o,r,l,c,h,y,m;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const v=(y=(h=(c=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content)===null||h===void 0?void 0:h.parts)===null||y===void 0?void 0:y.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((v==null?void 0:v.length)!==0)return(m=v==null?void 0:v[0])===null||m===void 0?void 0:m.output}}class Jv{}class Kv{}class VI{}class PI{}class UI{}class LI{}class Qv{}class Xv{}class $v{}class kI{}class Lc{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Lc;let r;const l=e;return t?r=EI(l):r=TI(l),Object.assign(o,r),o}}class Wv{}class Zv{}class jv{}class e0{}class OI{}class qI{}class FI{}class Ip{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Ip,l=MI(e);return Object.assign(o,l),o}}class BI{}class GI{}class HI{}class t0{}class zI{get text(){var e,t,o;let r="",l=!1;const c=[];for(const h of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[y,m]of Object.entries(h))y!=="text"&&y!=="thought"&&m!==null&&c.push(y);if(typeof h.text=="string"){if(typeof h.thought=="boolean"&&h.thought)continue;l=!0,r+=h.text}}return c.length>0&&console.warn(`there are non-text parts ${c} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const c of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[h,y]of Object.entries(c))h!=="inlineData"&&y!==null&&l.push(h);c.inlineData&&typeof c.inlineData.data=="string"&&(r+=atob(c.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class YI{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Rp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const o=new Rp,l=zT(e);return Object.assign(o,l),o}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ye(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function YT(n,e){const t=Ye(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function JT(n){return Array.isArray(n)?n.map(e=>kc(e)):[kc(n)]}function kc(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function KT(n){const e=kc(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function QT(n){const e=kc(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function n0(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function XT(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>n0(e)):[n0(n)]}function Yh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function i0(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function o0(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function nn(n){if(n==null)throw new Error("ContentUnion is required");return Yh(n)?n:{role:"user",parts:XT(n)}}function wp(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=nn(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=nn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>nn(t)):[nn(e)]}function Gn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(i0(n)||o0(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[nn(n)]}const e=[],t=[],o=Yh(n[0]);for(const r of n){const l=Yh(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(i0(r)||o0(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:XT(t)}),e}function JI(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(yn).includes(t[0].toUpperCase())?t[0].toUpperCase():yn.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(yn).includes(o.toUpperCase())?o.toUpperCase():yn.TYPE_UNSPECIFIED})}}function Br(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&JI(n.type,e);for(const[c,h]of Object.entries(n))if(h!=null)if(c=="type"){if(h==="null")throw new Error("type: null can not be the only possible type for the field.");if(h instanceof Array)continue;e.type=Object.values(yn).includes(h.toUpperCase())?h.toUpperCase():yn.TYPE_UNSPECIFIED}else if(t.includes(c))e[c]=Br(h);else if(o.includes(c)){const y=[];for(const m of h){if(m.type=="null"){e.nullable=!0;continue}y.push(Br(m))}e[c]=y}else if(r.includes(c)){const y={};for(const[m,v]of Object.entries(h))y[m]=Br(v);e[c]=y}else{if(c==="additionalProperties")continue;e[c]=h}return e}function Mp(n){return Br(n)}function Np(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Dp(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function ea(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Br(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Br(e.response));return n}function ta(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function KI(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ao(n,e){if(typeof e!="string")throw new Error("name must be a string");return KI(n,e,"cachedContents")}function $T(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ts(n){return Cp(n)}function QI(n){return n!=null&&typeof n=="object"&&"name"in n}function XI(n){return n!=null&&typeof n=="object"&&"video"in n}function $I(n){return n!=null&&typeof n=="object"&&"uri"in n}function WT(n){var e;let t;if(QI(n)&&(t=n.name),!($I(n)&&(t=n.uri,t===void 0))&&!(XI(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ZT(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function jT(n){for(const e of["models","tunedModels","publisherModels"])if(WI(n,e))return n[e];return[]}function WI(n,e){return n!==null&&typeof n=="object"&&e in n}function ZI(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(o.responseJsonSchema=t.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function jI(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const c=ZI(r,e);c.functionDeclarations&&t.push(...c.functionDeclarations)}return{functionDeclarations:t}}function eE(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const o=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function eR(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function tE(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let l=!1;for(const c of r){if(typeof c!="object"||c===null)continue;const y=c.response;if(typeof y!="object"||y===null)continue;if(y.embedding!==void 0){l=!0;break}}return l&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function na(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function nE(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tR(n){const e={},t=f(n,["responsesFile"]);t!=null&&d(e,["fileName"],t);const o=f(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>UR(c))),d(e,["inlinedResponses"],l)}const r=f(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["inlinedEmbedContentResponses"],l)}return e}function nR(n){const e={},t=f(n,["predictionsFormat"]);t!=null&&d(e,["format"],t);const o=f(n,["gcsDestination","outputUriPrefix"]);o!=null&&d(e,["gcsUri"],o);const r=f(n,["bigqueryDestination","outputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function iR(n){const e={},t=f(n,["format"]);t!=null&&d(e,["predictionsFormat"],t);const o=f(n,["gcsUri"]);o!=null&&d(e,["gcsDestination","outputUriPrefix"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&d(e,["bigqueryDestination","outputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(f(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function wc(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata","displayName"]);o!=null&&d(e,["displayName"],o);const r=f(n,["metadata","state"]);r!=null&&d(e,["state"],nE(r));const l=f(n,["metadata","createTime"]);l!=null&&d(e,["createTime"],l);const c=f(n,["metadata","endTime"]);c!=null&&d(e,["endTime"],c);const h=f(n,["metadata","updateTime"]);h!=null&&d(e,["updateTime"],h);const y=f(n,["metadata","model"]);y!=null&&d(e,["model"],y);const m=f(n,["metadata","output"]);return m!=null&&d(e,["dest"],tR(tE(m))),e}function Jh(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["displayName"]);o!=null&&d(e,["displayName"],o);const r=f(n,["state"]);r!=null&&d(e,["state"],nE(r));const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["createTime"]);c!=null&&d(e,["createTime"],c);const h=f(n,["startTime"]);h!=null&&d(e,["startTime"],h);const y=f(n,["endTime"]);y!=null&&d(e,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&d(e,["updateTime"],m);const v=f(n,["model"]);v!=null&&d(e,["model"],v);const T=f(n,["inputConfig"]);T!=null&&d(e,["src"],oR(T));const S=f(n,["outputConfig"]);S!=null&&d(e,["dest"],nR(tE(S)));const R=f(n,["completionStats"]);return R!=null&&d(e,["completionStats"],R),e}function oR(n){const e={},t=f(n,["instancesFormat"]);t!=null&&d(e,["format"],t);const o=f(n,["gcsSource","uris"]);o!=null&&d(e,["gcsUri"],o);const r=f(n,["bigquerySource","inputUri"]);return r!=null&&d(e,["bigqueryUri"],r),e}function sR(n,e){const t={};if(f(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=f(e,["fileName"]);o!=null&&d(t,["fileName"],o);const r=f(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>PR(n,c))),d(t,["requests","requests"],l)}return t}function rR(n){const e={},t=f(n,["format"]);t!=null&&d(e,["instancesFormat"],t);const o=f(n,["gcsUri"]);o!=null&&d(e,["gcsSource","uris"],o);const r=f(n,["bigqueryUri"]);if(r!=null&&d(e,["bigquerySource","inputUri"],r),f(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(f(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function aR(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function lR(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],na(n,o)),t}function uR(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],na(n,o)),t}function cR(n){const e={},t=f(n,["content"]);t!=null&&d(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],fR(o));const r=f(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(n,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const y=f(n,["index"]);y!=null&&d(e,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),d(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&d(e,["urlContextMetadata"],T),e}function fR(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["citations"],o)}return e}function iE(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>GR(l))),d(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&d(e,["role"],o),e}function dR(n,e){const t={},o=f(n,["displayName"]);if(e!==void 0&&o!=null&&d(e,["batch","displayName"],o),f(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function hR(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=f(n,["dest"]);return e!==void 0&&r!=null&&d(e,["outputConfig"],iR(eR(r))),t}function s0(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["src"]);r!=null&&d(t,["batch","inputConfig"],sR(n,eE(n,r)));const l=f(e,["config"]);return l!=null&&dR(l,t),t}function pR(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["model"],Ye(n,o));const r=f(e,["src"]);r!=null&&d(t,["inputConfig"],rR(eE(n,r)));const l=f(e,["config"]);return l!=null&&hR(l,t),t}function mR(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&d(e,["batch","displayName"],o),t}function gR(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["src"]);r!=null&&d(t,["batch","inputConfig"],AR(n,r));const l=f(e,["config"]);return l!=null&&mR(l,t),t}function yR(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],na(n,o)),t}function _R(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],na(n,o)),t}function vR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&d(e,["name"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);return l!=null&&d(e,["error"],l),e}function TR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["name"]);o!=null&&d(e,["name"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);return l!=null&&d(e,["error"],l),e}function ER(n,e){const t={},o=f(e,["contents"]);if(o!=null){let l=wp(n,o);Array.isArray(l)&&(l=l.map(c=>c)),d(t,["requests[]","request","content"],l)}const r=f(e,["config"]);return r!=null&&(d(t,["_self"],SR(r,t)),_I(t,{"requests[].*":"requests[].request.*"})),t}function SR(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function AR(n,e){const t={},o=f(e,["fileName"]);o!=null&&d(t,["file_name"],o);const r=f(e,["inlinedRequests"]);return r!=null&&d(t,["requests"],ER(n,r)),t}function CR(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function IR(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const o=f(n,["args"]);o!=null&&d(e,["args"],o);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function RR(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const o=f(n,["allowedFunctionNames"]);if(o!=null&&d(e,["allowedFunctionNames"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function wR(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],iE(nn(r)));const l=f(e,["temperature"]);l!=null&&d(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&d(o,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&d(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&d(o,["presencePenalty"],R);const U=f(e,["frequencyPenalty"]);U!=null&&d(o,["frequencyPenalty"],U);const q=f(e,["seed"]);q!=null&&d(o,["seed"],q);const L=f(e,["responseMimeType"]);L!=null&&d(o,["responseMimeType"],L);const X=f(e,["responseSchema"]);X!=null&&d(o,["responseSchema"],Mp(X));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&d(o,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let b=W;Array.isArray(b)&&(b=b.map(ke=>HR(ke))),d(t,["safetySettings"],b)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let b=ta(se);Array.isArray(b)&&(b=b.map(ke=>YR(ea(ke)))),d(t,["tools"],b)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&d(t,["toolConfig"],zR(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&d(t,["cachedContent"],ao(n,le));const D=f(e,["responseModalities"]);D!=null&&d(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&d(o,["mediaResolution"],N);const M=f(e,["speechConfig"]);if(M!=null&&d(o,["speechConfig"],Np(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&d(o,["thinkingConfig"],P);const V=f(e,["imageConfig"]);V!=null&&d(o,["imageConfig"],VR(V));const F=f(e,["enableEnhancedCivicAnswers"]);return F!=null&&d(o,["enableEnhancedCivicAnswers"],F),o}function MR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>cR(m))),d(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function NR(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],na(n,o)),t}function DR(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],na(n,o)),t}function bR(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function xR(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function VR(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function PR(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["request","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let h=Gn(r);Array.isArray(h)&&(h=h.map(y=>iE(y))),d(t,["request","contents"],h)}const l=f(e,["metadata"]);l!=null&&d(t,["metadata"],l);const c=f(e,["config"]);return c!=null&&d(t,["request","generationConfig"],wR(n,c,f(t,["request"],{}))),t}function UR(n){const e={},t=f(n,["response"]);t!=null&&d(e,["response"],MR(t));const o=f(n,["error"]);return o!=null&&d(e,["error"],o),e}function LR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);if(e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),f(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function kR(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);e!==void 0&&r!=null&&d(e,["_query","pageToken"],r);const l=f(n,["filter"]);return e!==void 0&&l!=null&&d(e,["_query","filter"],l),t}function OR(n){const e={},t=f(n,["config"]);return t!=null&&LR(t,e),e}function qR(n){const e={},t=f(n,["config"]);return t!=null&&kR(t,e),e}function FR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>wc(c))),d(e,["batchJobs"],l)}return e}function BR(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Jh(c))),d(e,["batchJobs"],l)}return e}function GR(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],CR(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],IR(c));const h=f(n,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],aR(y));const m=f(n,["text"]);m!=null&&d(e,["text"],m);const v=f(n,["thought"]);v!=null&&d(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function HR(n){const e={},t=f(n,["category"]);if(t!=null&&d(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function zR(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],RR(t));const o=f(n,["retrievalConfig"]);return o!=null&&d(e,["retrievalConfig"],o),e}function YR(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&d(e,["googleMaps"],bR(h));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],xR(y));const m=f(n,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var no;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(no||(no={}));class qs{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let c={config:{}};!o||Object.keys(o).length===0?c={config:{}}:typeof o=="object"?c=Object.assign({},o):c=o,c.config&&(c.config.pageToken=t.nextPageToken),this.paramsInternal=c,this.pageInternalSize=(l=(r=c.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class JR extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qs(no.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=s0(this.apiClient,e),o=t._url,r=ce("{model}:batchGenerateContent",o),h=t.batch.inputConfig.requests,y=h.requests,m=[];for(const v of y){const T=Object.assign({},v);if(T.systemInstruction){const S=T.systemInstruction;delete T.systemInstruction;const R=T.request;R.systemInstruction=S,T.request=R}m.push(T)}return h.requests=m,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const o=t?Object.assign({},t):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const l=this.getGcsUri(e),c=this.getBigqueryUri(e);if(l)l.endsWith(".jsonl")?o.dest=`${l.slice(0,-6)}/dest`:o.dest=`${l}_dest_${r}`;else if(c)o.dest=`${c}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=pR(this.apiClient,e);return h=ce("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Jh(v))}else{const m=s0(this.apiClient,e);return h=ce("{model}:batchGenerateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>wc(v))}}async createEmbeddingsInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=gR(this.apiClient,e);return l=ce("{model}:asyncBatchEmbedContent",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>wc(y))}}async get(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=DR(this.apiClient,e);return h=ce("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Jh(v))}else{const m=NR(this.apiClient,e);return h=ce("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>wc(v))}}async cancel(e){var t,o,r,l;let c="",h={};if(this.apiClient.isVertexAI()){const y=uR(this.apiClient,e);c=ce("batchPredictionJobs/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const y=lR(this.apiClient,e);c=ce("batches/{name}:cancel",y._url),h=y._query,delete y._url,delete y._query,await this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=qR(e);return h=ce("batchPredictionJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=BR(v),S=new t0;return Object.assign(S,T),S})}else{const m=OR(e);return h=ce("batches",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=FR(v),S=new t0;return Object.assign(S,T),S})}}async delete(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=_R(this.apiClient,e);return h=ce("batchPredictionJobs/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>TR(v))}else{const m=yR(this.apiClient,e);return h=ce("batches/{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>vR(v))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function KR(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function r0(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>gw(l))),d(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&d(e,["role"],o),e}function QR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let v=Gn(c);Array.isArray(v)&&(v=v.map(T=>r0(T))),d(e,["contents"],v)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],r0(nn(h)));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(T=>_w(T))),d(e,["tools"],v)}const m=f(n,["toolConfig"]);if(e!==void 0&&m!=null&&d(e,["toolConfig"],yw(m)),f(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function XR(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(n,["expireTime"]);e!==void 0&&r!=null&&d(e,["expireTime"],r);const l=f(n,["displayName"]);e!==void 0&&l!=null&&d(e,["displayName"],l);const c=f(n,["contents"]);if(e!==void 0&&c!=null){let T=Gn(c);Array.isArray(T)&&(T=T.map(S=>S)),d(e,["contents"],T)}const h=f(n,["systemInstruction"]);e!==void 0&&h!=null&&d(e,["systemInstruction"],nn(h));const y=f(n,["tools"]);if(e!==void 0&&y!=null){let T=y;Array.isArray(T)&&(T=T.map(S=>vw(S))),d(e,["tools"],T)}const m=f(n,["toolConfig"]);e!==void 0&&m!=null&&d(e,["toolConfig"],m);const v=f(n,["kmsKeyName"]);return e!==void 0&&v!=null&&d(e,["encryption_spec","kmsKeyName"],v),t}function $R(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["model"],YT(n,o));const r=f(e,["config"]);return r!=null&&QR(r,t),t}function WR(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["model"],YT(n,o));const r=f(e,["config"]);return r!=null&&XR(r,t),t}function ZR(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],ao(n,o)),t}function jR(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],ao(n,o)),t}function ew(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function tw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function nw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function iw(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const o=f(n,["args"]);o!=null&&d(e,["args"],o);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ow(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const o=f(n,["allowedFunctionNames"]);if(o!=null&&d(e,["allowedFunctionNames"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const o=f(n,["name"]);o!=null&&d(e,["name"],o);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&d(e,["responseJsonSchema"],h),e}function rw(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],ao(n,o)),t}function aw(n,e){const t={},o=f(e,["name"]);return o!=null&&d(t,["_url","name"],ao(n,o)),t}function lw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function uw(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function cw(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function fw(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function dw(n){const e={},t=f(n,["config"]);return t!=null&&cw(t,e),e}function hw(n){const e={},t=f(n,["config"]);return t!=null&&fw(t,e),e}function pw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function mw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["cachedContents"],l)}return e}function gw(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],nw(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],iw(c));const h=f(n,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],KR(y));const m=f(n,["text"]);m!=null&&d(e,["text"],m);const v=f(n,["thought"]);v!=null&&d(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function yw(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],ow(t));const o=f(n,["retrievalConfig"]);return o!=null&&d(e,["retrievalConfig"],o),e}function _w(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&d(e,["googleMaps"],lw(h));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],uw(y));const m=f(n,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function vw(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>sw(S))),d(e,["functionDeclarations"],T)}const o=f(n,["retrieval"]);o!=null&&d(e,["retrieval"],o);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const h=f(n,["enterpriseWebSearch"]);h!=null&&d(e,["enterpriseWebSearch"],h);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const m=f(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function Tw(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),t}function Ew(n,e){const t={},o=f(n,["ttl"]);e!==void 0&&o!=null&&d(e,["ttl"],o);const r=f(n,["expireTime"]);return e!==void 0&&r!=null&&d(e,["expireTime"],r),t}function Sw(n,e){const t={},o=f(e,["name"]);o!=null&&d(t,["_url","name"],ao(n,o));const r=f(e,["config"]);return r!=null&&Tw(r,t),t}function Aw(n,e){const t={},o=f(e,["name"]);o!=null&&d(t,["_url","name"],ao(n,o));const r=f(e,["config"]);return r!=null&&Ew(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cw extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qs(no.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=WR(this.apiClient,e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=$R(this.apiClient,e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async get(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=aw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=rw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async delete(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=jR(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=tw(v),S=new jv;return Object.assign(S,T),S})}else{const m=ZR(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=ew(v),S=new jv;return Object.assign(S,T),S})}}async update(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=Aw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>v)}else{const m=Sw(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>v)}}async listInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=hw(e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=mw(v),S=new e0;return Object.assign(S,T),S})}else{const m=dw(e);return h=ce("cachedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=pw(v),S=new e0;return Object.assign(S,T),S})}}}function Oc(n,e){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,o=Object.getOwnPropertySymbols(n);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(n,o[r])&&(t[o[r]]=n[o[r]]);return t}function a0(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(n){return this instanceof Ae?(this.v=n,this):new Ae(n)}function ii(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),h("next"),h("throw"),h("return",c),r[Symbol.asyncIterator]=function(){return this},r;function c(R){return function(U){return Promise.resolve(U).then(R,T)}}function h(R,U){o[R]&&(r[R]=function(q){return new Promise(function(L,X){l.push([R,q,L,X])>1||y(R,q)})},U&&(r[R]=U(r[R])))}function y(R,U){try{m(o[R](U))}catch(q){S(l[0][3],q)}}function m(R){R.value instanceof Ae?Promise.resolve(R.value.v).then(v,T):S(l[0][2],R)}function v(R){y("next",R)}function T(R){y("throw",R)}function S(R,U){R(U),l.shift(),l.length&&y(l[0][0],l[0][1])}}function oi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof a0=="function"?a0(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(c){return new Promise(function(h,y){c=n[l](c),r(h,y,c.done,c.value)})}}function r(l,c,h,y){Promise.resolve(y).then(function(m){l({value:m,done:h})},c)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Iw(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:oE(t)}function oE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Rw(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function l0(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!oE(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class ww{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Mw(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Mw{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),Rw(l)}async sendMessage(e){var t;await this.sendPromise;const o=nn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,c,h;const y=await r,m=(c=(l=y.candidates)===null||l===void 0?void 0:l[0])===null||c===void 0?void 0:c.content,v=y.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let S=[];v!=null&&(S=(h=v.slice(T))!==null&&h!==void 0?h:[]);const R=m?[m]:[];this.recordHistory(o,R,S)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=nn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?l0(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return ii(this,arguments,function*(){var r,l,c,h,y,m;const v=[];try{for(var T=!0,S=oi(e),R;R=yield Ae(S.next()),r=R.done,!r;T=!0){h=R.value,T=!1;const U=h;if(Iw(U)){const q=(m=(y=U.candidates)===null||y===void 0?void 0:y[0])===null||m===void 0?void 0:m.content;q!==void 0&&v.push(q)}yield yield Ae(U)}}catch(U){l={error:U}}finally{try{!T&&!r&&(c=S.return)&&(yield Ae(c.call(S)))}finally{if(l)throw l.error}}this.recordHistory(t,v)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...l0(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class of extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,of.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nw(n){const e={},t=f(n,["file"]);return t!=null&&d(e,["file"],t),e}function Dw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function bw(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","file"],WT(t)),e}function xw(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function Vw(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","file"],WT(t)),e}function Pw(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function Uw(n){const e={},t=f(n,["config"]);return t!=null&&Pw(t,e),e}function Lw(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["files"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kw extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qs(no.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Uw(e);return l=ce("files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=Lw(y),v=new BI;return Object.assign(v,m),v})}}async createInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Nw(e);return l=ce("upload/v1beta/files",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=Dw(y),v=new GI;return Object.assign(v,m),v})}}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=Vw(e);return l=ce("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=bw(e);return l=ce("files/{file}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=xw(y),v=new HI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mc(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Ow(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>e1(l))),d(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&d(e,["role"],o),e}function qw(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function Fw(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const o=f(n,["args"]);o!=null&&d(e,["args"],o);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Bw(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const o=f(n,["name"]);o!=null&&d(e,["name"],o);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&d(e,["responseJsonSchema"],h),e}function Gw(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(n,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const y=f(n,["logprobs"]);y!=null&&d(e,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&d(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&d(e,["responseMimeType"],R);const U=f(n,["responseModalities"]);U!=null&&d(e,["responseModalities"],U);const q=f(n,["responseSchema"]);q!=null&&d(e,["responseSchema"],q);const L=f(n,["routingConfig"]);L!=null&&d(e,["routingConfig"],L);const X=f(n,["seed"]);X!=null&&d(e,["seed"],X);const ie=f(n,["speechConfig"]);ie!=null&&d(e,["speechConfig"],ie);const W=f(n,["stopSequences"]);W!=null&&d(e,["stopSequences"],W);const se=f(n,["temperature"]);se!=null&&d(e,["temperature"],se);const fe=f(n,["thinkingConfig"]);fe!=null&&d(e,["thinkingConfig"],fe);const le=f(n,["topK"]);le!=null&&d(e,["topK"],le);const D=f(n,["topP"]);if(D!=null&&d(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Hw(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function zw(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function Yw(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","speechConfig"],Dp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],R);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],Ow(nn(U)));const q=f(n,["tools"]);if(e!==void 0&&q!=null){let le=ta(q);Array.isArray(le)&&(le=le.map(D=>n1(ea(D)))),d(e,["setup","tools"],le)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&d(e,["setup","sessionResumption"],t1(L));const X=f(n,["inputAudioTranscription"]);e!==void 0&&X!=null&&d(e,["setup","inputAudioTranscription"],X);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&d(e,["setup","realtimeInputConfig"],W);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const fe=f(n,["proactivity"]);if(e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function Jw(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],Gw(o));const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","speechConfig"],Dp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],R);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],nn(U));const q=f(n,["tools"]);if(e!==void 0&&q!=null){let D=ta(q);Array.isArray(D)&&(D=D.map(N=>i1(ea(N)))),d(e,["setup","tools"],D)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&d(e,["setup","sessionResumption"],L);const X=f(n,["inputAudioTranscription"]);e!==void 0&&X!=null&&d(e,["setup","inputAudioTranscription"],X);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&d(e,["setup","realtimeInputConfig"],W);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const fe=f(n,["proactivity"]);e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe);const le=f(n,["explicitVadSignal"]);return e!==void 0&&le!=null&&d(e,["setup","explicitVadSignal"],le),t}function Kw(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&d(t,["config"],Yw(r,t)),t}function Qw(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&d(t,["config"],Jw(r,t)),t}function Xw(n){const e={},t=f(n,["musicGenerationConfig"]);return t!=null&&d(e,["musicGenerationConfig"],t),e}function $w(n){const e={},t=f(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["weightedPrompts"],o)}return e}function Ww(n){const e={},t=f(n,["media"]);if(t!=null){let m=JT(t);Array.isArray(m)&&(m=m.map(v=>Mc(v))),d(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&d(e,["audio"],Mc(QT(o)));const r=f(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&d(e,["video"],Mc(KT(l)));const c=f(n,["text"]);c!=null&&d(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&d(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function Zw(n){const e={},t=f(n,["media"]);if(t!=null){let m=JT(t);Array.isArray(m)&&(m=m.map(v=>v)),d(e,["mediaChunks"],m)}const o=f(n,["audio"]);o!=null&&d(e,["audio"],QT(o));const r=f(n,["audioStreamEnd"]);r!=null&&d(e,["audioStreamEnd"],r);const l=f(n,["video"]);l!=null&&d(e,["video"],KT(l));const c=f(n,["text"]);c!=null&&d(e,["text"],c);const h=f(n,["activityStart"]);h!=null&&d(e,["activityStart"],h);const y=f(n,["activityEnd"]);return y!=null&&d(e,["activityEnd"],y),e}function jw(n){const e={},t=f(n,["setupComplete"]);t!=null&&d(e,["setupComplete"],t);const o=f(n,["serverContent"]);o!=null&&d(e,["serverContent"],o);const r=f(n,["toolCall"]);r!=null&&d(e,["toolCall"],r);const l=f(n,["toolCallCancellation"]);l!=null&&d(e,["toolCallCancellation"],l);const c=f(n,["usageMetadata"]);c!=null&&d(e,["usageMetadata"],o1(c));const h=f(n,["goAway"]);h!=null&&d(e,["goAway"],h);const y=f(n,["sessionResumptionUpdate"]);y!=null&&d(e,["sessionResumptionUpdate"],y);const m=f(n,["voiceActivityDetectionSignal"]);return m!=null&&d(e,["voiceActivityDetectionSignal"],m),e}function e1(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],qw(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],Fw(c));const h=f(n,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],Mc(y));const m=f(n,["text"]);m!=null&&d(e,["text"],m);const v=f(n,["thought"]);v!=null&&d(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function t1(n){const e={},t=f(n,["handle"]);if(t!=null&&d(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function n1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&d(e,["googleMaps"],Hw(h));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],zw(y));const m=f(n,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function i1(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>Bw(S))),d(e,["functionDeclarations"],T)}const o=f(n,["retrieval"]);o!=null&&d(e,["retrieval"],o);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const h=f(n,["enterpriseWebSearch"]);h!=null&&d(e,["enterpriseWebSearch"],h);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const m=f(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function o1(n){const e={},t=f(n,["promptTokenCount"]);t!=null&&d(e,["promptTokenCount"],t);const o=f(n,["cachedContentTokenCount"]);o!=null&&d(e,["cachedContentTokenCount"],o);const r=f(n,["candidatesTokenCount"]);r!=null&&d(e,["responseTokenCount"],r);const l=f(n,["toolUsePromptTokenCount"]);l!=null&&d(e,["toolUsePromptTokenCount"],l);const c=f(n,["thoughtsTokenCount"]);c!=null&&d(e,["thoughtsTokenCount"],c);const h=f(n,["totalTokenCount"]);h!=null&&d(e,["totalTokenCount"],h);const y=f(n,["promptTokensDetails"]);if(y!=null){let R=y;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["promptTokensDetails"],R)}const m=f(n,["cacheTokensDetails"]);if(m!=null){let R=m;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["cacheTokensDetails"],R)}const v=f(n,["candidatesTokensDetails"]);if(v!=null){let R=v;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["responseTokensDetails"],R)}const T=f(n,["toolUsePromptTokensDetails"]);if(T!=null){let R=T;Array.isArray(R)&&(R=R.map(U=>U)),d(e,["toolUsePromptTokensDetails"],R)}const S=f(n,["trafficType"]);return S!=null&&d(e,["trafficType"],S),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s1(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function r1(n){const e={},t=f(n,["content"]);t!=null&&d(e,["content"],t);const o=f(n,["citationMetadata"]);o!=null&&d(e,["citationMetadata"],a1(o));const r=f(n,["tokenCount"]);r!=null&&d(e,["tokenCount"],r);const l=f(n,["finishReason"]);l!=null&&d(e,["finishReason"],l);const c=f(n,["avgLogprobs"]);c!=null&&d(e,["avgLogprobs"],c);const h=f(n,["groundingMetadata"]);h!=null&&d(e,["groundingMetadata"],h);const y=f(n,["index"]);y!=null&&d(e,["index"],y);const m=f(n,["logprobsResult"]);m!=null&&d(e,["logprobsResult"],m);const v=f(n,["safetyRatings"]);if(v!=null){let S=v;Array.isArray(S)&&(S=S.map(R=>R)),d(e,["safetyRatings"],S)}const T=f(n,["urlContextMetadata"]);return T!=null&&d(e,["urlContextMetadata"],T),e}function a1(n){const e={},t=f(n,["citationSources"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>r)),d(e,["citations"],o)}return e}function l1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let l=Gn(r);Array.isArray(l)&&(l=l.map(c=>c)),d(t,["contents"],l)}return t}function u1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["tokensInfo"],r)}return e}function c1(n){const e={},t=f(n,["values"]);t!=null&&d(e,["values"],t);const o=f(n,["statistics"]);return o!=null&&d(e,["statistics"],f1(o)),e}function f1(n){const e={},t=f(n,["truncated"]);t!=null&&d(e,["truncated"],t);const o=f(n,["token_count"]);return o!=null&&d(e,["tokenCount"],o),e}function sf(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>TM(l))),d(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&d(e,["role"],o),e}function d1(n){const e={},t=f(n,["controlType"]);t!=null&&d(e,["controlType"],t);const o=f(n,["enableControlImageComputation"]);return o!=null&&d(e,["computeControl"],o),e}function h1(n){const e={};if(f(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function p1(n,e){const t={},o=f(n,["systemInstruction"]);e!==void 0&&o!=null&&d(e,["systemInstruction"],nn(o));const r=f(n,["tools"]);if(e!==void 0&&r!=null){let c=r;Array.isArray(c)&&(c=c.map(h=>lE(h))),d(e,["tools"],c)}const l=f(n,["generationConfig"]);return e!==void 0&&l!=null&&d(e,["generationConfig"],sM(l)),t}function m1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let c=Gn(r);Array.isArray(c)&&(c=c.map(h=>sf(h))),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&h1(l),t}function g1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let c=Gn(r);Array.isArray(c)&&(c=c.map(h=>h)),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&p1(l,t),t}function y1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["totalTokens"]);o!=null&&d(e,["totalTokens"],o);const r=f(n,["cachedContentTokenCount"]);return r!=null&&d(e,["cachedContentTokenCount"],r),e}function _1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["totalTokens"]);return o!=null&&d(e,["totalTokens"],o),e}function v1(n,e){const t={},o=f(e,["model"]);return o!=null&&d(t,["_url","name"],Ye(n,o)),t}function T1(n,e){const t={},o=f(e,["model"]);return o!=null&&d(t,["_url","name"],Ye(n,o)),t}function E1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function S1(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}function A1(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&d(e,["parameters","language"],R);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&d(e,["parameters","outputOptions","mimeType"],U);const q=f(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&d(e,["parameters","outputOptions","compressionQuality"],q);const L=f(n,["addWatermark"]);e!==void 0&&L!=null&&d(e,["parameters","addWatermark"],L);const X=f(n,["labels"]);e!==void 0&&X!=null&&d(e,["labels"],X);const ie=f(n,["editMode"]);e!==void 0&&ie!=null&&d(e,["parameters","editMode"],ie);const W=f(n,["baseSteps"]);return e!==void 0&&W!=null&&d(e,["parameters","editConfig","baseSteps"],W),t}function C1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(y=>RM(y))),d(t,["instances[0]","referenceImages"],h)}const c=f(e,["config"]);return c!=null&&A1(c,t),t}function I1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>rf(l))),d(e,["generatedImages"],r)}return e}function R1(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&d(e,["requests[]","taskType"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["requests[]","title"],r);const l=f(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&d(e,["requests[]","outputDimensionality"],l),f(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function w1(n,e){const t={},o=f(n,["taskType"]);e!==void 0&&o!=null&&d(e,["instances[]","task_type"],o);const r=f(n,["title"]);e!==void 0&&r!=null&&d(e,["instances[]","title"],r);const l=f(n,["outputDimensionality"]);e!==void 0&&l!=null&&d(e,["parameters","outputDimensionality"],l);const c=f(n,["mimeType"]);e!==void 0&&c!=null&&d(e,["instances[]","mimeType"],c);const h=f(n,["autoTruncate"]);return e!==void 0&&h!=null&&d(e,["parameters","autoTruncate"],h),t}function M1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let h=wp(n,r);Array.isArray(h)&&(h=h.map(y=>y)),d(t,["requests[]","content"],h)}const l=f(e,["config"]);l!=null&&R1(l,t);const c=f(e,["model"]);return c!==void 0&&d(t,["requests[]","model"],Ye(n,c)),t}function N1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let c=wp(n,r);Array.isArray(c)&&(c=c.map(h=>h)),d(t,["instances[]","content"],c)}const l=f(e,["config"]);return l!=null&&w1(l,t),t}function D1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function b1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c1(c))),d(e,["embeddings"],l)}const r=f(n,["metadata"]);return r!=null&&d(e,["metadata"],r),e}function x1(n){const e={},t=f(n,["endpoint"]);t!=null&&d(e,["name"],t);const o=f(n,["deployedModelId"]);return o!=null&&d(e,["deployedModelId"],o),e}function V1(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function P1(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const o=f(n,["args"]);o!=null&&d(e,["args"],o);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function U1(n){const e={},t=f(n,["mode"]);t!=null&&d(e,["mode"],t);const o=f(n,["allowedFunctionNames"]);if(o!=null&&d(e,["allowedFunctionNames"],o),f(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function L1(n){const e={};if(f(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=f(n,["description"]);t!=null&&d(e,["description"],t);const o=f(n,["name"]);o!=null&&d(e,["name"],o);const r=f(n,["parameters"]);r!=null&&d(e,["parameters"],r);const l=f(n,["parametersJsonSchema"]);l!=null&&d(e,["parametersJsonSchema"],l);const c=f(n,["response"]);c!=null&&d(e,["response"],c);const h=f(n,["responseJsonSchema"]);return h!=null&&d(e,["responseJsonSchema"],h),e}function k1(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],sf(nn(r)));const l=f(e,["temperature"]);l!=null&&d(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&d(o,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&d(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&d(o,["presencePenalty"],R);const U=f(e,["frequencyPenalty"]);U!=null&&d(o,["frequencyPenalty"],U);const q=f(e,["seed"]);q!=null&&d(o,["seed"],q);const L=f(e,["responseMimeType"]);L!=null&&d(o,["responseMimeType"],L);const X=f(e,["responseSchema"]);X!=null&&d(o,["responseSchema"],Mp(X));const ie=f(e,["responseJsonSchema"]);if(ie!=null&&d(o,["responseJsonSchema"],ie),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const W=f(e,["safetySettings"]);if(t!==void 0&&W!=null){let b=W;Array.isArray(b)&&(b=b.map(ke=>wM(ke))),d(t,["safetySettings"],b)}const se=f(e,["tools"]);if(t!==void 0&&se!=null){let b=ta(se);Array.isArray(b)&&(b=b.map(ke=>PM(ea(ke)))),d(t,["tools"],b)}const fe=f(e,["toolConfig"]);if(t!==void 0&&fe!=null&&d(t,["toolConfig"],VM(fe)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const le=f(e,["cachedContent"]);t!==void 0&&le!=null&&d(t,["cachedContent"],ao(n,le));const D=f(e,["responseModalities"]);D!=null&&d(o,["responseModalities"],D);const N=f(e,["mediaResolution"]);N!=null&&d(o,["mediaResolution"],N);const M=f(e,["speechConfig"]);if(M!=null&&d(o,["speechConfig"],Np(M)),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const P=f(e,["thinkingConfig"]);P!=null&&d(o,["thinkingConfig"],P);const V=f(e,["imageConfig"]);V!=null&&d(o,["imageConfig"],cM(V));const F=f(e,["enableEnhancedCivicAnswers"]);return F!=null&&d(o,["enableEnhancedCivicAnswers"],F),o}function O1(n,e,t){const o={},r=f(e,["systemInstruction"]);t!==void 0&&r!=null&&d(t,["systemInstruction"],nn(r));const l=f(e,["temperature"]);l!=null&&d(o,["temperature"],l);const c=f(e,["topP"]);c!=null&&d(o,["topP"],c);const h=f(e,["topK"]);h!=null&&d(o,["topK"],h);const y=f(e,["candidateCount"]);y!=null&&d(o,["candidateCount"],y);const m=f(e,["maxOutputTokens"]);m!=null&&d(o,["maxOutputTokens"],m);const v=f(e,["stopSequences"]);v!=null&&d(o,["stopSequences"],v);const T=f(e,["responseLogprobs"]);T!=null&&d(o,["responseLogprobs"],T);const S=f(e,["logprobs"]);S!=null&&d(o,["logprobs"],S);const R=f(e,["presencePenalty"]);R!=null&&d(o,["presencePenalty"],R);const U=f(e,["frequencyPenalty"]);U!=null&&d(o,["frequencyPenalty"],U);const q=f(e,["seed"]);q!=null&&d(o,["seed"],q);const L=f(e,["responseMimeType"]);L!=null&&d(o,["responseMimeType"],L);const X=f(e,["responseSchema"]);X!=null&&d(o,["responseSchema"],Mp(X));const ie=f(e,["responseJsonSchema"]);ie!=null&&d(o,["responseJsonSchema"],ie);const W=f(e,["routingConfig"]);W!=null&&d(o,["routingConfig"],W);const se=f(e,["modelSelectionConfig"]);se!=null&&d(o,["modelConfig"],se);const fe=f(e,["safetySettings"]);if(t!==void 0&&fe!=null){let Q=fe;Array.isArray(Q)&&(Q=Q.map(ae=>ae)),d(t,["safetySettings"],Q)}const le=f(e,["tools"]);if(t!==void 0&&le!=null){let Q=ta(le);Array.isArray(Q)&&(Q=Q.map(ae=>lE(ea(ae)))),d(t,["tools"],Q)}const D=f(e,["toolConfig"]);t!==void 0&&D!=null&&d(t,["toolConfig"],D);const N=f(e,["labels"]);t!==void 0&&N!=null&&d(t,["labels"],N);const M=f(e,["cachedContent"]);t!==void 0&&M!=null&&d(t,["cachedContent"],ao(n,M));const P=f(e,["responseModalities"]);P!=null&&d(o,["responseModalities"],P);const V=f(e,["mediaResolution"]);V!=null&&d(o,["mediaResolution"],V);const F=f(e,["speechConfig"]);F!=null&&d(o,["speechConfig"],Np(F));const b=f(e,["audioTimestamp"]);b!=null&&d(o,["audioTimestamp"],b);const ke=f(e,["thinkingConfig"]);ke!=null&&d(o,["thinkingConfig"],ke);const dt=f(e,["imageConfig"]);if(dt!=null&&d(o,["imageConfig"],fM(dt)),f(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return o}function u0(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let c=Gn(r);Array.isArray(c)&&(c=c.map(h=>sf(h))),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(t,["generationConfig"],k1(n,l,t)),t}function c0(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["contents"]);if(r!=null){let c=Gn(r);Array.isArray(c)&&(c=c.map(h=>h)),d(t,["contents"],c)}const l=f(e,["config"]);return l!=null&&d(t,["generationConfig"],O1(n,l,t)),t}function f0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(m=>r1(m))),d(e,["candidates"],y)}const r=f(n,["modelVersion"]);r!=null&&d(e,["modelVersion"],r);const l=f(n,["promptFeedback"]);l!=null&&d(e,["promptFeedback"],l);const c=f(n,["responseId"]);c!=null&&d(e,["responseId"],c);const h=f(n,["usageMetadata"]);return h!=null&&d(e,["usageMetadata"],h),e}function d0(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["candidates"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(v=>v)),d(e,["candidates"],m)}const r=f(n,["createTime"]);r!=null&&d(e,["createTime"],r);const l=f(n,["modelVersion"]);l!=null&&d(e,["modelVersion"],l);const c=f(n,["promptFeedback"]);c!=null&&d(e,["promptFeedback"],c);const h=f(n,["responseId"]);h!=null&&d(e,["responseId"],h);const y=f(n,["usageMetadata"]);return y!=null&&d(e,["usageMetadata"],y),e}function q1(n,e){const t={};if(f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const r=f(n,["aspectRatio"]);e!==void 0&&r!=null&&d(e,["parameters","aspectRatio"],r);const l=f(n,["guidanceScale"]);if(e!==void 0&&l!=null&&d(e,["parameters","guidanceScale"],l),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=f(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&d(e,["parameters","safetySetting"],c);const h=f(n,["personGeneration"]);e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h);const y=f(n,["includeSafetyAttributes"]);e!==void 0&&y!=null&&d(e,["parameters","includeSafetyAttributes"],y);const m=f(n,["includeRaiReason"]);e!==void 0&&m!=null&&d(e,["parameters","includeRaiReason"],m);const v=f(n,["language"]);e!==void 0&&v!=null&&d(e,["parameters","language"],v);const T=f(n,["outputMimeType"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","mimeType"],T);const S=f(n,["outputCompressionQuality"]);if(e!==void 0&&S!=null&&d(e,["parameters","outputOptions","compressionQuality"],S),f(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=f(n,["imageSize"]);if(e!==void 0&&R!=null&&d(e,["parameters","sampleImageSize"],R),f(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function F1(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const r=f(n,["negativePrompt"]);e!==void 0&&r!=null&&d(e,["parameters","negativePrompt"],r);const l=f(n,["numberOfImages"]);e!==void 0&&l!=null&&d(e,["parameters","sampleCount"],l);const c=f(n,["aspectRatio"]);e!==void 0&&c!=null&&d(e,["parameters","aspectRatio"],c);const h=f(n,["guidanceScale"]);e!==void 0&&h!=null&&d(e,["parameters","guidanceScale"],h);const y=f(n,["seed"]);e!==void 0&&y!=null&&d(e,["parameters","seed"],y);const m=f(n,["safetyFilterLevel"]);e!==void 0&&m!=null&&d(e,["parameters","safetySetting"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const T=f(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&d(e,["parameters","includeSafetyAttributes"],T);const S=f(n,["includeRaiReason"]);e!==void 0&&S!=null&&d(e,["parameters","includeRaiReason"],S);const R=f(n,["language"]);e!==void 0&&R!=null&&d(e,["parameters","language"],R);const U=f(n,["outputMimeType"]);e!==void 0&&U!=null&&d(e,["parameters","outputOptions","mimeType"],U);const q=f(n,["outputCompressionQuality"]);e!==void 0&&q!=null&&d(e,["parameters","outputOptions","compressionQuality"],q);const L=f(n,["addWatermark"]);e!==void 0&&L!=null&&d(e,["parameters","addWatermark"],L);const X=f(n,["labels"]);e!==void 0&&X!=null&&d(e,["labels"],X);const ie=f(n,["imageSize"]);e!==void 0&&ie!=null&&d(e,["parameters","sampleImageSize"],ie);const W=f(n,["enhancePrompt"]);return e!==void 0&&W!=null&&d(e,["parameters","enhancePrompt"],W),t}function B1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&q1(l,t),t}function G1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["config"]);return l!=null&&F1(l,t),t}function H1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>tM(c))),d(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],rE(r)),e}function z1(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>rf(c))),d(e,["generatedImages"],l)}const r=f(n,["positivePromptSafetyAttributes"]);return r!=null&&d(e,["positivePromptSafetyAttributes"],aE(r)),e}function Y1(n,e){const t={},o=f(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o),f(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(n,["durationSeconds"]);if(e!==void 0&&r!=null&&d(e,["parameters","durationSeconds"],r),f(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=f(n,["aspectRatio"]);e!==void 0&&l!=null&&d(e,["parameters","aspectRatio"],l);const c=f(n,["resolution"]);e!==void 0&&c!=null&&d(e,["parameters","resolution"],c);const h=f(n,["personGeneration"]);if(e!==void 0&&h!=null&&d(e,["parameters","personGeneration"],h),f(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const y=f(n,["negativePrompt"]);e!==void 0&&y!=null&&d(e,["parameters","negativePrompt"],y);const m=f(n,["enhancePrompt"]);if(e!==void 0&&m!=null&&d(e,["parameters","enhancePrompt"],m),f(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const v=f(n,["lastFrame"]);e!==void 0&&v!=null&&d(e,["instances[0]","lastFrame"],af(v));const T=f(n,["referenceImages"]);if(e!==void 0&&T!=null){let S=T;Array.isArray(S)&&(S=S.map(R=>KM(R))),d(e,["instances[0]","referenceImages"],S)}if(f(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(f(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function J1(n,e){const t={},o=f(n,["numberOfVideos"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const r=f(n,["outputGcsUri"]);e!==void 0&&r!=null&&d(e,["parameters","storageUri"],r);const l=f(n,["fps"]);e!==void 0&&l!=null&&d(e,["parameters","fps"],l);const c=f(n,["durationSeconds"]);e!==void 0&&c!=null&&d(e,["parameters","durationSeconds"],c);const h=f(n,["seed"]);e!==void 0&&h!=null&&d(e,["parameters","seed"],h);const y=f(n,["aspectRatio"]);e!==void 0&&y!=null&&d(e,["parameters","aspectRatio"],y);const m=f(n,["resolution"]);e!==void 0&&m!=null&&d(e,["parameters","resolution"],m);const v=f(n,["personGeneration"]);e!==void 0&&v!=null&&d(e,["parameters","personGeneration"],v);const T=f(n,["pubsubTopic"]);e!==void 0&&T!=null&&d(e,["parameters","pubsubTopic"],T);const S=f(n,["negativePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","negativePrompt"],S);const R=f(n,["enhancePrompt"]);e!==void 0&&R!=null&&d(e,["parameters","enhancePrompt"],R);const U=f(n,["generateAudio"]);e!==void 0&&U!=null&&d(e,["parameters","generateAudio"],U);const q=f(n,["lastFrame"]);e!==void 0&&q!=null&&d(e,["instances[0]","lastFrame"],ri(q));const L=f(n,["referenceImages"]);if(e!==void 0&&L!=null){let W=L;Array.isArray(W)&&(W=W.map(se=>QM(se))),d(e,["instances[0]","referenceImages"],W)}const X=f(n,["mask"]);e!==void 0&&X!=null&&d(e,["instances[0]","mask"],JM(X));const ie=f(n,["compressionQuality"]);return e!==void 0&&ie!=null&&d(e,["parameters","compressionQuality"],ie),t}function K1(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response","generateVideoResponse"]);return c!=null&&d(e,["response"],W1(c)),e}function Q1(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],Z1(c)),e}function X1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(t,["instances[0]","image"],af(l));const c=f(e,["video"]);c!=null&&d(t,["instances[0]","video"],uE(c));const h=f(e,["source"]);h!=null&&j1(h,t);const y=f(e,["config"]);return y!=null&&Y1(y,t),t}function $1(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["prompt"]);r!=null&&d(t,["instances[0]","prompt"],r);const l=f(e,["image"]);l!=null&&d(t,["instances[0]","image"],ri(l));const c=f(e,["video"]);c!=null&&d(t,["instances[0]","video"],cE(c));const h=f(e,["source"]);h!=null&&eM(h,t);const y=f(e,["config"]);return y!=null&&J1(y,t),t}function W1(n){const e={},t=f(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>iM(c))),d(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function Z1(n){const e={},t=f(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(c=>oM(c))),d(e,["generatedVideos"],l)}const o=f(n,["raiMediaFilteredCount"]);o!=null&&d(e,["raiMediaFilteredCount"],o);const r=f(n,["raiMediaFilteredReasons"]);return r!=null&&d(e,["raiMediaFilteredReasons"],r),e}function j1(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],af(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],uE(l)),t}function eM(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ri(r));const l=f(n,["video"]);return e!==void 0&&l!=null&&d(e,["instances[0]","video"],cE(l)),t}function tM(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["image"],dM(t));const o=f(n,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const r=f(n,["_self"]);return r!=null&&d(e,["safetyAttributes"],rE(r)),e}function rf(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["image"],sE(t));const o=f(n,["raiFilteredReason"]);o!=null&&d(e,["raiFilteredReason"],o);const r=f(n,["_self"]);r!=null&&d(e,["safetyAttributes"],aE(r));const l=f(n,["prompt"]);return l!=null&&d(e,["enhancedPrompt"],l),e}function nM(n){const e={},t=f(n,["_self"]);t!=null&&d(e,["mask"],sE(t));const o=f(n,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),d(e,["labels"],r)}return e}function iM(n){const e={},t=f(n,["video"]);return t!=null&&d(e,["video"],zM(t)),e}function oM(n){const e={},t=f(n,["_self"]);return t!=null&&d(e,["video"],YM(t)),e}function sM(n){const e={},t=f(n,["modelSelectionConfig"]);t!=null&&d(e,["modelConfig"],t);const o=f(n,["responseJsonSchema"]);o!=null&&d(e,["responseJsonSchema"],o);const r=f(n,["audioTimestamp"]);r!=null&&d(e,["audioTimestamp"],r);const l=f(n,["candidateCount"]);l!=null&&d(e,["candidateCount"],l);const c=f(n,["enableAffectiveDialog"]);c!=null&&d(e,["enableAffectiveDialog"],c);const h=f(n,["frequencyPenalty"]);h!=null&&d(e,["frequencyPenalty"],h);const y=f(n,["logprobs"]);y!=null&&d(e,["logprobs"],y);const m=f(n,["maxOutputTokens"]);m!=null&&d(e,["maxOutputTokens"],m);const v=f(n,["mediaResolution"]);v!=null&&d(e,["mediaResolution"],v);const T=f(n,["presencePenalty"]);T!=null&&d(e,["presencePenalty"],T);const S=f(n,["responseLogprobs"]);S!=null&&d(e,["responseLogprobs"],S);const R=f(n,["responseMimeType"]);R!=null&&d(e,["responseMimeType"],R);const U=f(n,["responseModalities"]);U!=null&&d(e,["responseModalities"],U);const q=f(n,["responseSchema"]);q!=null&&d(e,["responseSchema"],q);const L=f(n,["routingConfig"]);L!=null&&d(e,["routingConfig"],L);const X=f(n,["seed"]);X!=null&&d(e,["seed"],X);const ie=f(n,["speechConfig"]);ie!=null&&d(e,["speechConfig"],ie);const W=f(n,["stopSequences"]);W!=null&&d(e,["stopSequences"],W);const se=f(n,["temperature"]);se!=null&&d(e,["temperature"],se);const fe=f(n,["thinkingConfig"]);fe!=null&&d(e,["thinkingConfig"],fe);const le=f(n,["topK"]);le!=null&&d(e,["topK"],le);const D=f(n,["topP"]);if(D!=null&&d(e,["topP"],D),f(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function rM(n,e){const t={},o=f(e,["model"]);return o!=null&&d(t,["_url","name"],Ye(n,o)),t}function aM(n,e){const t={},o=f(e,["model"]);return o!=null&&d(t,["_url","name"],Ye(n,o)),t}function lM(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function uM(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function cM(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const o=f(n,["imageSize"]);if(o!=null&&d(e,["imageSize"],o),f(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(f(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fM(n){const e={},t=f(n,["aspectRatio"]);t!=null&&d(e,["aspectRatio"],t);const o=f(n,["imageSize"]);o!=null&&d(e,["imageSize"],o);const r=f(n,["outputMimeType"]);r!=null&&d(e,["imageOutputOptions","mimeType"],r);const l=f(n,["outputCompressionQuality"]);return l!=null&&d(e,["imageOutputOptions","compressionQuality"],l),e}function dM(n){const e={},t=f(n,["bytesBase64Encoded"]);t!=null&&d(e,["imageBytes"],ts(t));const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function sE(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["gcsUri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&d(e,["imageBytes"],ts(o));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function af(n){const e={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=f(n,["imageBytes"]);t!=null&&d(e,["bytesBase64Encoded"],ts(t));const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function ri(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["gcsUri"],t);const o=f(n,["imageBytes"]);o!=null&&d(e,["bytesBase64Encoded"],ts(o));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function hM(n,e,t){const o={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&d(t,["_url","models_url"],ZT(n,h)),o}function pM(n,e,t){const o={},r=f(e,["pageSize"]);t!==void 0&&r!=null&&d(t,["_query","pageSize"],r);const l=f(e,["pageToken"]);t!==void 0&&l!=null&&d(t,["_query","pageToken"],l);const c=f(e,["filter"]);t!==void 0&&c!=null&&d(t,["_query","filter"],c);const h=f(e,["queryBase"]);return t!==void 0&&h!=null&&d(t,["_url","models_url"],ZT(n,h)),o}function mM(n,e){const t={},o=f(e,["config"]);return o!=null&&hM(n,o,t),t}function gM(n,e){const t={},o=f(e,["config"]);return o!=null&&pM(n,o,t),t}function yM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=jT(r);Array.isArray(l)&&(l=l.map(c=>Kh(c))),d(e,["models"],l)}return e}function _M(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["_self"]);if(r!=null){let l=jT(r);Array.isArray(l)&&(l=l.map(c=>Qh(c))),d(e,["models"],l)}return e}function vM(n){const e={},t=f(n,["maskMode"]);t!=null&&d(e,["maskMode"],t);const o=f(n,["segmentationClasses"]);o!=null&&d(e,["maskClasses"],o);const r=f(n,["maskDilation"]);return r!=null&&d(e,["dilation"],r),e}function Kh(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["displayName"]);o!=null&&d(e,["displayName"],o);const r=f(n,["description"]);r!=null&&d(e,["description"],r);const l=f(n,["version"]);l!=null&&d(e,["version"],l);const c=f(n,["_self"]);c!=null&&d(e,["tunedModelInfo"],UM(c));const h=f(n,["inputTokenLimit"]);h!=null&&d(e,["inputTokenLimit"],h);const y=f(n,["outputTokenLimit"]);y!=null&&d(e,["outputTokenLimit"],y);const m=f(n,["supportedGenerationMethods"]);m!=null&&d(e,["supportedActions"],m);const v=f(n,["temperature"]);v!=null&&d(e,["temperature"],v);const T=f(n,["maxTemperature"]);T!=null&&d(e,["maxTemperature"],T);const S=f(n,["topP"]);S!=null&&d(e,["topP"],S);const R=f(n,["topK"]);R!=null&&d(e,["topK"],R);const U=f(n,["thinking"]);return U!=null&&d(e,["thinking"],U),e}function Qh(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["displayName"]);o!=null&&d(e,["displayName"],o);const r=f(n,["description"]);r!=null&&d(e,["description"],r);const l=f(n,["versionId"]);l!=null&&d(e,["version"],l);const c=f(n,["deployedModels"]);if(c!=null){let T=c;Array.isArray(T)&&(T=T.map(S=>x1(S))),d(e,["endpoints"],T)}const h=f(n,["labels"]);h!=null&&d(e,["labels"],h);const y=f(n,["_self"]);y!=null&&d(e,["tunedModelInfo"],LM(y));const m=f(n,["defaultCheckpointId"]);m!=null&&d(e,["defaultCheckpointId"],m);const v=f(n,["checkpoints"]);if(v!=null){let T=v;Array.isArray(T)&&(T=T.map(S=>S)),d(e,["checkpoints"],T)}return e}function TM(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],V1(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],P1(c));const h=f(n,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],s1(y));const m=f(n,["text"]);m!=null&&d(e,["text"],m);const v=f(n,["thought"]);v!=null&&d(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function EM(n){const e={},t=f(n,["productImage"]);return t!=null&&d(e,["image"],ri(t)),e}function SM(n,e){const t={},o=f(n,["numberOfImages"]);e!==void 0&&o!=null&&d(e,["parameters","sampleCount"],o);const r=f(n,["baseSteps"]);e!==void 0&&r!=null&&d(e,["parameters","baseSteps"],r);const l=f(n,["outputGcsUri"]);e!==void 0&&l!=null&&d(e,["parameters","storageUri"],l);const c=f(n,["seed"]);e!==void 0&&c!=null&&d(e,["parameters","seed"],c);const h=f(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&d(e,["parameters","safetySetting"],h);const y=f(n,["personGeneration"]);e!==void 0&&y!=null&&d(e,["parameters","personGeneration"],y);const m=f(n,["addWatermark"]);e!==void 0&&m!=null&&d(e,["parameters","addWatermark"],m);const v=f(n,["outputMimeType"]);e!==void 0&&v!=null&&d(e,["parameters","outputOptions","mimeType"],v);const T=f(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&d(e,["parameters","outputOptions","compressionQuality"],T);const S=f(n,["enhancePrompt"]);e!==void 0&&S!=null&&d(e,["parameters","enhancePrompt"],S);const R=f(n,["labels"]);return e!==void 0&&R!=null&&d(e,["labels"],R),t}function AM(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["source"]);r!=null&&IM(r,t);const l=f(e,["config"]);return l!=null&&SM(l,t),t}function CM(n){const e={},t=f(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>rf(r))),d(e,["generatedImages"],o)}return e}function IM(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(n,["personImage"]);e!==void 0&&r!=null&&d(e,["instances[0]","personImage","image"],ri(r));const l=f(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>EM(h))),d(e,["instances[0]","productImages"],c)}return t}function RM(n){const e={},t=f(n,["referenceImage"]);t!=null&&d(e,["referenceImage"],ri(t));const o=f(n,["referenceId"]);o!=null&&d(e,["referenceId"],o);const r=f(n,["referenceType"]);r!=null&&d(e,["referenceType"],r);const l=f(n,["maskImageConfig"]);l!=null&&d(e,["maskImageConfig"],vM(l));const c=f(n,["controlImageConfig"]);c!=null&&d(e,["controlImageConfig"],d1(c));const h=f(n,["styleImageConfig"]);h!=null&&d(e,["styleImageConfig"],h);const y=f(n,["subjectImageConfig"]);return y!=null&&d(e,["subjectImageConfig"],y),e}function rE(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&d(e,["categories"],t);const o=f(n,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const r=f(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function aE(n){const e={},t=f(n,["safetyAttributes","categories"]);t!=null&&d(e,["categories"],t);const o=f(n,["safetyAttributes","scores"]);o!=null&&d(e,["scores"],o);const r=f(n,["contentType"]);return r!=null&&d(e,["contentType"],r),e}function wM(n){const e={},t=f(n,["category"]);if(t!=null&&d(e,["category"],t),f(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const o=f(n,["threshold"]);return o!=null&&d(e,["threshold"],o),e}function MM(n){const e={},t=f(n,["image"]);return t!=null&&d(e,["image"],ri(t)),e}function NM(n,e){const t={},o=f(n,["mode"]);e!==void 0&&o!=null&&d(e,["parameters","mode"],o);const r=f(n,["maxPredictions"]);e!==void 0&&r!=null&&d(e,["parameters","maxPredictions"],r);const l=f(n,["confidenceThreshold"]);e!==void 0&&l!=null&&d(e,["parameters","confidenceThreshold"],l);const c=f(n,["maskDilation"]);e!==void 0&&c!=null&&d(e,["parameters","maskDilation"],c);const h=f(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&d(e,["parameters","binaryColorThreshold"],h);const y=f(n,["labels"]);return e!==void 0&&y!=null&&d(e,["labels"],y),t}function DM(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["source"]);r!=null&&xM(r,t);const l=f(e,["config"]);return l!=null&&NM(l,t),t}function bM(n){const e={},t=f(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>nM(r))),d(e,["generatedMasks"],o)}return e}function xM(n,e){const t={},o=f(n,["prompt"]);e!==void 0&&o!=null&&d(e,["instances[0]","prompt"],o);const r=f(n,["image"]);e!==void 0&&r!=null&&d(e,["instances[0]","image"],ri(r));const l=f(n,["scribbleImage"]);return e!==void 0&&l!=null&&d(e,["instances[0]","scribble"],MM(l)),t}function VM(n){const e={},t=f(n,["functionCallingConfig"]);t!=null&&d(e,["functionCallingConfig"],U1(t));const o=f(n,["retrievalConfig"]);return o!=null&&d(e,["retrievalConfig"],o),e}function PM(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&d(e,["googleMaps"],lM(h));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],uM(y));const m=f(n,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}function lE(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(S=>L1(S))),d(e,["functionDeclarations"],T)}const o=f(n,["retrieval"]);o!=null&&d(e,["retrieval"],o);const r=f(n,["googleSearchRetrieval"]);r!=null&&d(e,["googleSearchRetrieval"],r);const l=f(n,["computerUse"]);if(l!=null&&d(e,["computerUse"],l),f(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const c=f(n,["codeExecution"]);c!=null&&d(e,["codeExecution"],c);const h=f(n,["enterpriseWebSearch"]);h!=null&&d(e,["enterpriseWebSearch"],h);const y=f(n,["googleMaps"]);y!=null&&d(e,["googleMaps"],y);const m=f(n,["googleSearch"]);m!=null&&d(e,["googleSearch"],m);const v=f(n,["urlContext"]);return v!=null&&d(e,["urlContext"],v),e}function UM(n){const e={},t=f(n,["baseModel"]);t!=null&&d(e,["baseModel"],t);const o=f(n,["createTime"]);o!=null&&d(e,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function LM(n){const e={},t=f(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&d(e,["baseModel"],t);const o=f(n,["createTime"]);o!=null&&d(e,["createTime"],o);const r=f(n,["updateTime"]);return r!=null&&d(e,["updateTime"],r),e}function kM(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=f(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),t}function OM(n,e){const t={},o=f(n,["displayName"]);e!==void 0&&o!=null&&d(e,["displayName"],o);const r=f(n,["description"]);e!==void 0&&r!=null&&d(e,["description"],r);const l=f(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&d(e,["defaultCheckpointId"],l),t}function qM(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","name"],Ye(n,o));const r=f(e,["config"]);return r!=null&&kM(r,t),t}function FM(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&OM(r,t),t}function BM(n,e){const t={},o=f(n,["outputGcsUri"]);e!==void 0&&o!=null&&d(e,["parameters","storageUri"],o);const r=f(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&d(e,["parameters","safetySetting"],r);const l=f(n,["personGeneration"]);e!==void 0&&l!=null&&d(e,["parameters","personGeneration"],l);const c=f(n,["includeRaiReason"]);e!==void 0&&c!=null&&d(e,["parameters","includeRaiReason"],c);const h=f(n,["outputMimeType"]);e!==void 0&&h!=null&&d(e,["parameters","outputOptions","mimeType"],h);const y=f(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&d(e,["parameters","outputOptions","compressionQuality"],y);const m=f(n,["enhanceInputImage"]);e!==void 0&&m!=null&&d(e,["parameters","upscaleConfig","enhanceInputImage"],m);const v=f(n,["imagePreservationFactor"]);e!==void 0&&v!=null&&d(e,["parameters","upscaleConfig","imagePreservationFactor"],v);const T=f(n,["labels"]);e!==void 0&&T!=null&&d(e,["labels"],T);const S=f(n,["numberOfImages"]);e!==void 0&&S!=null&&d(e,["parameters","sampleCount"],S);const R=f(n,["mode"]);return e!==void 0&&R!=null&&d(e,["parameters","mode"],R),t}function GM(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["_url","model"],Ye(n,o));const r=f(e,["image"]);r!=null&&d(t,["instances[0]","image"],ri(r));const l=f(e,["upscaleFactor"]);l!=null&&d(t,["parameters","upscaleConfig","upscaleFactor"],l);const c=f(e,["config"]);return c!=null&&BM(c,t),t}function HM(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>rf(l))),d(e,["generatedImages"],r)}return e}function zM(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const o=f(n,["encodedVideo"]);o!=null&&d(e,["videoBytes"],ts(o));const r=f(n,["encoding"]);return r!=null&&d(e,["mimeType"],r),e}function YM(n){const e={},t=f(n,["gcsUri"]);t!=null&&d(e,["uri"],t);const o=f(n,["bytesBase64Encoded"]);o!=null&&d(e,["videoBytes"],ts(o));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}function JM(n){const e={},t=f(n,["image"]);t!=null&&d(e,["_self"],ri(t));const o=f(n,["maskMode"]);return o!=null&&d(e,["maskMode"],o),e}function KM(n){const e={},t=f(n,["image"]);t!=null&&d(e,["image"],af(t));const o=f(n,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function QM(n){const e={},t=f(n,["image"]);t!=null&&d(e,["image"],ri(t));const o=f(n,["referenceType"]);return o!=null&&d(e,["referenceType"],o),e}function uE(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["uri"],t);const o=f(n,["videoBytes"]);o!=null&&d(e,["encodedVideo"],ts(o));const r=f(n,["mimeType"]);return r!=null&&d(e,["encoding"],r),e}function cE(n){const e={},t=f(n,["uri"]);t!=null&&d(e,["gcsUri"],t);const o=f(n,["videoBytes"]);o!=null&&d(e,["bytesBase64Encoded"],ts(o));const r=f(n,["mimeType"]);return r!=null&&d(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function XM(n,e){const t={},o=f(n,["displayName"]);return e!==void 0&&o!=null&&d(e,["displayName"],o),t}function $M(n){const e={},t=f(n,["config"]);return t!=null&&XM(t,e),e}function WM(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),t}function ZM(n){const e={},t=f(n,["name"]);t!=null&&d(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&WM(o,e),e}function jM(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function eN(n,e){const t={},o=f(n,["customMetadata"]);if(e!==void 0&&o!=null){let l=o;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["customMetadata"],l)}const r=f(n,["chunkingConfig"]);return e!==void 0&&r!=null&&d(e,["chunkingConfig"],r),t}function tN(n){const e={},t=f(n,["name"]);t!=null&&d(e,["name"],t);const o=f(n,["metadata"]);o!=null&&d(e,["metadata"],o);const r=f(n,["done"]);r!=null&&d(e,["done"],r);const l=f(n,["error"]);l!=null&&d(e,["error"],l);const c=f(n,["response"]);return c!=null&&d(e,["response"],iN(c)),e}function nN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);const o=f(n,["fileName"]);o!=null&&d(e,["fileName"],o);const r=f(n,["config"]);return r!=null&&eN(r,e),e}function iN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["parent"]);o!=null&&d(e,["parent"],o);const r=f(n,["documentName"]);return r!=null&&d(e,["documentName"],r),e}function oN(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function sN(n){const e={},t=f(n,["config"]);return t!=null&&oN(t,e),e}function rN(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["fileSearchStores"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["fileSearchStores"],l)}return e}function fE(n,e){const t={},o=f(n,["mimeType"]);e!==void 0&&o!=null&&d(e,["mimeType"],o);const r=f(n,["displayName"]);e!==void 0&&r!=null&&d(e,["displayName"],r);const l=f(n,["customMetadata"]);if(e!==void 0&&l!=null){let h=l;Array.isArray(h)&&(h=h.map(y=>y)),d(e,["customMetadata"],h)}const c=f(n,["chunkingConfig"]);return e!==void 0&&c!=null&&d(e,["chunkingConfig"],c),t}function aN(n){const e={},t=f(n,["fileSearchStoreName"]);t!=null&&d(e,["_url","file_search_store_name"],t);const o=f(n,["config"]);return o!=null&&fE(o,e),e}function lN(n){const e={},t=f(n,["sdkHttpResponse"]);return t!=null&&d(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uN="Content-Type",cN="X-Server-Timeout",fN="User-Agent",Xh="x-goog-api-client",dN="1.34.0",hN=`google-genai-sdk/${dN}`,pN="v1beta1",mN="v1beta";class gN{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:pN,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:mN,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[c,h]of Object.entries(e.queryParams))r.searchParams.append(c,String(h));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,r.toString(),e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o,r){if(t&&t.timeout||r){const l=new AbortController,c=l.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const h=setTimeout(()=>l.abort(),t.timeout);h&&typeof h.unref=="function"&&h.unref()}r&&r.addEventListener("abort",()=>{l.abort()}),e.signal=c}return t&&t.extraBody!==null&&yN(e,t.extraBody),e.headers=await this.getHeadersInternal(t,o),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await h0(r),new zh(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await h0(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return ii(this,arguments,function*(){var o;const r=(o=e==null?void 0:e.body)===null||o===void 0?void 0:o.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let c="";const h="data:",y=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:m,value:v}=yield Ae(r.read());if(m){if(c.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=l.decode(v,{stream:!0});try{const U=JSON.parse(T);if("error"in U){const q=JSON.parse(JSON.stringify(U.error)),L=q.status,X=q.code,ie=`got status: ${L}. ${JSON.stringify(U)}`;if(X>=400&&X<600)throw new of({message:ie,status:X})}}catch(U){if(U.name==="ApiError")throw U}c+=T;let S=-1,R=0;for(;;){S=-1,R=0;for(const L of y){const X=c.indexOf(L);X!==-1&&(S===-1||X<S)&&(S=X,R=L.length)}if(S===-1)break;const U=c.substring(0,S);c=c.substring(S+R);const q=U.trim();if(q.startsWith(h)){const L=q.substring(h.length).trim();try{const X=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Ae(new zh(X))}catch(X){throw new Error(`exception parsing stream chunk ${L}. ${X}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=hN+" "+this.clientOptions.userAgentExtra;return e[fN]=t,e[Xh]=t,e[uN]="application/json",e}async getHeadersInternal(e,t){const o=new Headers;if(e&&e.headers){for(const[r,l]of Object.entries(e.headers))o.append(r,l);e.timeout&&e.timeout>0&&o.append(cN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(o,t),o}getFileName(e){var t;let o="";return typeof e=="string"&&(o=e.replace(/[/\\]+$/,""),o=(t=o.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),o}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,c=await l.stat(e);r.sizeBytes=String(c.size);const h=(o=t==null?void 0:t.mimeType)!==null&&o!==void 0?o:c.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=h;const y={file:r},m=this.getFileName(e),v=ce("upload/v1beta/files",y._url),T=await this.fetchUploadUrl(v,r.sizeBytes,r.mimeType,m,y,t==null?void 0:t.httpOptions);return l.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,o){var r;const l=this.clientOptions.uploader,c=await l.stat(t),h=String(c.size),y=(r=o==null?void 0:o.mimeType)!==null&&r!==void 0?r:c.type;if(y===void 0||y==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const m=`upload/v1beta/${e}:uploadToFileSearchStore`,v=this.getFileName(t),T={};o!=null&&fE(o,T);const S=await this.fetchUploadUrl(m,h,y,v,T,o==null?void 0:o.httpOptions);return l.uploadToFileSearchStore(t,S,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,o,r,l,c){var h;let y={};c?y=c:y={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${o}`},r?{"X-Goog-Upload-File-Name":r}:{})};const m=await this.request({path:e,body:JSON.stringify(l),httpMethod:"POST",httpOptions:y});if(!m||!(m!=null&&m.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const v=(h=m==null?void 0:m.headers)===null||h===void 0?void 0:h["x-goog-upload-url"];if(v===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return v}}async function h0(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new of({message:r,status:t}):new Error(r)}}function yN(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,c){const h=Object.assign({},l);for(const y in c)if(Object.prototype.hasOwnProperty.call(c,y)){const m=c[y],v=h[y];m&&typeof m=="object"&&!Array.isArray(m)&&v&&typeof v=="object"&&!Array.isArray(v)?h[y]=o(v,m):(v&&m&&typeof v!=typeof m&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${y}". Original type: ${typeof v}, New type: ${typeof m}. Overwriting.`),h[y]=m)}return h}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const _N="mcp_used/unknown";let vN=!1;function dE(n){for(const e of n)if(TN(e)||typeof e=="object"&&"inputSchema"in e)return!0;return vN}function hE(n){var e;const t=(e=n[Xh])!==null&&e!==void 0?e:"";n[Xh]=(t+` ${_N}`).trimStart()}function TN(n){return n!==null&&typeof n=="object"&&n instanceof bp}function EN(n){return ii(this,arguments,function*(t,o=100){let r,l=0;for(;l<o;){const c=yield Ae(t.listTools({cursor:r}));for(const h of c.tools)yield yield Ae(h),l++;if(!c.nextCursor)break;r=c.nextCursor}})}class bp{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new bp(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},c=[];for(const v of this.mcpClients)try{for(var h=!0,y=(t=void 0,oi(EN(v))),m;m=await y.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const T=r;c.push(T);const S=T.name;if(l[S])throw new Error(`Duplicate function name ${S} found in MCP tools. Please ensure function names are unique.`);l[S]=v}}catch(T){t={error:T}}finally{try{!h&&!e&&(o=y.return)&&await o.call(y)}finally{if(t)throw t.error}}this.mcpTools=c,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),jI(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const c=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:c.isError?{error:c}:c}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function SN(n,e,t){const o=new YI;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(o,r),e(o)}class AN{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),c=RN(this.apiClient.getDefaultHeaders()),h=this.apiClient.getApiKey(),y=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${h}`;let m=()=>{};const v=new Promise(W=>{m=W}),T=e.callbacks,S=function(){m({})},R=this.apiClient,U={onopen:S,onmessage:W=>{SN(R,T.onmessage,W)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(W){},onclose:(o=T==null?void 0:T.onclose)!==null&&o!==void 0?o:function(W){}},q=this.webSocketFactory.create(y,IN(c),U);q.connect(),await v;const ie={setup:{model:Ye(this.apiClient,e.model)}};return q.send(JSON.stringify(ie)),new CN(q,this.apiClient)}}class CN{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=$w(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Xw(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(qr.PLAY)}pause(){this.sendPlaybackControl(qr.PAUSE)}stop(){this.sendPlaybackControl(qr.STOP)}resetContext(){this.sendPlaybackControl(qr.RESET_CONTEXT)}close(){this.conn.close()}}function IN(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function RN(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function MN(n,e,t){const o=new zI;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const c=jw(l);Object.assign(o,c)}else Object.assign(o,l);e(o)}class NN{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new AN(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,c,h;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const y=this.apiClient.getWebsocketBaseUrl(),m=this.apiClient.getApiVersion();let v;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&dE(e.config.tools)&&hE(T);const S=VN(T);if(this.apiClient.isVertexAI())v=`${y}/ws/google.cloud.aiplatform.${m}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(S,v);else{const M=this.apiClient.getApiKey();let P="BidiGenerateContent",V="key";M!=null&&M.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),m!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),P="BidiGenerateContentConstrained",V="access_token"),v=`${y}/ws/google.ai.generativelanguage.${m}.GenerativeService.${P}?${V}=${M}`}let R=()=>{};const U=new Promise(M=>{R=M}),q=e.callbacks,L=function(){var M;(M=q==null?void 0:q.onopen)===null||M===void 0||M.call(q),R({})},X=this.apiClient,ie={onopen:L,onmessage:M=>{MN(X,q.onmessage,M)},onerror:(t=q==null?void 0:q.onerror)!==null&&t!==void 0?t:function(M){},onclose:(o=q==null?void 0:q.onclose)!==null&&o!==void 0?o:function(M){}},W=this.webSocketFactory.create(v,xN(S),ie);W.connect(),await U;let se=Ye(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&se.startsWith("publishers/")){const M=this.apiClient.getProject(),P=this.apiClient.getLocation();se=`projects/${M}/locations/${P}/`+se}let fe={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Uc.AUDIO]}:e.config.responseModalities=[Uc.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const le=(h=(c=e.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[],D=[];for(const M of le)if(this.isCallableTool(M)){const P=M;D.push(await P.tool())}else D.push(M);D.length>0&&(e.config.tools=D);const N={model:se,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?fe=Qw(this.apiClient,N):fe=Kw(this.apiClient,N),delete fe.config,W.send(JSON.stringify(fe)),new bN(W,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const DN={turnComplete:!0};class bN{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=Gn(t.turns),e.isVertexAI()||(o=o.map(r=>sf(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(wN)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},DN),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Zw(e)}:t={realtimeInput:Ww(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function xN(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function VN(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p0=10;function m0(n){var e,t,o;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const c of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Gr(c)){r=!0;break}if(!r)return!0;const l=(o=n==null?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function Gr(n){return"callTool"in n&&typeof n.callTool=="function"}function PN(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Gr(r)))!==null&&o!==void 0?o:!1}function g0(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((o,r)=>{if(Gr(o))return;const l=o;l.functionDeclarations&&l.functionDeclarations.length>0&&t.push(r)}),t}function y0(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class UN extends ro{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,c,h;const y=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!PN(t)||m0(t.config))return await this.generateContentInternal(y);const m=g0(t);if(m.length>0){const q=m.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${q}.`)}let v,T;const S=Gn(y.contents),R=(l=(r=(o=y.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:p0;let U=0;for(;U<R&&(v=await this.generateContentInternal(y),!(!v.functionCalls||v.functionCalls.length===0));){const q=v.candidates[0].content,L=[];for(const X of(h=(c=t.config)===null||c===void 0?void 0:c.tools)!==null&&h!==void 0?h:[])if(Gr(X)){const W=await X.callTool(v.functionCalls);L.push(...W)}U++,T={role:"user",parts:L},y.contents=Gn(y.contents),y.contents.push(q),y.contents.push(T),y0(y.config)&&(S.push(q),S.push(T))}return y0(y.config)&&(v.automaticFunctionCallingHistory=S),v},this.generateContentStream=async t=>{var o,r,l,c,h;if(this.maybeMoveToResponseJsonSchem(t),m0(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const y=g0(t);if(y.length>0){const T=y.map(S=>`tools[${S}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const m=(l=(r=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||l===void 0?void 0:l.streamFunctionCallArguments,v=(h=(c=t==null?void 0:t.config)===null||c===void 0?void 0:c.automaticFunctionCalling)===null||h===void 0?void 0:h.disable;if(m&&!v)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const c=[];if(o!=null&&o.generatedImages)for(const y of o.generatedImages)y&&(y!=null&&y.safetyAttributes)&&((r=y==null?void 0:y.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=y==null?void 0:y.safetyAttributes:c.push(y);let h;return l?h={generatedImages:c,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:h={generatedImages:c,sdkHttpResponse:o.sdkHttpResponse},h}),this.list=async t=>{var o;const c={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!c.config.queryBase){if(!((o=c.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");c.config.filter="labels.tune-type:*"}return new qs(no.PAGED_ITEM_MODELS,h=>this.listInternal(h),await this.listInternal(c),c)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var o,r,l,c,h,y;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=t.video)===null||o===void 0)&&o.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((c=(l=t.source)===null||l===void 0?void 0:l.video)===null||c===void 0)&&c.uri&&(!((y=(h=t.source)===null||h===void 0?void 0:h.video)===null||y===void 0)&&y.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const c=await Promise.all(l.map(async y=>Gr(y)?await y.tool():y)),h={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:c})};if(h.config.tools=c,e.config&&e.config.tools&&dE(e.config.tools)){const y=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let m=Object.assign({},y);Object.keys(m).length===0&&(m=this.apiClient.getDefaultHeaders()),hE(m),h.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:m})}return h}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const c of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(Gr(c)){const h=c,y=await h.tool();for(const m of(r=y.functionDeclarations)!==null&&r!==void 0?r:[]){if(!m.name)throw new Error("Function declaration name is required.");if(l.has(m.name))throw new Error(`Duplicate tool declaration name: ${m.name}`);l.set(m.name,h)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:p0;let c=!1,h=0;const y=await this.initAfcToolsMap(e);return(function(m,v,T){return ii(this,arguments,function*(){for(var S,R,U,q,L,X;h<l;){c&&(h++,c=!1);const fe=yield Ae(m.processParamsMaybeAddMcpUsage(T)),le=yield Ae(m.generateContentStreamInternal(fe)),D=[],N=[];try{for(var ie=!0,W=(R=void 0,oi(le)),se;se=yield Ae(W.next()),S=se.done,!S;ie=!0){q=se.value,ie=!1;const M=q;if(yield yield Ae(M),M.candidates&&(!((L=M.candidates[0])===null||L===void 0)&&L.content)){N.push(M.candidates[0].content);for(const P of(X=M.candidates[0].content.parts)!==null&&X!==void 0?X:[])if(h<l&&P.functionCall){if(!P.functionCall.name)throw new Error("Function call name was not returned by the model.");if(v.has(P.functionCall.name)){const V=yield Ae(v.get(P.functionCall.name).callTool([P.functionCall]));D.push(...V)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${v.keys()}, mising tool: ${P.functionCall.name}`)}}}}catch(M){R={error:M}}finally{try{!ie&&!S&&(U=W.return)&&(yield Ae(U.call(W)))}finally{if(R)throw R.error}}if(D.length>0){c=!0;const M=new ml;M.candidates=[{content:{role:"user",parts:D}}],yield yield Ae(M);const P=[];P.push(...N),P.push({role:"user",parts:D});const V=Gn(T.contents).concat(P);T.contents=V}else break}})})(this,y,e)}async generateContentInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=c0(this.apiClient,e);return h=ce("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=d0(v),S=new ml;return Object.assign(S,T),S})}else{const m=u0(this.apiClient,e);return h=ce("{model}:generateContent",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=f0(v),S=new ml;return Object.assign(S,T),S})}}async generateContentStreamInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=c0(this.apiClient,e);return h=ce("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),c.then(function(T){return ii(this,arguments,function*(){var S,R,U,q;try{for(var L=!0,X=oi(T),ie;ie=yield Ae(X.next()),S=ie.done,!S;L=!0){q=ie.value,L=!1;const W=q,se=d0(yield Ae(W.json()));se.sdkHttpResponse={headers:W.headers};const fe=new ml;Object.assign(fe,se),yield yield Ae(fe)}}catch(W){R={error:W}}finally{try{!L&&!S&&(U=X.return)&&(yield Ae(U.call(X)))}finally{if(R)throw R.error}}})})}else{const m=u0(this.apiClient,e);return h=ce("{model}:streamGenerateContent?alt=sse",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.requestStream({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),c.then(function(T){return ii(this,arguments,function*(){var S,R,U,q;try{for(var L=!0,X=oi(T),ie;ie=yield Ae(X.next()),S=ie.done,!S;L=!0){q=ie.value,L=!1;const W=q,se=f0(yield Ae(W.json()));se.sdkHttpResponse={headers:W.headers};const fe=new ml;Object.assign(fe,se),yield yield Ae(fe)}}catch(W){R={error:W}}finally{try{!L&&!S&&(U=X.return)&&(yield Ae(U.call(X)))}finally{if(R)throw R.error}}})})}}async embedContent(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=N1(this.apiClient,e);return h=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=b1(v),S=new Jv;return Object.assign(S,T),S})}else{const m=M1(this.apiClient,e);return h=ce("{model}:batchEmbedContents",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=D1(v),S=new Jv;return Object.assign(S,T),S})}}async generateImagesInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=G1(this.apiClient,e);return h=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=z1(v),S=new Kv;return Object.assign(S,T),S})}else{const m=B1(this.apiClient,e);return h=ce("{model}:predict",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=H1(v),S=new Kv;return Object.assign(S,T),S})}}async editImageInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=C1(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=I1(y),v=new VI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=GM(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=HM(y),v=new PI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=AM(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=CM(y),v=new UI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=DM(this.apiClient,e);return l=ce("{model}:predict",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=bM(y),v=new LI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=aM(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Qh(v))}else{const m=rM(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Kh(v))}}async listInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=gM(this.apiClient,e);return h=ce("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=_M(v),S=new Qv;return Object.assign(S,T),S})}else{const m=mM(this.apiClient,e);return h=ce("{models_url}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=yM(v),S=new Qv;return Object.assign(S,T),S})}}async update(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=FM(this.apiClient,e);return h=ce("{model}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>Qh(v))}else{const m=qM(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>Kh(v))}}async delete(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=T1(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=S1(v),S=new Xv;return Object.assign(S,T),S})}else{const m=v1(this.apiClient,e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=E1(v),S=new Xv;return Object.assign(S,T),S})}}async countTokens(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=g1(this.apiClient,e);return h=ce("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=_1(v),S=new $v;return Object.assign(S,T),S})}else{const m=m1(this.apiClient,e);return h=ce("{model}:countTokens",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=y1(v),S=new $v;return Object.assign(S,T),S})}}async computeTokens(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=l1(this.apiClient,e);return l=ce("{model}:computeTokens",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>{const m=u1(y),v=new kI;return Object.assign(v,m),v})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=$1(this.apiClient,e);return h=ce("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c.then(v=>{const T=Q1(v),S=new Lc;return Object.assign(S,T),S})}else{const m=X1(this.apiClient,e);return h=ce("{model}:predictLongRunning",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c.then(v=>{const T=K1(v),S=new Lc;return Object.assign(S,T),S})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LN extends ro{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const c=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:c,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=wI(e);return h=ce("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json()),c}else{const m=RI(e);return h=ce("{operationName}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json()),c}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=vI(e);return l=ce("{resourceName}:fetchPredictOperation",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kN(n){const e={},t=f(n,["data"]);if(t!=null&&d(e,["data"],t),f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function ON(n){const e={},t=f(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>KN(l))),d(e,["parts"],r)}const o=f(n,["role"]);return o!=null&&d(e,["role"],o),e}function qN(n,e,t){const o={},r=f(e,["expireTime"]);t!==void 0&&r!=null&&d(t,["expireTime"],r);const l=f(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&d(t,["newSessionExpireTime"],l);const c=f(e,["uses"]);t!==void 0&&c!=null&&d(t,["uses"],c);const h=f(e,["liveConnectConstraints"]);t!==void 0&&h!=null&&d(t,["bidiGenerateContentSetup"],JN(n,h));const y=f(e,["lockAdditionalFields"]);return t!==void 0&&y!=null&&d(t,["fieldMask"],y),o}function FN(n,e){const t={},o=f(e,["config"]);return o!=null&&d(t,["config"],qN(n,o,t)),t}function BN(n){const e={};if(f(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=f(n,["fileUri"]);t!=null&&d(e,["fileUri"],t);const o=f(n,["mimeType"]);return o!=null&&d(e,["mimeType"],o),e}function GN(n){const e={},t=f(n,["id"]);t!=null&&d(e,["id"],t);const o=f(n,["args"]);o!=null&&d(e,["args"],o);const r=f(n,["name"]);if(r!=null&&d(e,["name"],r),f(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(f(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function HN(n){const e={};if(f(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=f(n,["enableWidget"]);return t!=null&&d(e,["enableWidget"],t),e}function zN(n){const e={};if(f(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(f(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=f(n,["timeRangeFilter"]);return t!=null&&d(e,["timeRangeFilter"],t),e}function YN(n,e){const t={},o=f(n,["generationConfig"]);e!==void 0&&o!=null&&d(e,["setup","generationConfig"],o);const r=f(n,["responseModalities"]);e!==void 0&&r!=null&&d(e,["setup","generationConfig","responseModalities"],r);const l=f(n,["temperature"]);e!==void 0&&l!=null&&d(e,["setup","generationConfig","temperature"],l);const c=f(n,["topP"]);e!==void 0&&c!=null&&d(e,["setup","generationConfig","topP"],c);const h=f(n,["topK"]);e!==void 0&&h!=null&&d(e,["setup","generationConfig","topK"],h);const y=f(n,["maxOutputTokens"]);e!==void 0&&y!=null&&d(e,["setup","generationConfig","maxOutputTokens"],y);const m=f(n,["mediaResolution"]);e!==void 0&&m!=null&&d(e,["setup","generationConfig","mediaResolution"],m);const v=f(n,["seed"]);e!==void 0&&v!=null&&d(e,["setup","generationConfig","seed"],v);const T=f(n,["speechConfig"]);e!==void 0&&T!=null&&d(e,["setup","generationConfig","speechConfig"],Dp(T));const S=f(n,["thinkingConfig"]);e!==void 0&&S!=null&&d(e,["setup","generationConfig","thinkingConfig"],S);const R=f(n,["enableAffectiveDialog"]);e!==void 0&&R!=null&&d(e,["setup","generationConfig","enableAffectiveDialog"],R);const U=f(n,["systemInstruction"]);e!==void 0&&U!=null&&d(e,["setup","systemInstruction"],ON(nn(U)));const q=f(n,["tools"]);if(e!==void 0&&q!=null){let le=ta(q);Array.isArray(le)&&(le=le.map(D=>XN(ea(D)))),d(e,["setup","tools"],le)}const L=f(n,["sessionResumption"]);e!==void 0&&L!=null&&d(e,["setup","sessionResumption"],QN(L));const X=f(n,["inputAudioTranscription"]);e!==void 0&&X!=null&&d(e,["setup","inputAudioTranscription"],X);const ie=f(n,["outputAudioTranscription"]);e!==void 0&&ie!=null&&d(e,["setup","outputAudioTranscription"],ie);const W=f(n,["realtimeInputConfig"]);e!==void 0&&W!=null&&d(e,["setup","realtimeInputConfig"],W);const se=f(n,["contextWindowCompression"]);e!==void 0&&se!=null&&d(e,["setup","contextWindowCompression"],se);const fe=f(n,["proactivity"]);if(e!==void 0&&fe!=null&&d(e,["setup","proactivity"],fe),f(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function JN(n,e){const t={},o=f(e,["model"]);o!=null&&d(t,["setup","model"],Ye(n,o));const r=f(e,["config"]);return r!=null&&d(t,["config"],YN(r,t)),t}function KN(n){const e={},t=f(n,["mediaResolution"]);t!=null&&d(e,["mediaResolution"],t);const o=f(n,["codeExecutionResult"]);o!=null&&d(e,["codeExecutionResult"],o);const r=f(n,["executableCode"]);r!=null&&d(e,["executableCode"],r);const l=f(n,["fileData"]);l!=null&&d(e,["fileData"],BN(l));const c=f(n,["functionCall"]);c!=null&&d(e,["functionCall"],GN(c));const h=f(n,["functionResponse"]);h!=null&&d(e,["functionResponse"],h);const y=f(n,["inlineData"]);y!=null&&d(e,["inlineData"],kN(y));const m=f(n,["text"]);m!=null&&d(e,["text"],m);const v=f(n,["thought"]);v!=null&&d(e,["thought"],v);const T=f(n,["thoughtSignature"]);T!=null&&d(e,["thoughtSignature"],T);const S=f(n,["videoMetadata"]);return S!=null&&d(e,["videoMetadata"],S),e}function QN(n){const e={},t=f(n,["handle"]);if(t!=null&&d(e,["handle"],t),f(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function XN(n){const e={},t=f(n,["functionDeclarations"]);if(t!=null){let v=t;Array.isArray(v)&&(v=v.map(T=>T)),d(e,["functionDeclarations"],v)}if(f(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=f(n,["googleSearchRetrieval"]);o!=null&&d(e,["googleSearchRetrieval"],o);const r=f(n,["computerUse"]);r!=null&&d(e,["computerUse"],r);const l=f(n,["fileSearch"]);l!=null&&d(e,["fileSearch"],l);const c=f(n,["codeExecution"]);if(c!=null&&d(e,["codeExecution"],c),f(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const h=f(n,["googleMaps"]);h!=null&&d(e,["googleMaps"],HN(h));const y=f(n,["googleSearch"]);y!=null&&d(e,["googleSearch"],zN(y));const m=f(n,["urlContext"]);return m!=null&&d(e,["urlContext"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $N(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function WN(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=$N(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)l?n.fieldMask=l:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const c=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let h=[];r.length>0&&(h=r.map(m=>c.includes(m)?`generationConfig.${m}`:m));const y=[];l&&y.push(l),h.length>0&&y.push(...h),y.length>0?n.fieldMask=y.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class ZN extends ro{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const h=FN(this.apiClient,e);l=ce("auth_tokens",h._url),c=h._query,delete h.config,delete h._url,delete h._query;const y=WN(h,e.config);return r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(y),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(m=>m.json()),r.then(m=>m)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jN(n,e){const t={},o=f(n,["force"]);return e!==void 0&&o!=null&&d(e,["_query","force"],o),t}function eD(n){const e={},t=f(n,["name"]);t!=null&&d(e,["_url","name"],t);const o=f(n,["config"]);return o!=null&&jN(o,e),e}function tD(n){const e={},t=f(n,["name"]);return t!=null&&d(e,["_url","name"],t),e}function nD(n,e){const t={},o=f(n,["pageSize"]);e!==void 0&&o!=null&&d(e,["_query","pageSize"],o);const r=f(n,["pageToken"]);return e!==void 0&&r!=null&&d(e,["_query","pageToken"],r),t}function iD(n){const e={},t=f(n,["parent"]);t!=null&&d(e,["_url","parent"],t);const o=f(n,["config"]);return o!=null&&nD(o,e),e}function oD(n){const e={},t=f(n,["sdkHttpResponse"]);t!=null&&d(e,["sdkHttpResponse"],t);const o=f(n,["nextPageToken"]);o!=null&&d(e,["nextPageToken"],o);const r=f(n,["documents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),d(e,["documents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sD extends ro{constructor(e){super(),this.apiClient=e,this.list=async t=>new qs(no.PAGED_ITEM_DOCUMENTS,o=>this.listInternal({parent:t.parent,config:o.config}),await this.listInternal(t),t)}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=tD(e);return l=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=eD(e);r=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=iD(e);return l=ce("{parent}/documents",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=oD(y),v=new OI;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rD extends ro{constructor(e,t=new sD(e)){super(),this.apiClient=e,this.documents=t,this.list=async(o={})=>new qs(no.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(o),o)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=$M(e);return l=ce("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async get(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=jM(e);return l=ce("{name}",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>y)}}async delete(e){var t,o;let r="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=ZM(e);r=ce("{name}",c._url),l=c._query,delete c._url,delete c._query,await this.apiClient.request({path:r,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}}async listInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=sN(e);return l=ce("fileSearchStores",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=rN(y),v=new qI;return Object.assign(v,m),v})}}async uploadToFileSearchStoreInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=aN(e);return l=ce("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=lN(y),v=new FI;return Object.assign(v,m),v})}}async importFile(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=nN(e);return l=ce("{file_search_store_name}:importFile",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json()),r.then(y=>{const m=tN(y),v=new Ip;return Object.assign(v,m),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let pE=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return pE=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,o=>(+o^t()&15>>+o/4).toString(16))};const aD=()=>pE();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function $h(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Wh=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hn extends Error{}class ln extends Hn{constructor(e,t,o,r){super(`${ln.makeMessage(e,t,o)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,o){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):o;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,o,r){if(!e||!r)return new lf({message:o,cause:Wh(t)});const l=t;return e===400?new gE(e,l,o,r):e===401?new yE(e,l,o,r):e===403?new _E(e,l,o,r):e===404?new vE(e,l,o,r):e===409?new TE(e,l,o,r):e===422?new EE(e,l,o,r):e===429?new SE(e,l,o,r):e>=500?new AE(e,l,o,r):new ln(e,l,o,r)}}class Zh extends ln{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class lf extends ln{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class mE extends lf{constructor({message:e}={}){super({message:e??"Request timed out."})}}class gE extends ln{}class yE extends ln{}class _E extends ln{}class vE extends ln{}class TE extends ln{}class EE extends ln{}class SE extends ln{}class AE extends ln{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lD=/^[a-z][a-z0-9+.-]*:/i,uD=n=>lD.test(n);let jh=n=>(jh=Array.isArray,jh(n));const cD=jh;let fD=cD;const _0=fD;function dD(n){if(!n)return!0;for(const e in n)return!1;return!0}function hD(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const pD=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new Hn(`${n} must be an integer`);if(e<0)throw new Hn(`${n} must be a positive integer`);return e},mD=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const gD=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Pr="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yD(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const _D=()=>{var n,e,t,o,r;const l=yD();if(l==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":T0(Deno.build.os),"X-Stainless-Arch":v0(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(l==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":T0((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":v0((o=globalThis.process.arch)!==null&&o!==void 0?o:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const c=vD();return c?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${c.browser}`,"X-Stainless-Runtime-Version":c.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Pr,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function vD(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const o=t.exec(navigator.userAgent);if(o){const r=o[1]||0,l=o[2]||0,c=o[3]||0;return{browser:e,version:`${r}.${l}.${c}`}}}return null}const v0=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",T0=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let gc;const TD=()=>gc??(gc=_D());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ED(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function CE(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function SD(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return CE({start(){},async pull(t){const{done:o,value:r}=await e.next();o?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function IE(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function AD(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const o=n.getReader(),r=o.cancel();o.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const CD=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const RE=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Dh(n,e,t){return RE(),new File(n,e??"unknown_file",t)}function ID(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const RD=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wE=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",wD=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&wE(n),MD=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function ND(n,e,t){if(RE(),n=await n,wD(n))return n instanceof File?n:Dh([await n.arrayBuffer()],n.name);if(MD(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Dh(await ep(r),e,t)}const o=await ep(n);if(e||(e=ID(n)),!(t!=null&&t.type)){const r=o.find(l=>typeof l=="object"&&"type"in l&&l.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Dh(o,e,t)}async function ep(n){var e,t,o,r,l;let c=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)c.push(n);else if(wE(n))c.push(n instanceof Blob?n:await n.arrayBuffer());else if(RD(n))try{for(var h=!0,y=oi(n),m;m=await y.next(),e=m.done,!e;h=!0){r=m.value,h=!1;const v=r;c.push(...await ep(v))}}catch(v){t={error:v}}finally{try{!h&&!e&&(o=y.return)&&await o.call(y)}finally{if(t)throw t.error}}else{const v=(l=n==null?void 0:n.constructor)===null||l===void 0?void 0:l.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${DD(n)}`)}return c}function DD(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ME{constructor(e){this._client=e}}ME._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function NE(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const E0=Object.freeze(Object.create(null)),bD=(n=NE)=>(function(t,...o){if(t.length===1)return t[0];let r=!1;const l=[],c=t.reduce((v,T,S)=>{var R,U,q;/[?#]/.test(T)&&(r=!0);const L=o[S];let X=(r?encodeURIComponent:n)(""+L);return S!==o.length&&(L==null||typeof L=="object"&&L.toString===((q=Object.getPrototypeOf((U=Object.getPrototypeOf((R=L.hasOwnProperty)!==null&&R!==void 0?R:E0))!==null&&U!==void 0?U:E0))===null||q===void 0?void 0:q.toString))&&(X=L+"",l.push({start:v.length+T.length,length:X.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),v+T+(S===o.length?"":X)},""),h=c.split(/[?#]/,1)[0],y=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let m;for(;(m=y.exec(h))!==null;)l.push({start:m.index,length:m[0].length,error:`Value "${m[0]}" can't be safely passed as a path parameter`});if(l.sort((v,T)=>v.start-T.start),l.length>0){let v=0;const T=l.reduce((S,R)=>{const U=" ".repeat(R.start-v),q="^".repeat(R.length);return v=R.start+R.length,S+U+q},"");throw new Hn(`Path parameters result in path with invalid segments:
${l.map(S=>S.error).join(`
`)}
${c}
${T}`)}return c}),yc=bD(NE);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class DE extends ME{create(e,t){var o;const{api_version:r=this._client.apiVersion}=e,l=Oc(e,["api_version"]);if("model"in l&&"agent_config"in l)throw new Hn("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in l&&"generation_config"in l)throw new Hn("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(yc`/${r}/interactions`,Object.assign(Object.assign({body:l},t),{stream:(o=e.stream)!==null&&o!==void 0?o:!1}))}delete(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(yc`/${r}/interactions/${e}`,o)}cancel(e,t={},o){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(yc`/${r}/interactions/${e}/cancel`,o)}get(e,t={},o){var r;const l=t??{},{api_version:c=this._client.apiVersion}=l,h=Oc(l,["api_version"]);return this._client.get(yc`/${c}/interactions/${e}`,Object.assign(Object.assign({query:h},o),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}DE._key=Object.freeze(["interactions"]);class bE extends DE{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xD(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let o=0;for(const r of n)t.set(r,o),o+=r.length;return t}let _c;function xp(n){let e;return(_c??(e=new globalThis.TextEncoder,_c=e.encode.bind(e)))(n)}let vc;function S0(n){let e;return(vc??(e=new globalThis.TextDecoder,vc=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class uf{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?xp(e):e;this.buffer=xD([this.buffer,t]);const o=[];let r;for(;(r=VD(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){o.push(S0(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const l=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,c=S0(this.buffer.subarray(0,l));o.push(c),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return o}flush(){return this.buffer.length?this.decode(`
`):[]}}uf.NEWLINE_CHARS=new Set([`
`,"\r"]);uf.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function VD(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function PD(n){for(let o=0;o<n.length-1;o++){if(n[o]===10&&n[o+1]===10||n[o]===13&&n[o+1]===13)return o+2;if(n[o]===13&&n[o+1]===10&&o+3<n.length&&n[o+2]===13&&n[o+3]===10)return o+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qc={off:0,error:200,warn:300,info:400,debug:500},A0=(n,e,t)=>{if(n){if(hD(qc,n))return n;an(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(qc))}`)}};function yl(){}function Tc(n,e,t){return!e||qc[n]>qc[t]?yl:e[n].bind(e)}const UD={error:yl,warn:yl,info:yl,debug:yl};let C0=new WeakMap;function an(n){var e;const t=n.logger,o=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return UD;const r=C0.get(t);if(r&&r[0]===o)return r[1];const l={error:Tc("error",t,o),warn:Tc("warn",t,o),info:Tc("info",t,o),debug:Tc("debug",t,o)};return C0.set(t,[o,l]),l}const Ps=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Fr{constructor(e,t,o){this.iterator=e,this.controller=t,this.client=o}static fromSSEResponse(e,t,o){let r=!1;const l=o?an(o):console;function c(){return ii(this,arguments,function*(){var y,m,v,T;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,U=oi(LD(e,t)),q;q=yield Ae(U.next()),y=q.done,!y;R=!0){T=q.value,R=!1;const L=T;if(!S)if(L.data.startsWith("[DONE]")){S=!0;continue}else try{yield yield Ae(JSON.parse(L.data))}catch(X){throw l.error("Could not parse message into JSON:",L.data),l.error("From chunk:",L.raw),X}}}catch(L){m={error:L}}finally{try{!R&&!y&&(v=U.return)&&(yield Ae(v.call(U)))}finally{if(m)throw m.error}}S=!0}catch(L){if($h(L))return yield Ae(void 0);throw L}finally{S||t.abort()}})}return new Fr(c,t,o)}static fromReadableStream(e,t,o){let r=!1;function l(){return ii(this,arguments,function*(){var y,m,v,T;const S=new uf,R=IE(e);try{for(var U=!0,q=oi(R),L;L=yield Ae(q.next()),y=L.done,!y;U=!0){T=L.value,U=!1;const X=T;for(const ie of S.decode(X))yield yield Ae(ie)}}catch(X){m={error:X}}finally{try{!U&&!y&&(v=q.return)&&(yield Ae(v.call(q)))}finally{if(m)throw m.error}}for(const X of S.flush())yield yield Ae(X)})}function c(){return ii(this,arguments,function*(){var y,m,v,T;if(r)throw new Hn("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let S=!1;try{try{for(var R=!0,U=oi(l()),q;q=yield Ae(U.next()),y=q.done,!y;R=!0){T=q.value,R=!1;const L=T;S||L&&(yield yield Ae(JSON.parse(L)))}}catch(L){m={error:L}}finally{try{!R&&!y&&(v=U.return)&&(yield Ae(v.call(U)))}finally{if(m)throw m.error}}S=!0}catch(L){if($h(L))return yield Ae(void 0);throw L}finally{S||t.abort()}})}return new Fr(c,t,o)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],o=this.iterator(),r=l=>({next:()=>{if(l.length===0){const c=o.next();e.push(c),t.push(c)}return l.shift()}});return[new Fr(()=>r(e),this.controller,this.client),new Fr(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return CE({async start(){t=e[Symbol.asyncIterator]()},async pull(o){try{const{value:r,done:l}=await t.next();if(l)return o.close();const c=xp(JSON.stringify(r)+`
`);o.enqueue(c)}catch(r){o.error(r)}},async cancel(){var o;await((o=t.return)===null||o===void 0?void 0:o.call(t))}})}}function LD(n,e){return ii(this,arguments,function*(){var o,r,l,c;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Hn("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Hn("Attempted to iterate over a response with no body");const h=new OD,y=new uf,m=IE(n.body);try{for(var v=!0,T=oi(kD(m)),S;S=yield Ae(T.next()),o=S.done,!o;v=!0){c=S.value,v=!1;const R=c;for(const U of y.decode(R)){const q=h.decode(U);q&&(yield yield Ae(q))}}}catch(R){r={error:R}}finally{try{!v&&!o&&(l=T.return)&&(yield Ae(l.call(T)))}finally{if(r)throw r.error}}for(const R of y.flush()){const U=h.decode(R);U&&(yield yield Ae(U))}})}function kD(n){return ii(this,arguments,function*(){var t,o,r,l;let c=new Uint8Array;try{for(var h=!0,y=oi(n),m;m=yield Ae(y.next()),t=m.done,!t;h=!0){l=m.value,h=!1;const v=l;if(v==null)continue;const T=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?xp(v):v;let S=new Uint8Array(c.length+T.length);S.set(c),S.set(T,c.length),c=S;let R;for(;(R=PD(c))!==-1;)yield yield Ae(c.slice(0,R)),c=c.slice(R)}}catch(v){o={error:v}}finally{try{!h&&!t&&(r=y.return)&&(yield Ae(r.call(y)))}finally{if(o)throw o.error}}c.length>0&&(yield yield Ae(c))})}class OD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const l={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],l}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,o,r]=qD(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function qD(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function FD(n,e){const{response:t,requestLogID:o,retryOfRequestLogID:r,startTime:l}=e,c=await(async()=>{var h;if(e.options.stream)return an(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):Fr.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const y=t.headers.get("content-type"),m=(h=y==null?void 0:y.split(";")[0])===null||h===void 0?void 0:h.trim();return(m==null?void 0:m.includes("application/json"))||(m==null?void 0:m.endsWith("+json"))?await t.json():await t.text()})();return an(n).debug(`[${o}] response parsed`,Ps({retryOfRequestLogID:r,url:t.url,status:t.status,body:c,durationMs:Date.now()-l})),c}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vp extends Promise{constructor(e,t,o=FD){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=o,this.client=e}_thenUnwrap(e){return new Vp(this.client,this.responsePromise,async(t,o)=>e(await this.parseResponse(t,o),o))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xE=Symbol("brand.privateNullableHeaders");function*BD(n){if(!n)return;if(xE in n){const{values:o,nulls:r}=n;yield*o.entries();for(const l of r)yield[l,null];return}let e=!1,t;n instanceof Headers?t=n.entries():_0(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let o of t){const r=o[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const l=_0(o[1])?o[1]:[o[1]];let c=!1;for(const h of l)h!==void 0&&(e&&!c&&(c=!0,yield[r,null]),yield[r,h])}}const gl=n=>{const e=new Headers,t=new Set;for(const o of n){const r=new Set;for(const[l,c]of BD(o)){const h=l.toLowerCase();r.has(h)||(e.delete(l),r.add(h)),c===null?(e.delete(l),t.add(h)):(e.append(l,c),t.delete(h))}}return{[xE]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bh=n=>{var e,t,o,r,l,c;if(typeof globalThis.process<"u")return(o=(t=(e=hI)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&o!==void 0?o:void 0;if(typeof globalThis.Deno<"u")return(c=(l=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||l===void 0?void 0:l.call(r,n))===null||c===void 0?void 0:c.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var VE;class cf{constructor(e){var t,o,r,l,c,h,y,{baseURL:m=bh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(t=bh("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,S=Oc(e,["baseURL","apiKey","apiVersion"]);const R=Object.assign(Object.assign({apiKey:v,apiVersion:T},S),{baseURL:m||"https://generativelanguage.googleapis.com"});this.baseURL=R.baseURL,this.timeout=(o=R.timeout)!==null&&o!==void 0?o:cf.DEFAULT_TIMEOUT,this.logger=(r=R.logger)!==null&&r!==void 0?r:console;const U="warn";this.logLevel=U,this.logLevel=(c=(l=A0(R.logLevel,"ClientOptions.logLevel",this))!==null&&l!==void 0?l:A0(bh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&c!==void 0?c:U,this.fetchOptions=R.fetchOptions,this.maxRetries=(h=R.maxRetries)!==null&&h!==void 0?h:2,this.fetch=(y=R.fetch)!==null&&y!==void 0?y:ED(),this.encoder=CD,this._options=R,this.apiKey=v,this.apiVersion=T,this.clientAdapter=R.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=gl([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return gl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return gl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,o])=>typeof o<"u").map(([t,o])=>{if(typeof o=="string"||typeof o=="number"||typeof o=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(o)}`;if(o===null)return`${encodeURIComponent(t)}=`;throw new Hn(`Cannot stringify type ${typeof o}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Pr}`}defaultIdempotencyKey(){return`stainless-node-retry-${aD()}`}makeStatusError(e,t,o,r){return ln.generate(e,t,o,r)}buildURL(e,t,o){const r=!this.baseURLOverridden()&&o||this.baseURL,l=uD(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),c=this.defaultQuery();return dD(c)||(t=Object.assign(Object.assign({},c),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(l.search=this.stringifyQuery(t)),l.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:o}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,o){return this.request(Promise.resolve(o).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new Vp(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,o){var r,l,c;const h=await e,y=(r=h.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=y),await this.prepareOptions(h);const{req:m,url:v,timeout:T}=await this.buildRequest(h,{retryCount:y-t});await this.prepareRequest(m,{url:v,options:h});const S="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),R=o===void 0?"":`, retryOf: ${o}`,U=Date.now();if(an(this).debug(`[${S}] sending request`,Ps({retryOfRequestLogID:o,method:h.method,url:v,options:h,headers:m.headers})),!((l=h.signal)===null||l===void 0)&&l.aborted)throw new Zh;const q=new AbortController,L=await this.fetchWithTimeout(v,m,T,q).catch(Wh),X=Date.now();if(L instanceof globalThis.Error){const W=`retrying, ${t} attempts remaining`;if(!((c=h.signal)===null||c===void 0)&&c.aborted)throw new Zh;const se=$h(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(t)return an(this).info(`[${S}] connection ${se?"timed out":"failed"} - ${W}`),an(this).debug(`[${S}] connection ${se?"timed out":"failed"} (${W})`,Ps({retryOfRequestLogID:o,url:v,durationMs:X-U,message:L.message})),this.retryRequest(h,t,o??S);throw an(this).info(`[${S}] connection ${se?"timed out":"failed"} - error; no more retries left`),an(this).debug(`[${S}] connection ${se?"timed out":"failed"} (error; no more retries left)`,Ps({retryOfRequestLogID:o,url:v,durationMs:X-U,message:L.message})),se?new mE:new lf({cause:L})}const ie=`[${S}${R}] ${m.method} ${v} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${X-U}ms`;if(!L.ok){const W=await this.shouldRetry(L);if(t&&W){const M=`retrying, ${t} attempts remaining`;return await AD(L.body),an(this).info(`${ie} - ${M}`),an(this).debug(`[${S}] response error (${M})`,Ps({retryOfRequestLogID:o,url:L.url,status:L.status,headers:L.headers,durationMs:X-U})),this.retryRequest(h,t,o??S,L.headers)}const se=W?"error; no more retries left":"error; not retryable";an(this).info(`${ie} - ${se}`);const fe=await L.text().catch(M=>Wh(M).message),le=mD(fe),D=le?void 0:fe;throw an(this).debug(`[${S}] response error (${se})`,Ps({retryOfRequestLogID:o,url:L.url,status:L.status,headers:L.headers,message:D,durationMs:Date.now()-U})),this.makeStatusError(L.status,le,D,L.headers)}return an(this).info(ie),an(this).debug(`[${S}] response start`,Ps({retryOfRequestLogID:o,url:L.url,status:L.status,headers:L.headers,durationMs:X-U})),{response:L,options:h,controller:q,requestLogID:S,retryOfRequestLogID:o,startTime:U}}async fetchWithTimeout(e,t,o,r){const l=t||{},{signal:c,method:h}=l,y=Oc(l,["signal","method"]);c&&c.addEventListener("abort",()=>r.abort());const m=setTimeout(()=>r.abort(),o),v=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,T=Object.assign(Object.assign(Object.assign({signal:r.signal},v?{duplex:"half"}:{}),{method:"GET"}),y);h&&(T.method=h.toUpperCase());try{return await this.fetch.call(void 0,e,T)}finally{clearTimeout(m)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,o,r){var l;let c;const h=r==null?void 0:r.get("retry-after-ms");if(h){const m=parseFloat(h);Number.isNaN(m)||(c=m)}const y=r==null?void 0:r.get("retry-after");if(y&&!c){const m=parseFloat(y);Number.isNaN(m)?c=Date.parse(y)-Date.now():c=m*1e3}if(!(c&&0<=c&&c<60*1e3)){const m=(l=e.maxRetries)!==null&&l!==void 0?l:this.maxRetries;c=this.calculateDefaultRetryTimeoutMillis(t,m)}return await gD(c),this.makeRequest(e,t-1,o)}calculateDefaultRetryTimeoutMillis(e,t){const l=t-e,c=Math.min(.5*Math.pow(2,l),8),h=1-Math.random()*.25;return c*h*1e3}async buildRequest(e,{retryCount:t=0}={}){var o,r,l;const c=Object.assign({},e),{method:h,path:y,query:m,defaultBaseURL:v}=c,T=this.buildURL(y,m,v);"timeout"in c&&pD("timeout",c.timeout),c.timeout=(o=c.timeout)!==null&&o!==void 0?o:this.timeout;const{bodyHeaders:S,body:R}=this.buildBody({options:c}),U=await this.buildHeaders({options:e,method:h,bodyHeaders:S,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:h,headers:U},c.signal&&{signal:c.signal}),globalThis.ReadableStream&&R instanceof globalThis.ReadableStream&&{duplex:"half"}),R&&{body:R}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(l=c.fetchOptions)!==null&&l!==void 0?l:{}),url:T,timeout:c.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:o,retryCount:r}){let l={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),l[this.idempotencyHeader]=e.idempotencyKey);const c=await this.authHeaders(e);let h=gl([l,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),TD()),this._options.defaultHeaders,o,e.headers,c]);return this.validateHeaders(h),h.values}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const o=gl([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&o.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:SD(e)}:this.encoder({body:e,headers:o})}}cf.DEFAULT_TIMEOUT=6e4;class Gt extends cf{constructor(){super(...arguments),this.interactions=new bE(this)}}VE=Gt;Gt.GeminiNextGenAPIClient=VE;Gt.GeminiNextGenAPIClientError=Hn;Gt.APIError=ln;Gt.APIConnectionError=lf;Gt.APIConnectionTimeoutError=mE;Gt.APIUserAbortError=Zh;Gt.NotFoundError=vE;Gt.ConflictError=TE;Gt.RateLimitError=SE;Gt.BadRequestError=gE;Gt.AuthenticationError=yE;Gt.InternalServerError=AE;Gt.PermissionDeniedError=_E;Gt.UnprocessableEntityError=EE;Gt.toFile=ND;Gt.Interactions=bE;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GD(n,e){const t={},o=f(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function HD(n,e){const t={},o=f(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function zD(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function YD(n,e){const t={},o=f(n,["sdkHttpResponse"]);return o!=null&&d(t,["sdkHttpResponse"],o),t}function JD(n,e,t){const o={};if(f(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=f(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&d(e,["displayName"],r),f(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const l=f(n,["epochCount"]);e!==void 0&&l!=null&&d(e,["tuningTask","hyperparameters","epochCount"],l);const c=f(n,["learningRateMultiplier"]);if(c!=null&&d(o,["tuningTask","hyperparameters","learningRateMultiplier"],c),f(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(f(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(f(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const h=f(n,["batchSize"]);e!==void 0&&h!=null&&d(e,["tuningTask","hyperparameters","batchSize"],h);const y=f(n,["learningRate"]);if(e!==void 0&&y!=null&&d(e,["tuningTask","hyperparameters","learningRate"],y),f(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(f(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return o}function KD(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec"],I0(R))}else if(r==="PREFERENCE_TUNING"){const R=f(n,["validationDataset"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec"],I0(R))}const l=f(n,["tunedModelDisplayName"]);e!==void 0&&l!=null&&d(e,["tunedModelDisplayName"],l);const c=f(n,["description"]);e!==void 0&&c!=null&&d(e,["description"],c);let h=f(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","hyperParameters","epochCount"],R)}else if(h==="PREFERENCE_TUNING"){const R=f(n,["epochCount"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],R)}let y=f(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],R)}else if(y==="PREFERENCE_TUNING"){const R=f(n,["learningRateMultiplier"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],R)}let m=f(t,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","exportLastCheckpointOnly"],R)}else if(m==="PREFERENCE_TUNING"){const R=f(n,["exportLastCheckpointOnly"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],R)}let v=f(t,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&d(e,["supervisedTuningSpec","hyperParameters","adapterSize"],R)}else if(v==="PREFERENCE_TUNING"){const R=f(n,["adapterSize"]);e!==void 0&&R!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],R)}if(f(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(f(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=f(n,["labels"]);e!==void 0&&T!=null&&d(e,["labels"],T);const S=f(n,["beta"]);return e!==void 0&&S!=null&&d(e,["preferenceOptimizationSpec","hyperParameters","beta"],S),o}function QD(n,e){const t={},o=f(n,["baseModel"]);o!=null&&d(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&d(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&sb(l);const c=f(n,["config"]);return c!=null&&JD(c,t),t}function XD(n,e){const t={},o=f(n,["baseModel"]);o!=null&&d(t,["baseModel"],o);const r=f(n,["preTunedModel"]);r!=null&&d(t,["preTunedModel"],r);const l=f(n,["trainingDataset"]);l!=null&&rb(l,t,e);const c=f(n,["config"]);return c!=null&&KD(c,t,e),t}function $D(n,e){const t={},o=f(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function WD(n,e){const t={},o=f(n,["name"]);return o!=null&&d(t,["_url","name"],o),t}function ZD(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function jD(n,e,t){const o={},r=f(n,["pageSize"]);e!==void 0&&r!=null&&d(e,["_query","pageSize"],r);const l=f(n,["pageToken"]);e!==void 0&&l!=null&&d(e,["_query","pageToken"],l);const c=f(n,["filter"]);return e!==void 0&&c!=null&&d(e,["_query","filter"],c),o}function eb(n,e){const t={},o=f(n,["config"]);return o!=null&&ZD(o,t),t}function tb(n,e){const t={},o=f(n,["config"]);return o!=null&&jD(o,t),t}function nb(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const l=f(n,["tunedModels"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>PE(h))),d(t,["tuningJobs"],c)}return t}function ib(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const r=f(n,["nextPageToken"]);r!=null&&d(t,["nextPageToken"],r);const l=f(n,["tuningJobs"]);if(l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>tp(h))),d(t,["tuningJobs"],c)}return t}function ob(n,e){const t={},o=f(n,["name"]);o!=null&&d(t,["model"],o);const r=f(n,["name"]);return r!=null&&d(t,["endpoint"],r),t}function sb(n,e){const t={};if(f(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(f(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const o=f(n,["examples"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>l)),d(t,["examples","examples"],r)}return t}function rb(n,e,t){const o={};let r=f(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(r==="PREFERENCE_TUNING"){const c=f(n,["gcsUri"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}let l=f(t,["config","method"]);if(l===void 0&&(l="SUPERVISED_FINE_TUNING"),l==="SUPERVISED_FINE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["supervisedTuningSpec","trainingDatasetUri"],c)}else if(l==="PREFERENCE_TUNING"){const c=f(n,["vertexDatasetResource"]);e!==void 0&&c!=null&&d(e,["preferenceOptimizationSpec","trainingDatasetUri"],c)}if(f(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return o}function PE(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["state"]);l!=null&&d(t,["state"],$T(l));const c=f(n,["createTime"]);c!=null&&d(t,["createTime"],c);const h=f(n,["tuningTask","startTime"]);h!=null&&d(t,["startTime"],h);const y=f(n,["tuningTask","completeTime"]);y!=null&&d(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&d(t,["updateTime"],m);const v=f(n,["description"]);v!=null&&d(t,["description"],v);const T=f(n,["baseModel"]);T!=null&&d(t,["baseModel"],T);const S=f(n,["_self"]);return S!=null&&d(t,["tunedModel"],ob(S)),t}function tp(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["state"]);l!=null&&d(t,["state"],$T(l));const c=f(n,["createTime"]);c!=null&&d(t,["createTime"],c);const h=f(n,["startTime"]);h!=null&&d(t,["startTime"],h);const y=f(n,["endTime"]);y!=null&&d(t,["endTime"],y);const m=f(n,["updateTime"]);m!=null&&d(t,["updateTime"],m);const v=f(n,["error"]);v!=null&&d(t,["error"],v);const T=f(n,["description"]);T!=null&&d(t,["description"],T);const S=f(n,["baseModel"]);S!=null&&d(t,["baseModel"],S);const R=f(n,["tunedModel"]);R!=null&&d(t,["tunedModel"],R);const U=f(n,["preTunedModel"]);U!=null&&d(t,["preTunedModel"],U);const q=f(n,["supervisedTuningSpec"]);q!=null&&d(t,["supervisedTuningSpec"],q);const L=f(n,["preferenceOptimizationSpec"]);L!=null&&d(t,["preferenceOptimizationSpec"],L);const X=f(n,["tuningDataStats"]);X!=null&&d(t,["tuningDataStats"],X);const ie=f(n,["encryptionSpec"]);ie!=null&&d(t,["encryptionSpec"],ie);const W=f(n,["partnerModelTuningSpec"]);W!=null&&d(t,["partnerModelTuningSpec"],W);const se=f(n,["customBaseModel"]);se!=null&&d(t,["customBaseModel"],se);const fe=f(n,["experiment"]);fe!=null&&d(t,["experiment"],fe);const le=f(n,["labels"]);le!=null&&d(t,["labels"],le);const D=f(n,["outputUri"]);D!=null&&d(t,["outputUri"],D);const N=f(n,["pipelineJob"]);N!=null&&d(t,["pipelineJob"],N);const M=f(n,["serviceAccount"]);M!=null&&d(t,["serviceAccount"],M);const P=f(n,["tunedModelDisplayName"]);P!=null&&d(t,["tunedModelDisplayName"],P);const V=f(n,["veoTuningSpec"]);return V!=null&&d(t,["veoTuningSpec"],V),t}function ab(n,e){const t={},o=f(n,["sdkHttpResponse"]);o!=null&&d(t,["sdkHttpResponse"],o);const r=f(n,["name"]);r!=null&&d(t,["name"],r);const l=f(n,["metadata"]);l!=null&&d(t,["metadata"],l);const c=f(n,["done"]);c!=null&&d(t,["done"],c);const h=f(n,["error"]);return h!=null&&d(t,["error"],h),t}function I0(n,e){const t={},o=f(n,["gcsUri"]);o!=null&&d(t,["validationDatasetUri"],o);const r=f(n,["vertexDatasetResource"]);return r!=null&&d(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class lb extends ro{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new qs(no.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var o;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((o=t.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const l=Object.assign(Object.assign({},t),{preTunedModel:r});return l.baseModel=void 0,await this.tuneInternal(l)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),l=await this.tuneMldevInternal(r);let c="";return l.metadata!==void 0&&l.metadata.tunedModel!==void 0?c=l.metadata.tunedModel:l.name!==void 0&&l.name.includes("/operations/")&&(c=l.name.split("/operations/")[0]),{name:c,state:Hh.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=WD(e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>tp(v))}else{const m=$D(e);return h=ce("{name}",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>PE(v))}}async listInternal(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=tb(e);return h=ce("tuningJobs",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=ib(v),S=new Wv;return Object.assign(S,T),S})}else{const m=eb(e);return h=ce("tunedModels",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=nb(v),S=new Wv;return Object.assign(S,T),S})}}async cancel(e){var t,o,r,l;let c,h="",y={};if(this.apiClient.isVertexAI()){const m=HD(e);return h=ce("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=YD(v),S=new Zv;return Object.assign(S,T),S})}else{const m=GD(e);return h=ce("{name}:cancel",m._url),y=m._query,delete m._url,delete m._query,c=this.apiClient.request({path:h,queryParams:y,body:JSON.stringify(m),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(v=>v.json().then(T=>{const S=T;return S.sdkHttpResponse={headers:v.headers},S})),c.then(v=>{const T=zD(v),S=new Zv;return Object.assign(S,T),S})}}async tuneInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI()){const h=XD(e,e);return l=ce("tuningJobs",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>tp(y))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",c={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const h=QD(e);return l=ce("tunedModels",h._url),c=h._query,delete h._url,delete h._query,r=this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(y=>y.json().then(m=>{const v=m;return v.sdkHttpResponse={headers:y.headers},v})),r.then(y=>ab(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ub{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const cb=1024*1024*8,fb=3,db=1e3,hb=2,Fc="x-goog-upload-status";async function pb(n,e,t){var o;const r=await UE(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Fc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return l.file}async function mb(n,e,t){var o;const r=await UE(n,e,t),l=await(r==null?void 0:r.json());if(((o=r==null?void 0:r.headers)===null||o===void 0?void 0:o[Fc])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const c=zT(l),h=new Rp;return Object.assign(h,c),h}async function UE(n,e,t){var o,r;let l=0,c=0,h=new zh(new Response),y="upload";for(l=n.size;c<l;){const m=Math.min(cb,l-c),v=n.slice(c,c+m);c+m>=l&&(y+=", finalize");let T=0,S=db;for(;T<fb&&(h=await t.request({path:"",body:v,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":y,"X-Goog-Upload-Offset":String(c),"Content-Length":String(m)}}}),!(!((o=h==null?void 0:h.headers)===null||o===void 0)&&o[Fc]));)T++,await yb(S),S=S*hb;if(c+=m,((r=h==null?void 0:h.headers)===null||r===void 0?void 0:r[Fc])!=="active")break;if(l<=c)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return h}async function gb(n){return{size:n.size,type:n.type}}function yb(n){return new Promise(e=>setTimeout(e,n))}class _b{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await pb(e,t,o)}async uploadToFileSearchStore(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await mb(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await gb(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vb{create(e,t,o){return new Tb(e,t,o)}}class Tb{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const R0="x-goog-api-key";class Eb{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(R0)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(R0,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Sb="gl-node/";class Ab{get interactions(){if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const e=this.httpOptions;e!=null&&e.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const t=new Gt({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:e==null?void 0:e.timeout});return this._interactions=t.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=yI(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new Eb(this.apiKey);this.apiClient=new gN({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Sb+"web",uploader:new _b,downloader:new ub}),this.models=new UN(this.apiClient),this.live=new NN(this.apiClient,r,new vb),this.batches=new JR(this.apiClient),this.chats=new ww(this.models,this.apiClient),this.caches=new Cw(this.apiClient),this.files=new kw(this.apiClient),this.operations=new LN(this.apiClient),this.authTokens=new ZN(this.apiClient),this.tunings=new lb(this.apiClient),this.fileSearchStores=new rD(this.apiClient)}}var eo=(n=>(n.Activity="Activity",n.Mindfulness="Mindfulness",n.Social="Social",n.Creative="Creative",n.Inspirational="Inspirational",n.Music="Music",n))(eo||{});const Cb={type:yn.OBJECT,properties:{title:{type:yn.STRING,description:"Short, catchy name for the idea."},description:{type:yn.STRING,description:"2-4 sentences explaining the idea and why it fits the mood."},category:{type:yn.STRING,enum:Object.values(eo),description:"The category of the idea. Must be exactly one of the provided values."},uniquePoint:{type:yn.STRING,description:"What makes this idea special or a unique take."}},required:["title","description","category","uniquePoint"]};async function Ib(n,e){const t=new Ab({apiKey:"AIzaSyAqfpOdms69lES71sG_Ud5f4TNoIDGfPnY"}),r=`
    Generate a list of 5 unique and inspiring ideas for someone feeling ${HT[e][n.nameKey]||n.id}.
    LANGUAGE REQUIREMENT: All content (title, description, uniquePoint) MUST be written in ${e.toUpperCase()}.
    
    The ideas should be practical, positive, and tailored to this specific mood.
    For each idea, provide a title, description, category, and a unique point.
    The category must be one of the following exact English strings: ${Object.values(eo).join(", ")}.
    Be creative and avoid clichs.
  `;try{const c=(await t.models.generateContent({model:"gemini-3-flash-preview",contents:r,config:{responseMimeType:"application/json",responseSchema:{type:yn.ARRAY,items:Cb}}})).text.trim();return JSON.parse(c).map(y=>({...y,id:Math.random().toString(36).substring(2,11),timestamp:Date.now(),isFromHistory:!1}))}catch(l){throw console.error("Error generating ideas with Gemini:",l),new Error("Failed to generate fresh ideas from AI.")}}const Rb=()=>{};var w0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=function(n){const e=[];let t=0;for(let o=0;o<n.length;o++){let r=n.charCodeAt(o);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++o)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},wb=function(n){const e=[];let t=0,o=0;for(;t<n.length;){const r=n[t++];if(r<128)e[o++]=String.fromCharCode(r);else if(r>191&&r<224){const l=n[t++];e[o++]=String.fromCharCode((r&31)<<6|l&63)}else if(r>239&&r<365){const l=n[t++],c=n[t++],h=n[t++],y=((r&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(y>>10)),e[o++]=String.fromCharCode(56320+(y&1023))}else{const l=n[t++],c=n[t++];e[o++]=String.fromCharCode((r&15)<<12|(l&63)<<6|c&63)}}return e.join("")},kE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let r=0;r<n.length;r+=3){const l=n[r],c=r+1<n.length,h=c?n[r+1]:0,y=r+2<n.length,m=y?n[r+2]:0,v=l>>2,T=(l&3)<<4|h>>4;let S=(h&15)<<2|m>>6,R=m&63;y||(R=64,c||(S=64)),o.push(t[v],t[T],t[S],t[R])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(LE(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):wb(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let r=0;r<n.length;){const l=t[n.charAt(r++)],h=r<n.length?t[n.charAt(r)]:0;++r;const m=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,l==null||h==null||m==null||T==null)throw new Mb;const S=l<<2|h>>4;if(o.push(S),m!==64){const R=h<<4&240|m>>2;if(o.push(R),T!==64){const U=m<<6&192|T;o.push(U)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Mb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Nb=function(n){const e=LE(n);return kE.encodeByteArray(e,!0)},Bc=function(n){return Nb(n).replace(/\./g,"")},Db=function(n){try{return kE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=()=>bb().__FIREBASE_DEFAULTS__,Vb=()=>{if(typeof process>"u"||typeof w0>"u")return;const n=w0.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Pb=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Db(n[1]);return e&&JSON.parse(e)},Pp=()=>{try{return Rb()||xb()||Vb()||Pb()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ub=n=>{var e,t;return(t=(e=Pp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},Lb=n=>{const e=Ub(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),o]:[e.substring(0,t),o]},OE=()=>{var n;return(n=Pp())==null?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,o)=>{t?this.reject(t):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Ob(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},o=e||"demo-project",r=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${o}`,aud:o,iat:r,exp:r+3600,auth_time:r,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Bc(JSON.stringify(t)),Bc(JSON.stringify(c)),""].join(".")}const El={};function Fb(){const n={prod:[],emulator:[]};for(const e of Object.keys(El))El[e]?n.emulator.push(e):n.prod.push(e);return n}function Bb(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let M0=!1;function Gb(n,e){if(typeof window>"u"||typeof document>"u"||!Up(window.location.host)||El[n]===e||El[n]||M0)return;El[n]=e;function t(S){return`__firebase__banner__${S}`}const o="__firebase__banner",l=Fb().prod.length>0;function c(){const S=document.getElementById(o);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function y(S,R){S.setAttribute("width","24"),S.setAttribute("id",R),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function m(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{M0=!0,c()},S}function v(S,R){S.setAttribute("id",R),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function T(){const S=Bb(o),R=t("text"),U=document.getElementById(R)||document.createElement("span"),q=t("learnmore"),L=document.getElementById(q)||document.createElement("a"),X=t("preprendIcon"),ie=document.getElementById(X)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const W=S.element;h(W),v(L,q);const se=m();y(ie,X),W.append(ie,U,L,se),document.body.appendChild(W)}l?(U.innerText="Preview backend disconnected.",ie.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(ie.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",R)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function zb(){var e;const n=(e=Pp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Yb(){return!zb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jb(){try{return typeof indexedDB=="object"}catch{return!1}}function Kb(){return new Promise((n,e)=>{try{let t=!0;const o="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(o);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(o),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var l;e(((l=r.error)==null?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="FirebaseError";class ia extends Error{constructor(e,t,o){super(t),this.code=e,this.customData=o,this.name=Qb,Object.setPrototypeOf(this,ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qE.prototype.create)}}class qE{constructor(e,t,o){this.service=e,this.serviceName=t,this.errors=o}create(e,...t){const o=t[0]||{},r=`${this.service}/${e}`,l=this.errors[e],c=l?Xb(l,o):"Error",h=`${this.serviceName}: ${c} (${r}).`;return new ia(r,h,o)}}function Xb(n,e){return n.replace($b,(t,o)=>{const r=e[o];return r!=null?String(r):`<${o}?>`})}const $b=/\{\$([^}]+)}/g;function Gc(n,e){if(n===e)return!0;const t=Object.keys(n),o=Object.keys(e);for(const r of t){if(!o.includes(r))return!1;const l=n[r],c=e[r];if(N0(l)&&N0(c)){if(!Gc(l,c))return!1}else if(l!==c)return!1}for(const r of o)if(!t.includes(r))return!1;return!0}function N0(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kr(n){return n&&n._delegate?n._delegate:n}class Rl{constructor(e,t,o){this.name=e,this.instanceFactory=t,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const o=new kb;if(this.instancesDeferred.set(t,o),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&o.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(o)return null;throw r}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(jb(e))try{this.getOrInitializeService({instanceIdentifier:Us})}catch{}for(const[t,o]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:r});o.resolve(l)}catch{}}}}clearInstance(e=Us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Us){return this.instances.has(e)}getOptions(e=Us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:o,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);o===h&&c.resolve(r)}return r}onInit(e,t){const o=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(o)??new Set;r.add(e),this.onInitCallbacks.set(o,r);const l=this.instances.get(o);return l&&e(l,o),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const o=this.onInitCallbacks.get(t);if(o)for(const r of o)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:Zb(e),options:t}),this.instances.set(e,o),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=Us){return this.component?this.component.multipleInstances?e:Us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Zb(n){return n===Us?void 0:n}function jb(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ex{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Wb(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Be||(Be={}));const tx={debug:Be.DEBUG,verbose:Be.VERBOSE,info:Be.INFO,warn:Be.WARN,error:Be.ERROR,silent:Be.SILENT},nx=Be.INFO,ix={[Be.DEBUG]:"log",[Be.VERBOSE]:"log",[Be.INFO]:"info",[Be.WARN]:"warn",[Be.ERROR]:"error"},ox=(n,e,...t)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),r=ix[e];if(r)console[r](`[${o}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class FE{constructor(e){this.name=e,this._logLevel=nx,this._logHandler=ox,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?tx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Be.DEBUG,...e),this._logHandler(this,Be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Be.VERBOSE,...e),this._logHandler(this,Be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Be.INFO,...e),this._logHandler(this,Be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Be.WARN,...e),this._logHandler(this,Be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Be.ERROR,...e),this._logHandler(this,Be.ERROR,...e)}}const sx=(n,e)=>e.some(t=>n instanceof t);let D0,b0;function rx(){return D0||(D0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ax(){return b0||(b0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const BE=new WeakMap,np=new WeakMap,GE=new WeakMap,xh=new WeakMap,Lp=new WeakMap;function lx(n){const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(zo(n.result)),r()},c=()=>{o(n.error),r()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&BE.set(t,n)}).catch(()=>{}),Lp.set(e,n),e}function ux(n){if(np.has(n))return;const e=new Promise((t,o)=>{const r=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),r()},c=()=>{o(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});np.set(n,e)}let ip={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return np.get(n);if(e==="objectStoreNames")return n.objectStoreNames||GE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zo(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function cx(n){ip=n(ip)}function fx(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const o=n.call(Vh(this),e,...t);return GE.set(o,e.sort?e.sort():[e]),zo(o)}:ax().includes(n)?function(...e){return n.apply(Vh(this),e),zo(BE.get(this))}:function(...e){return zo(n.apply(Vh(this),e))}}function dx(n){return typeof n=="function"?fx(n):(n instanceof IDBTransaction&&ux(n),sx(n,rx())?new Proxy(n,ip):n)}function zo(n){if(n instanceof IDBRequest)return lx(n);if(xh.has(n))return xh.get(n);const e=dx(n);return e!==n&&(xh.set(n,e),Lp.set(e,n)),e}const Vh=n=>Lp.get(n);function hx(n,e,{blocked:t,upgrade:o,blocking:r,terminated:l}={}){const c=indexedDB.open(n,e),h=zo(c);return o&&c.addEventListener("upgradeneeded",y=>{o(zo(c.result),y.oldVersion,y.newVersion,zo(c.transaction),y)}),t&&c.addEventListener("blocked",y=>t(y.oldVersion,y.newVersion,y)),h.then(y=>{l&&y.addEventListener("close",()=>l()),r&&y.addEventListener("versionchange",m=>r(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const px=["get","getKey","getAll","getAllKeys","count"],mx=["put","add","delete","clear"],Ph=new Map;function x0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Ph.get(e))return Ph.get(e);const t=e.replace(/FromIndex$/,""),o=e!==t,r=mx.includes(t);if(!(t in(o?IDBIndex:IDBObjectStore).prototype)||!(r||px.includes(t)))return;const l=async function(c,...h){const y=this.transaction(c,r?"readwrite":"readonly");let m=y.store;return o&&(m=m.index(h.shift())),(await Promise.all([m[t](...h),r&&y.done]))[0]};return Ph.set(e,l),l}cx(n=>({...n,get:(e,t,o)=>x0(e,t)||n.get(e,t,o),has:(e,t)=>!!x0(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(yx(t)){const o=t.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(t=>t).join(" ")}}function yx(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const op="@firebase/app",V0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new FE("@firebase/app"),_x="@firebase/app-compat",vx="@firebase/analytics-compat",Tx="@firebase/analytics",Ex="@firebase/app-check-compat",Sx="@firebase/app-check",Ax="@firebase/auth",Cx="@firebase/auth-compat",Ix="@firebase/database",Rx="@firebase/data-connect",wx="@firebase/database-compat",Mx="@firebase/functions",Nx="@firebase/functions-compat",Dx="@firebase/installations",bx="@firebase/installations-compat",xx="@firebase/messaging",Vx="@firebase/messaging-compat",Px="@firebase/performance",Ux="@firebase/performance-compat",Lx="@firebase/remote-config",kx="@firebase/remote-config-compat",Ox="@firebase/storage",qx="@firebase/storage-compat",Fx="@firebase/firestore",Bx="@firebase/ai",Gx="@firebase/firestore-compat",Hx="firebase",zx="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",Yx={[op]:"fire-core",[_x]:"fire-core-compat",[Tx]:"fire-analytics",[vx]:"fire-analytics-compat",[Sx]:"fire-app-check",[Ex]:"fire-app-check-compat",[Ax]:"fire-auth",[Cx]:"fire-auth-compat",[Ix]:"fire-rtdb",[Rx]:"fire-data-connect",[wx]:"fire-rtdb-compat",[Mx]:"fire-fn",[Nx]:"fire-fn-compat",[Dx]:"fire-iid",[bx]:"fire-iid-compat",[xx]:"fire-fcm",[Vx]:"fire-fcm-compat",[Px]:"fire-perf",[Ux]:"fire-perf-compat",[Lx]:"fire-rc",[kx]:"fire-rc-compat",[Ox]:"fire-gcs",[qx]:"fire-gcs-compat",[Fx]:"fire-fst",[Gx]:"fire-fst-compat",[Bx]:"fire-vertex","fire-js":"fire-js",[Hx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hc=new Map,Jx=new Map,rp=new Map;function P0(n,e){try{n.container.addComponent(e)}catch(t){io.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function zc(n){const e=n.name;if(rp.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;rp.set(e,n);for(const t of Hc.values())P0(t,n);for(const t of Jx.values())P0(t,n);return!0}function Kx(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Qx(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yo=new qE("app","Firebase",Xx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,t,o){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Rl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yo.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wx=zx;function HE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const o={name:sp,automaticDataCollectionEnabled:!0,...e},r=o.name;if(typeof r!="string"||!r)throw Yo.create("bad-app-name",{appName:String(r)});if(t||(t=OE()),!t)throw Yo.create("no-options");const l=Hc.get(r);if(l){if(Gc(t,l.options)&&Gc(o,l.config))return l;throw Yo.create("duplicate-app",{appName:r})}const c=new ex(r);for(const y of rp.values())c.addComponent(y);const h=new $x(t,o,c);return Hc.set(r,h),h}function Zx(n=sp){const e=Hc.get(n);if(!e&&n===sp&&OE())return HE();if(!e)throw Yo.create("no-app",{appName:n});return e}function Hr(n,e,t){let o=Yx[n]??n;t&&(o+=`-${t}`);const r=o.match(/\s|\//),l=e.match(/\s|\//);if(r||l){const c=[`Unable to register library "${o}" with version "${e}":`];r&&c.push(`library name "${o}" contains illegal characters (whitespace or "/")`),r&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(c.join(" "));return}zc(new Rl(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jx="firebase-heartbeat-database",e2=1,wl="firebase-heartbeat-store";let Uh=null;function zE(){return Uh||(Uh=hx(jx,e2,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(wl)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yo.create("idb-open",{originalErrorMessage:n.message})})),Uh}async function t2(n){try{const t=(await zE()).transaction(wl),o=await t.objectStore(wl).get(YE(n));return await t.done,o}catch(e){if(e instanceof ia)io.warn(e.message);else{const t=Yo.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});io.warn(t.message)}}}async function U0(n,e){try{const o=(await zE()).transaction(wl,"readwrite");await o.objectStore(wl).put(e,YE(n)),await o.done}catch(t){if(t instanceof ia)io.warn(t.message);else{const o=Yo.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});io.warn(o.message)}}}function YE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=1024,i2=30;class o2{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new r2(t),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=L0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(c=>c.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:r}),this._heartbeatsCache.heartbeats.length>i2){const c=a2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(c,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(o){io.warn(o)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=L0(),{heartbeatsToSend:o,unsentEntries:r}=s2(this._heartbeatsCache.heartbeats),l=Bc(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return io.warn(t),""}}}function L0(){return new Date().toISOString().substring(0,10)}function s2(n,e=n2){const t=[];let o=n.slice();for(const r of n){const l=t.find(c=>c.agent===r.agent);if(l){if(l.dates.push(r.date),k0(t)>e){l.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),k0(t)>e){t.pop();break}o=o.slice(1)}return{heartbeatsToSend:t,unsentEntries:o}}class r2{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jb()?Kb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await t2(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return U0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return U0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function k0(n){return Bc(JSON.stringify({version:2,heartbeats:n})).length}function a2(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let o=1;o<n.length;o++)n[o].date<t&&(t=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(n){zc(new Rl("platform-logger",e=>new gx(e),"PRIVATE")),zc(new Rl("heartbeat",e=>new o2(e),"PRIVATE")),Hr(op,V0,n),Hr(op,V0,"esm2020"),Hr("fire-js","")}l2("");var u2="firebase",c2="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hr(u2,c2,"app");var O0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Jo,JE;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,N){function M(){}M.prototype=N.prototype,D.F=N.prototype,D.prototype=new M,D.prototype.constructor=D,D.D=function(P,V,F){for(var b=Array(arguments.length-2),ke=2;ke<arguments.length;ke++)b[ke-2]=arguments[ke];return N.prototype[V].apply(P,b)}}function t(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(o,t),o.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(D,N,M){M||(M=0);const P=Array(16);if(typeof N=="string")for(var V=0;V<16;++V)P[V]=N.charCodeAt(M++)|N.charCodeAt(M++)<<8|N.charCodeAt(M++)<<16|N.charCodeAt(M++)<<24;else for(V=0;V<16;++V)P[V]=N[M++]|N[M++]<<8|N[M++]<<16|N[M++]<<24;N=D.g[0],M=D.g[1],V=D.g[2];let F=D.g[3],b;b=N+(F^M&(V^F))+P[0]+3614090360&4294967295,N=M+(b<<7&4294967295|b>>>25),b=F+(V^N&(M^V))+P[1]+3905402710&4294967295,F=N+(b<<12&4294967295|b>>>20),b=V+(M^F&(N^M))+P[2]+606105819&4294967295,V=F+(b<<17&4294967295|b>>>15),b=M+(N^V&(F^N))+P[3]+3250441966&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(F^M&(V^F))+P[4]+4118548399&4294967295,N=M+(b<<7&4294967295|b>>>25),b=F+(V^N&(M^V))+P[5]+1200080426&4294967295,F=N+(b<<12&4294967295|b>>>20),b=V+(M^F&(N^M))+P[6]+2821735955&4294967295,V=F+(b<<17&4294967295|b>>>15),b=M+(N^V&(F^N))+P[7]+4249261313&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(F^M&(V^F))+P[8]+1770035416&4294967295,N=M+(b<<7&4294967295|b>>>25),b=F+(V^N&(M^V))+P[9]+2336552879&4294967295,F=N+(b<<12&4294967295|b>>>20),b=V+(M^F&(N^M))+P[10]+4294925233&4294967295,V=F+(b<<17&4294967295|b>>>15),b=M+(N^V&(F^N))+P[11]+2304563134&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(F^M&(V^F))+P[12]+1804603682&4294967295,N=M+(b<<7&4294967295|b>>>25),b=F+(V^N&(M^V))+P[13]+4254626195&4294967295,F=N+(b<<12&4294967295|b>>>20),b=V+(M^F&(N^M))+P[14]+2792965006&4294967295,V=F+(b<<17&4294967295|b>>>15),b=M+(N^V&(F^N))+P[15]+1236535329&4294967295,M=V+(b<<22&4294967295|b>>>10),b=N+(V^F&(M^V))+P[1]+4129170786&4294967295,N=M+(b<<5&4294967295|b>>>27),b=F+(M^V&(N^M))+P[6]+3225465664&4294967295,F=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(F^N))+P[11]+643717713&4294967295,V=F+(b<<14&4294967295|b>>>18),b=M+(F^N&(V^F))+P[0]+3921069994&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(V^F&(M^V))+P[5]+3593408605&4294967295,N=M+(b<<5&4294967295|b>>>27),b=F+(M^V&(N^M))+P[10]+38016083&4294967295,F=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(F^N))+P[15]+3634488961&4294967295,V=F+(b<<14&4294967295|b>>>18),b=M+(F^N&(V^F))+P[4]+3889429448&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(V^F&(M^V))+P[9]+568446438&4294967295,N=M+(b<<5&4294967295|b>>>27),b=F+(M^V&(N^M))+P[14]+3275163606&4294967295,F=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(F^N))+P[3]+4107603335&4294967295,V=F+(b<<14&4294967295|b>>>18),b=M+(F^N&(V^F))+P[8]+1163531501&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(V^F&(M^V))+P[13]+2850285829&4294967295,N=M+(b<<5&4294967295|b>>>27),b=F+(M^V&(N^M))+P[2]+4243563512&4294967295,F=N+(b<<9&4294967295|b>>>23),b=V+(N^M&(F^N))+P[7]+1735328473&4294967295,V=F+(b<<14&4294967295|b>>>18),b=M+(F^N&(V^F))+P[12]+2368359562&4294967295,M=V+(b<<20&4294967295|b>>>12),b=N+(M^V^F)+P[5]+4294588738&4294967295,N=M+(b<<4&4294967295|b>>>28),b=F+(N^M^V)+P[8]+2272392833&4294967295,F=N+(b<<11&4294967295|b>>>21),b=V+(F^N^M)+P[11]+1839030562&4294967295,V=F+(b<<16&4294967295|b>>>16),b=M+(V^F^N)+P[14]+4259657740&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(M^V^F)+P[1]+2763975236&4294967295,N=M+(b<<4&4294967295|b>>>28),b=F+(N^M^V)+P[4]+1272893353&4294967295,F=N+(b<<11&4294967295|b>>>21),b=V+(F^N^M)+P[7]+4139469664&4294967295,V=F+(b<<16&4294967295|b>>>16),b=M+(V^F^N)+P[10]+3200236656&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(M^V^F)+P[13]+681279174&4294967295,N=M+(b<<4&4294967295|b>>>28),b=F+(N^M^V)+P[0]+3936430074&4294967295,F=N+(b<<11&4294967295|b>>>21),b=V+(F^N^M)+P[3]+3572445317&4294967295,V=F+(b<<16&4294967295|b>>>16),b=M+(V^F^N)+P[6]+76029189&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(M^V^F)+P[9]+3654602809&4294967295,N=M+(b<<4&4294967295|b>>>28),b=F+(N^M^V)+P[12]+3873151461&4294967295,F=N+(b<<11&4294967295|b>>>21),b=V+(F^N^M)+P[15]+530742520&4294967295,V=F+(b<<16&4294967295|b>>>16),b=M+(V^F^N)+P[2]+3299628645&4294967295,M=V+(b<<23&4294967295|b>>>9),b=N+(V^(M|~F))+P[0]+4096336452&4294967295,N=M+(b<<6&4294967295|b>>>26),b=F+(M^(N|~V))+P[7]+1126891415&4294967295,F=N+(b<<10&4294967295|b>>>22),b=V+(N^(F|~M))+P[14]+2878612391&4294967295,V=F+(b<<15&4294967295|b>>>17),b=M+(F^(V|~N))+P[5]+4237533241&4294967295,M=V+(b<<21&4294967295|b>>>11),b=N+(V^(M|~F))+P[12]+1700485571&4294967295,N=M+(b<<6&4294967295|b>>>26),b=F+(M^(N|~V))+P[3]+2399980690&4294967295,F=N+(b<<10&4294967295|b>>>22),b=V+(N^(F|~M))+P[10]+4293915773&4294967295,V=F+(b<<15&4294967295|b>>>17),b=M+(F^(V|~N))+P[1]+2240044497&4294967295,M=V+(b<<21&4294967295|b>>>11),b=N+(V^(M|~F))+P[8]+1873313359&4294967295,N=M+(b<<6&4294967295|b>>>26),b=F+(M^(N|~V))+P[15]+4264355552&4294967295,F=N+(b<<10&4294967295|b>>>22),b=V+(N^(F|~M))+P[6]+2734768916&4294967295,V=F+(b<<15&4294967295|b>>>17),b=M+(F^(V|~N))+P[13]+1309151649&4294967295,M=V+(b<<21&4294967295|b>>>11),b=N+(V^(M|~F))+P[4]+4149444226&4294967295,N=M+(b<<6&4294967295|b>>>26),b=F+(M^(N|~V))+P[11]+3174756917&4294967295,F=N+(b<<10&4294967295|b>>>22),b=V+(N^(F|~M))+P[2]+718787259&4294967295,V=F+(b<<15&4294967295|b>>>17),b=M+(F^(V|~N))+P[9]+3951481745&4294967295,D.g[0]=D.g[0]+N&4294967295,D.g[1]=D.g[1]+(V+(b<<21&4294967295|b>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+F&4294967295}o.prototype.v=function(D,N){N===void 0&&(N=D.length);const M=N-this.blockSize,P=this.C;let V=this.h,F=0;for(;F<N;){if(V==0)for(;F<=M;)r(this,D,F),F+=this.blockSize;if(typeof D=="string"){for(;F<N;)if(P[V++]=D.charCodeAt(F++),V==this.blockSize){r(this,P),V=0;break}}else for(;F<N;)if(P[V++]=D[F++],V==this.blockSize){r(this,P),V=0;break}}this.h=V,this.o+=N},o.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var N=1;N<D.length-8;++N)D[N]=0;N=this.o*8;for(var M=D.length-8;M<D.length;++M)D[M]=N&255,N/=256;for(this.v(D),D=Array(16),N=0,M=0;M<4;++M)for(let P=0;P<32;P+=8)D[N++]=this.g[M]>>>P&255;return D};function l(D,N){var M=h;return Object.prototype.hasOwnProperty.call(M,D)?M[D]:M[D]=N(D)}function c(D,N){this.h=N;const M=[];let P=!0;for(let V=D.length-1;V>=0;V--){const F=D[V]|0;P&&F==N||(M[V]=F,P=!1)}this.g=M}var h={};function y(D){return-128<=D&&D<128?l(D,function(N){return new c([N|0],N<0?-1:0)}):new c([D|0],D<0?-1:0)}function m(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return L(m(-D));const N=[];let M=1;for(let P=0;D>=M;P++)N[P]=D/M|0,M*=4294967296;return new c(N,0)}function v(D,N){if(D.length==0)throw Error("number format error: empty string");if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(D.charAt(0)=="-")return L(v(D.substring(1),N));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const M=m(Math.pow(N,8));let P=T;for(let F=0;F<D.length;F+=8){var V=Math.min(8,D.length-F);const b=parseInt(D.substring(F,F+V),N);V<8?(V=m(Math.pow(N,V)),P=P.j(V).add(m(b))):(P=P.j(M),P=P.add(m(b)))}return P}var T=y(0),S=y(1),R=y(16777216);n=c.prototype,n.m=function(){if(q(this))return-L(this).m();let D=0,N=1;for(let M=0;M<this.g.length;M++){const P=this.i(M);D+=(P>=0?P:4294967296+P)*N,N*=4294967296}return D},n.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(U(this))return"0";if(q(this))return"-"+L(this).toString(D);const N=m(Math.pow(D,6));var M=this;let P="";for(;;){const V=se(M,N).g;M=X(M,V.j(N));let F=((M.g.length>0?M.g[0]:M.h)>>>0).toString(D);if(M=V,U(M))return F+P;for(;F.length<6;)F="0"+F;P=F+P}},n.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function U(D){if(D.h!=0)return!1;for(let N=0;N<D.g.length;N++)if(D.g[N]!=0)return!1;return!0}function q(D){return D.h==-1}n.l=function(D){return D=X(this,D),q(D)?-1:U(D)?0:1};function L(D){const N=D.g.length,M=[];for(let P=0;P<N;P++)M[P]=~D.g[P];return new c(M,~D.h).add(S)}n.abs=function(){return q(this)?L(this):this},n.add=function(D){const N=Math.max(this.g.length,D.g.length),M=[];let P=0;for(let V=0;V<=N;V++){let F=P+(this.i(V)&65535)+(D.i(V)&65535),b=(F>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);P=b>>>16,F&=65535,b&=65535,M[V]=b<<16|F}return new c(M,M[M.length-1]&-2147483648?-1:0)};function X(D,N){return D.add(L(N))}n.j=function(D){if(U(this)||U(D))return T;if(q(this))return q(D)?L(this).j(L(D)):L(L(this).j(D));if(q(D))return L(this.j(L(D)));if(this.l(R)<0&&D.l(R)<0)return m(this.m()*D.m());const N=this.g.length+D.g.length,M=[];for(var P=0;P<2*N;P++)M[P]=0;for(P=0;P<this.g.length;P++)for(let V=0;V<D.g.length;V++){const F=this.i(P)>>>16,b=this.i(P)&65535,ke=D.i(V)>>>16,dt=D.i(V)&65535;M[2*P+2*V]+=b*dt,ie(M,2*P+2*V),M[2*P+2*V+1]+=F*dt,ie(M,2*P+2*V+1),M[2*P+2*V+1]+=b*ke,ie(M,2*P+2*V+1),M[2*P+2*V+2]+=F*ke,ie(M,2*P+2*V+2)}for(D=0;D<N;D++)M[D]=M[2*D+1]<<16|M[2*D];for(D=N;D<2*N;D++)M[D]=0;return new c(M,0)};function ie(D,N){for(;(D[N]&65535)!=D[N];)D[N+1]+=D[N]>>>16,D[N]&=65535,N++}function W(D,N){this.g=D,this.h=N}function se(D,N){if(U(N))throw Error("division by zero");if(U(D))return new W(T,T);if(q(D))return N=se(L(D),N),new W(L(N.g),L(N.h));if(q(N))return N=se(D,L(N)),new W(L(N.g),N.h);if(D.g.length>30){if(q(D)||q(N))throw Error("slowDivide_ only works with positive integers.");for(var M=S,P=N;P.l(D)<=0;)M=fe(M),P=fe(P);var V=le(M,1),F=le(P,1);for(P=le(P,2),M=le(M,2);!U(P);){var b=F.add(P);b.l(D)<=0&&(V=V.add(M),F=b),P=le(P,1),M=le(M,1)}return N=X(D,V.j(N)),new W(V,N)}for(V=T;D.l(N)>=0;){for(M=Math.max(1,Math.floor(D.m()/N.m())),P=Math.ceil(Math.log(M)/Math.LN2),P=P<=48?1:Math.pow(2,P-48),F=m(M),b=F.j(N);q(b)||b.l(D)>0;)M-=P,F=m(M),b=F.j(N);U(F)&&(F=S),V=V.add(F),D=X(D,b)}return new W(V,D)}n.B=function(D){return se(this,D).h},n.and=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<N;P++)M[P]=this.i(P)&D.i(P);return new c(M,this.h&D.h)},n.or=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<N;P++)M[P]=this.i(P)|D.i(P);return new c(M,this.h|D.h)},n.xor=function(D){const N=Math.max(this.g.length,D.g.length),M=[];for(let P=0;P<N;P++)M[P]=this.i(P)^D.i(P);return new c(M,this.h^D.h)};function fe(D){const N=D.g.length+1,M=[];for(let P=0;P<N;P++)M[P]=D.i(P)<<1|D.i(P-1)>>>31;return new c(M,D.h)}function le(D,N){const M=N>>5;N%=32;const P=D.g.length-M,V=[];for(let F=0;F<P;F++)V[F]=N>0?D.i(F+M)>>>N|D.i(F+M+1)<<32-N:D.i(F+M);return new c(V,D.h)}o.prototype.digest=o.prototype.A,o.prototype.reset=o.prototype.u,o.prototype.update=o.prototype.v,JE=o,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=m,c.fromString=v,Jo=c}).apply(typeof O0<"u"?O0:typeof self<"u"?self:typeof window<"u"?window:{});var Ec=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var KE,_l,QE,Nc,ap,XE,$E,WE;(function(){var n,e=Object.defineProperty;function t(p){p=[typeof globalThis=="object"&&globalThis,p,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ec=="object"&&Ec];for(var E=0;E<p.length;++E){var C=p[E];if(C&&C.Math==Math)return C}throw Error("Cannot find global object")}var o=t(this);function r(p,E){if(E)e:{var C=o;p=p.split(".");for(var w=0;w<p.length-1;w++){var G=p[w];if(!(G in C))break e;C=C[G]}p=p[p.length-1],w=C[p],E=E(w),E!=w&&E!=null&&e(C,p,{configurable:!0,writable:!0,value:E})}}r("Symbol.dispose",function(p){return p||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(p){return p||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(p){return p||function(E){var C=[],w;for(w in E)Object.prototype.hasOwnProperty.call(E,w)&&C.push([w,E[w]]);return C}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(p){var E=typeof p;return E=="object"&&p!=null||E=="function"}function y(p,E,C){return p.call.apply(p.bind,arguments)}function m(p,E,C){return m=y,m.apply(null,arguments)}function v(p,E){var C=Array.prototype.slice.call(arguments,1);return function(){var w=C.slice();return w.push.apply(w,arguments),p.apply(this,w)}}function T(p,E){function C(){}C.prototype=E.prototype,p.Z=E.prototype,p.prototype=new C,p.prototype.constructor=p,p.Ob=function(w,G,J){for(var re=Array(arguments.length-2),we=2;we<arguments.length;we++)re[we-2]=arguments[we];return E.prototype[G].apply(w,re)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?p=>p&&AsyncContext.Snapshot.wrap(p):p=>p;function R(p){const E=p.length;if(E>0){const C=Array(E);for(let w=0;w<E;w++)C[w]=p[w];return C}return[]}function U(p,E){for(let w=1;w<arguments.length;w++){const G=arguments[w];var C=typeof G;if(C=C!="object"?C:G?Array.isArray(G)?"array":C:"null",C=="array"||C=="object"&&typeof G.length=="number"){C=p.length||0;const J=G.length||0;p.length=C+J;for(let re=0;re<J;re++)p[C+re]=G[re]}else p.push(G)}}class q{constructor(E,C){this.i=E,this.j=C,this.h=0,this.g=null}get(){let E;return this.h>0?(this.h--,E=this.g,this.g=E.next,E.next=null):E=this.i(),E}}function L(p){c.setTimeout(()=>{throw p},0)}function X(){var p=D;let E=null;return p.g&&(E=p.g,p.g=p.g.next,p.g||(p.h=null),E.next=null),E}class ie{constructor(){this.h=this.g=null}add(E,C){const w=W.get();w.set(E,C),this.h?this.h.next=w:this.g=w,this.h=w}}var W=new q(()=>new se,p=>p.reset());class se{constructor(){this.next=this.g=this.h=null}set(E,C){this.h=E,this.g=C,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,le=!1,D=new ie,N=()=>{const p=Promise.resolve(void 0);fe=()=>{p.then(M)}};function M(){for(var p;p=X();){try{p.h.call(p.g)}catch(C){L(C)}var E=W;E.j(p),E.h<100&&(E.h++,p.next=E.g,E.g=p)}le=!1}function P(){this.u=this.u,this.C=this.C}P.prototype.u=!1,P.prototype.dispose=function(){this.u||(this.u=!0,this.N())},P.prototype[Symbol.dispose]=function(){this.dispose()},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(p,E){this.type=p,this.g=this.target=E,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var p=!1,E=Object.defineProperty({},"passive",{get:function(){p=!0}});try{const C=()=>{};c.addEventListener("test",C,E),c.removeEventListener("test",C,E)}catch{}return p})();function b(p){return/^[\s\xa0]*$/.test(p)}function ke(p,E){V.call(this,p?p.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,p&&this.init(p,E)}T(ke,V),ke.prototype.init=function(p,E){const C=this.type=p.type,w=p.changedTouches&&p.changedTouches.length?p.changedTouches[0]:null;this.target=p.target||p.srcElement,this.g=E,E=p.relatedTarget,E||(C=="mouseover"?E=p.fromElement:C=="mouseout"&&(E=p.toElement)),this.relatedTarget=E,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0),this.button=p.button,this.key=p.key||"",this.ctrlKey=p.ctrlKey,this.altKey=p.altKey,this.shiftKey=p.shiftKey,this.metaKey=p.metaKey,this.pointerId=p.pointerId||0,this.pointerType=p.pointerType,this.state=p.state,this.i=p,p.defaultPrevented&&ke.Z.h.call(this)},ke.prototype.h=function(){ke.Z.h.call(this);const p=this.i;p.preventDefault?p.preventDefault():p.returnValue=!1};var dt="closure_listenable_"+(Math.random()*1e6|0),Q=0;function ae(p,E,C,w,G){this.listener=p,this.proxy=null,this.src=E,this.type=C,this.capture=!!w,this.ha=G,this.key=++Q,this.da=this.fa=!1}function ve(p){p.da=!0,p.listener=null,p.proxy=null,p.src=null,p.ha=null}function Ge(p,E,C){for(const w in p)E.call(C,p[w],w,p)}function Xe(p,E){for(const C in p)E.call(void 0,p[C],C,p)}function O(p){const E={};for(const C in p)E[C]=p[C];return E}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ue(p,E){let C,w;for(let G=1;G<arguments.length;G++){w=arguments[G];for(C in w)p[C]=w[C];for(let J=0;J<te.length;J++)C=te[J],Object.prototype.hasOwnProperty.call(w,C)&&(p[C]=w[C])}}function pe(p){this.src=p,this.g={},this.h=0}pe.prototype.add=function(p,E,C,w,G){const J=p.toString();p=this.g[J],p||(p=this.g[J]=[],this.h++);const re=Ne(p,E,w,G);return re>-1?(E=p[re],C||(E.fa=!1)):(E=new ae(E,this.src,J,!!w,G),E.fa=C,p.push(E)),E};function Se(p,E){const C=E.type;if(C in p.g){var w=p.g[C],G=Array.prototype.indexOf.call(w,E,void 0),J;(J=G>=0)&&Array.prototype.splice.call(w,G,1),J&&(ve(E),p.g[C].length==0&&(delete p.g[C],p.h--))}}function Ne(p,E,C,w){for(let G=0;G<p.length;++G){const J=p[G];if(!J.da&&J.listener==E&&J.capture==!!C&&J.ha==w)return G}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),xt={};function lt(p,E,C,w,G){if(Array.isArray(E)){for(let J=0;J<E.length;J++)lt(p,E[J],C,w,G);return null}return C=fa(C),p&&p[dt]?p.J(E,C,h(w)?!!w.capture:!1,G):is(p,E,C,!1,w,G)}function is(p,E,C,w,G,J){if(!E)throw Error("Invalid event type");const re=h(G)?!!G.capture:!!G;let we=os(p);if(we||(p[qe]=we=new pe(p)),C=we.add(E,C,w,re,J),C.proxy)return C;if(w=zs(),C.proxy=w,w.src=p,w.listener=C,p.addEventListener)F||(G=re),G===void 0&&(G=!1),p.addEventListener(E.toString(),w,G);else if(p.attachEvent)p.attachEvent(ai(E.toString()),w);else if(p.addListener&&p.removeListener)p.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return C}function zs(){function p(C){return E.call(p.src,p.listener,C)}const E=ua;return p}function Ys(p,E,C,w,G){if(Array.isArray(E))for(var J=0;J<E.length;J++)Ys(p,E[J],C,w,G);else w=h(w)?!!w.capture:!!w,C=fa(C),p&&p[dt]?(p=p.i,J=String(E).toString(),J in p.g&&(E=p.g[J],C=Ne(E,C,w,G),C>-1&&(ve(E[C]),Array.prototype.splice.call(E,C,1),E.length==0&&(delete p.g[J],p.h--)))):p&&(p=os(p))&&(E=p.g[E.toString()],p=-1,E&&(p=Ne(E,C,w,G)),(C=p>-1?E[p]:null)&&Js(C))}function Js(p){if(typeof p!="number"&&p&&!p.da){var E=p.src;if(E&&E[dt])Se(E.i,p);else{var C=p.type,w=p.proxy;E.removeEventListener?E.removeEventListener(C,w,p.capture):E.detachEvent?E.detachEvent(ai(C),w):E.addListener&&E.removeListener&&E.removeListener(w),(C=os(E))?(Se(C,p),C.h==0&&(C.src=null,E[qe]=null)):ve(p)}}}function ai(p){return p in xt?xt[p]:xt[p]="on"+p}function ua(p,E){if(p.da)p=!0;else{E=new ke(E,this);const C=p.listener,w=p.ha||p.src;p.fa&&Js(p),p=C.call(w,E)}return p}function os(p){return p=p[qe],p instanceof pe?p:null}var ca="__closure_events_fn_"+(Math.random()*1e9>>>0);function fa(p){return typeof p=="function"?p:(p[ca]||(p[ca]=function(E){return p.handleEvent(E)}),p[ca])}function Tt(){P.call(this),this.i=new pe(this),this.M=this,this.G=null}T(Tt,P),Tt.prototype[dt]=!0,Tt.prototype.removeEventListener=function(p,E,C,w){Ys(this,p,E,C,w)};function Vt(p,E){var C,w=p.G;if(w)for(C=[];w;w=w.G)C.push(w);if(p=p.M,w=E.type||E,typeof E=="string")E=new V(E,p);else if(E instanceof V)E.target=E.target||p;else{var G=E;E=new V(w,p),ue(E,G)}G=!0;let J,re;if(C)for(re=C.length-1;re>=0;re--)J=E.g=C[re],G=lo(J,w,!0,E)&&G;if(J=E.g=p,G=lo(J,w,!0,E)&&G,G=lo(J,w,!1,E)&&G,C)for(re=0;re<C.length;re++)J=E.g=C[re],G=lo(J,w,!1,E)&&G}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var p=this.i;for(const E in p.g){const C=p.g[E];for(let w=0;w<C.length;w++)ve(C[w]);delete p.g[E],p.h--}}this.G=null},Tt.prototype.J=function(p,E,C,w){return this.i.add(String(p),E,!1,C,w)},Tt.prototype.K=function(p,E,C,w){return this.i.add(String(p),E,!0,C,w)};function lo(p,E,C,w){if(E=p.i.g[String(E)],!E)return!0;E=E.concat();let G=!0;for(let J=0;J<E.length;++J){const re=E[J];if(re&&!re.da&&re.capture==C){const we=re.listener,gt=re.ha||re.src;re.fa&&Se(p.i,re),G=we.call(gt,w)!==!1&&G}}return G&&!w.defaultPrevented}function Rf(p,E){if(typeof p!="function")if(p&&typeof p.handleEvent=="function")p=m(p.handleEvent,p);else throw Error("Invalid listener argument");return Number(E)>2147483647?-1:c.setTimeout(p,E||0)}function Bl(p){p.g=Rf(()=>{p.g=null,p.i&&(p.i=!1,Bl(p))},p.l);const E=p.h;p.h=null,p.m.apply(null,E)}class on extends P{constructor(E,C){super(),this.m=E,this.l=C,this.h=null,this.i=!1,this.g=null}j(E){this.h=arguments,this.g?this.i=!0:Bl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ss(p){P.call(this),this.h=p,this.g={}}T(ss,P);var da=[];function ha(p){Ge(p.g,function(E,C){this.g.hasOwnProperty(C)&&Js(E)},p),p.g={}}ss.prototype.N=function(){ss.Z.N.call(this),ha(this)},ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var uo=c.JSON.stringify,wf=c.JSON.parse,Gl=class{stringify(p){return c.JSON.stringify(p,void 0)}parse(p){return c.JSON.parse(p,void 0)}};function Hl(){}function zl(){}var zn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ht(){V.call(this,"d")}T(Ht,V);function wn(){V.call(this,"c")}T(wn,V);var mt={},Yl=null;function Ks(){return Yl=Yl||new Tt}mt.Ia="serverreachability";function Jl(p){V.call(this,mt.Ia,p)}T(Jl,V);function li(p){const E=Ks();Vt(E,new Jl(E))}mt.STAT_EVENT="statevent";function rs(p,E){V.call(this,mt.STAT_EVENT,p),this.stat=E}T(rs,V);function Et(p){const E=Ks();Vt(E,new rs(E,p))}mt.Ja="timingevent";function ui(p,E){V.call(this,mt.Ja,p),this.size=E}T(ui,V);function ci(p,E){if(typeof p!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){p()},E)}function Yn(){this.g=!0}Yn.prototype.ua=function(){this.g=!1};function Mf(p,E,C,w,G,J){p.info(function(){if(p.g)if(J){var re="",we=J.split("&");for(let Je=0;Je<we.length;Je++){var gt=we[Je].split("=");if(gt.length>1){const ut=gt[0];gt=gt[1];const bn=ut.split("_");re=bn.length>=2&&bn[1]=="type"?re+(ut+"="+gt+"&"):re+(ut+"=redacted&")}}}else re=null;else re=J;return"XMLHTTP REQ ("+w+") [attempt "+G+"]: "+E+`
`+C+`
`+re})}function Kl(p,E,C,w,G,J,re){p.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+G+"]: "+E+`
`+C+`
`+J+" "+re})}function fi(p,E,C,w){p.info(function(){return"XMLHTTP TEXT ("+E+"): "+Nf(p,C)+(w?" "+w:"")})}function as(p,E){p.info(function(){return"TIMEOUT: "+E})}Yn.prototype.info=function(){};function Nf(p,E){if(!p.g)return E;if(!E)return null;try{const J=JSON.parse(E);if(J){for(p=0;p<J.length;p++)if(Array.isArray(J[p])){var C=J[p];if(!(C.length<2)){var w=C[1];if(Array.isArray(w)&&!(w.length<1)){var G=w[0];if(G!="noop"&&G!="stop"&&G!="close")for(let re=1;re<w.length;re++)w[re]=""}}}}return uo(J)}catch{return E}}var ls={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},pa={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ma;function us(){}T(us,Hl),us.prototype.g=function(){return new XMLHttpRequest},ma=new us;function Ui(p){return encodeURIComponent(String(p))}function Ql(p){var E=1;p=p.split(":");const C=[];for(;E>0&&p.length;)C.push(p.shift()),E--;return p.length&&C.push(p.join(":")),C}function Jn(p,E,C,w){this.j=p,this.i=E,this.l=C,this.S=w||1,this.V=new ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Kn}function Kn(){this.i=null,this.g="",this.h=!1}var St={},Lt={};function di(p,E,C){p.M=1,p.A=cs(Ct(E)),p.u=C,p.R=!0,Qs(p,null)}function Qs(p,E){p.F=Date.now(),hi(p),p.B=Ct(p.A);var C=p.B,w=p.S;Array.isArray(w)||(w=[String(w)]),Zs(C.i,"t",w),p.C=0,C=p.j.L,p.h=new Kn,p.g=uu(p.j,C?E:null,!p.u),p.P>0&&(p.O=new on(m(p.Y,p,p.g),p.P)),E=p.V,C=p.g,w=p.ba;var G="readystatechange";Array.isArray(G)||(G&&(da[0]=G.toString()),G=da);for(let J=0;J<G.length;J++){const re=lt(C,G[J],w||E.handleEvent,!1,E.h||E);if(!re)break;E.g[re.key]=re}E=p.J?O(p.J):{},p.u?(p.v||(p.v="POST"),E["Content-Type"]="application/x-www-form-urlencoded",p.g.ea(p.B,p.v,p.u,E)):(p.v="GET",p.g.ea(p.B,p.v,null,E)),li(),Mf(p.i,p.v,p.B,p.l,p.S,p.u)}Jn.prototype.ba=function(p){p=p.target;const E=this.O;E&&$n(p)==3?E.j():this.Y(p)},Jn.prototype.Y=function(p){try{if(p==this.g)e:{const we=$n(this.g),gt=this.g.ya(),Je=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||zt(this.g)))){this.K||we!=4||gt==7||(gt==8||Je<=0?li(3):li(2)),pi(this);var E=this.g.ca();this.X=E;var C=Df(this);if(this.o=E==200,Kl(this.i,this.v,this.B,this.l,this.S,we,E),this.o){if(this.U&&!this.L){t:{if(this.g){var w,G=this.g;if((w=G.g?G.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(w)){var J=w;break t}}J=null}if(p=J)fi(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,mi(this,p);else{this.o=!1,this.m=3,Et(12),_n(this),Mn(this);break e}}if(this.R){p=!0;let ut;for(;!this.K&&this.C<C.length;)if(ut=$l(this,C),ut==Lt){we==4&&(this.m=4,Et(14),p=!1),fi(this.i,this.l,null,"[Incomplete Response]");break}else if(ut==St){this.m=4,Et(15),fi(this.i,this.l,C,"[Invalid Chunk]"),p=!1;break}else fi(this.i,this.l,ut,null),mi(this,ut);if(Xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||C.length!=0||this.h.h||(this.m=1,Et(16),p=!1),this.o=this.o&&p,!p)fi(this.i,this.l,C,"[Invalid Chunked Response]"),_n(this),Mn(this);else if(C.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+C.length),Da(re),re.P=!0,Et(11))}}else fi(this.i,this.l,C,null),mi(this,C);we==4&&_n(this),this.o&&!this.K&&(we==4?su(this.j,this):(this.o=!1,hi(this)))}else ki(this.g),E==400&&C.indexOf("Unknown SID")>0?(this.m=3,Et(12)):(this.m=0,Et(13)),_n(this),Mn(this)}}}catch{}finally{}};function Df(p){if(!Xl(p))return p.g.la();const E=zt(p.g);if(E==="")return"";let C="";const w=E.length,G=$n(p.g)==4;if(!p.h.i){if(typeof TextDecoder>"u")return _n(p),Mn(p),"";p.h.i=new c.TextDecoder}for(let J=0;J<w;J++)p.h.h=!0,C+=p.h.i.decode(E[J],{stream:!(G&&J==w-1)});return E.length=0,p.h.g+=C,p.C=0,p.h.g}function Xl(p){return p.g?p.v=="GET"&&p.M!=2&&p.j.Aa:!1}function $l(p,E){var C=p.C,w=E.indexOf(`
`,C);return w==-1?Lt:(C=Number(E.substring(C,w)),isNaN(C)?St:(w+=1,w+C>E.length?Lt:(E=E.slice(w,w+C),p.C=w+C,E)))}Jn.prototype.cancel=function(){this.K=!0,_n(this)};function hi(p){p.T=Date.now()+p.H,Xs(p,p.H)}function Xs(p,E){if(p.D!=null)throw Error("WatchDog timer not null");p.D=ci(m(p.aa,p),E)}function pi(p){p.D&&(c.clearTimeout(p.D),p.D=null)}Jn.prototype.aa=function(){this.D=null;const p=Date.now();p-this.T>=0?(as(this.i,this.B),this.M!=2&&(li(),Et(17)),_n(this),this.m=2,Mn(this)):Xs(this,this.T-p)};function Mn(p){p.j.I==0||p.K||su(p.j,p)}function _n(p){pi(p);var E=p.O;E&&typeof E.dispose=="function"&&E.dispose(),p.O=null,ha(p.V),p.g&&(E=p.g,p.g=null,E.abort(),E.dispose())}function mi(p,E){try{var C=p.j;if(C.I!=0&&(C.g==p||yi(C.h,p))){if(!p.L&&yi(C.h,p)&&C.I==3){try{var w=C.Ba.g.parse(E)}catch{w=null}if(Array.isArray(w)&&w.length==3){var G=w;if(G[0]==0){e:if(!C.v){if(C.g)if(C.g.F+3e3<p.F)ir(C),_o(C);else break e;ys(C),Et(18)}}else C.xa=G[1],0<C.xa-C.K&&G[2]<37500&&C.F&&C.A==0&&!C.C&&(C.C=ci(m(C.Va,C),6e3));gi(C.h)<=1&&C.ta&&(C.ta=void 0)}else Ai(C,11)}else if((p.L||C.g==p)&&ir(C),!b(E))for(G=C.Ba.g.parse(E),E=0;E<G.length;E++){let Je=G[E];const ut=Je[0];if(!(ut<=C.K))if(C.K=ut,Je=Je[1],C.I==2)if(Je[0]=="c"){C.M=Je[1],C.ba=Je[2];const bn=Je[3];bn!=null&&(C.ka=bn,C.j.info("VER="+C.ka));const Ci=Je[4];Ci!=null&&(C.za=Ci,C.j.info("SVER="+C.za));const Wn=Je[5];Wn!=null&&typeof Wn=="number"&&Wn>0&&(w=1.5*Wn,C.O=w,C.j.info("backChannelRequestTimeoutMs_="+w)),w=C;const Zn=p.g;if(Zn){const _s=Zn.g?Zn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_s){var J=w.h;J.g||_s.indexOf("spdy")==-1&&_s.indexOf("quic")==-1&&_s.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(_a(J,J.h),J.h=null))}if(w.G){const or=Zn.g?Zn.g.getResponseHeader("X-HTTP-Session-Id"):null;or&&(w.wa=or,$e(w.J,w.G,or))}}C.I=3,C.l&&C.l.ra(),C.aa&&(C.T=Date.now()-p.F,C.j.info("Handshake RTT: "+C.T+"ms")),w=C;var re=p;if(w.na=lu(w,w.L?w.ba:null,w.W),re.L){va(w.h,re);var we=re,gt=w.O;gt&&(we.H=gt),we.D&&(pi(we),hi(we)),w.g=re}else iu(w);C.i.length>0&&Si(C)}else Je[0]!="stop"&&Je[0]!="close"||Ai(C,7);else C.I==3&&(Je[0]=="stop"||Je[0]=="close"?Je[0]=="stop"?Ai(C,7):Ma(C):Je[0]!="noop"&&C.l&&C.l.qa(Je),C.A=0)}}li(4)}catch{}}var At=class{constructor(p,E){this.g=p,this.map=E}};function ga(p){this.l=p||10,c.PerformanceNavigationTiming?(p=c.performance.getEntriesByType("navigation"),p=p.length>0&&(p[0].nextHopProtocol=="hq"||p[0].nextHopProtocol=="h2")):p=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=p?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function ya(p){return p.h?!0:p.g?p.g.size>=p.j:!1}function gi(p){return p.h?1:p.g?p.g.size:0}function yi(p,E){return p.h?p.h==E:p.g?p.g.has(E):!1}function _a(p,E){p.g?p.g.add(E):p.h=E}function va(p,E){p.h&&p.h==E?p.h=null:p.g&&p.g.has(E)&&p.g.delete(E)}ga.prototype.cancel=function(){if(this.i=Ta(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const p of this.g.values())p.cancel();this.g.clear()}};function Ta(p){if(p.h!=null)return p.i.concat(p.h.G);if(p.g!=null&&p.g.size!==0){let E=p.i;for(const C of p.g.values())E=E.concat(C.G);return E}return R(p.i)}var Wl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $s(p,E){if(p){p=p.split("&");for(let C=0;C<p.length;C++){const w=p[C].indexOf("=");let G,J=null;w>=0?(G=p[C].substring(0,w),J=p[C].substring(w+1)):G=p[C],E(G,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function vn(p){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let E;p instanceof vn?(this.l=p.l,kt(this,p.j),this.o=p.o,this.g=p.g,co(this,p.u),this.h=p.h,Ea(this,tu(p.i)),this.m=p.m):p&&(E=String(p).match(Wl))?(this.l=!1,kt(this,E[1]||"",!0),this.o=_i(E[2]||""),this.g=_i(E[3]||"",!0),co(this,E[4]),this.h=_i(E[5]||"",!0),Ea(this,E[6]||"",!0),this.m=_i(E[7]||"")):(this.l=!1,this.i=new ho(null,this.l))}vn.prototype.toString=function(){const p=[];var E=this.j;E&&p.push(fs(E,Ws,!0),":");var C=this.g;return(C||E=="file")&&(p.push("//"),(E=this.o)&&p.push(fs(E,Ws,!0),"@"),p.push(Ui(C).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),C=this.u,C!=null&&p.push(":",String(C))),(C=this.h)&&(this.g&&C.charAt(0)!="/"&&p.push("/"),p.push(fs(C,C.charAt(0)=="/"?Sa:Zl,!0))),(C=this.i.toString())&&p.push("?",C),(C=this.m)&&p.push("#",fs(C,jl)),p.join("")},vn.prototype.resolve=function(p){const E=Ct(this);let C=!!p.j;C?kt(E,p.j):C=!!p.o,C?E.o=p.o:C=!!p.g,C?E.g=p.g:C=p.u!=null;var w=p.h;if(C)co(E,p.u);else if(C=!!p.h){if(w.charAt(0)!="/")if(this.g&&!this.h)w="/"+w;else{var G=E.h.lastIndexOf("/");G!=-1&&(w=E.h.slice(0,G+1)+w)}if(G=w,G==".."||G==".")w="";else if(G.indexOf("./")!=-1||G.indexOf("/.")!=-1){w=G.lastIndexOf("/",0)==0,G=G.split("/");const J=[];for(let re=0;re<G.length;){const we=G[re++];we=="."?w&&re==G.length&&J.push(""):we==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),w&&re==G.length&&J.push("")):(J.push(we),w=!0)}w=J.join("/")}else w=G}return C?E.h=w:C=p.i.toString()!=="",C?Ea(E,tu(p.i)):C=!!p.m,C&&(E.m=p.m),E};function Ct(p){return new vn(p)}function kt(p,E,C){p.j=C?_i(E,!0):E,p.j&&(p.j=p.j.replace(/:$/,""))}function co(p,E){if(E){if(E=Number(E),isNaN(E)||E<0)throw Error("Bad port number "+E);p.u=E}else p.u=null}function Ea(p,E,C){E instanceof ho?(p.i=E,js(p.i,p.l)):(C||(E=fs(E,fo)),p.i=new ho(E,p.l))}function $e(p,E,C){p.i.set(E,C)}function cs(p){return $e(p,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),p}function _i(p,E){return p?E?decodeURI(p.replace(/%25/g,"%2525")):decodeURIComponent(p):""}function fs(p,E,C){return typeof p=="string"?(p=encodeURI(p).replace(E,un),C&&(p=p.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p):null}function un(p){return p=p.charCodeAt(0),"%"+(p>>4&15).toString(16)+(p&15).toString(16)}var Ws=/[#\/\?@]/g,Zl=/[#\?:]/g,Sa=/[#\?]/g,fo=/[#\?@]/g,jl=/#/g;function ho(p,E){this.h=this.g=null,this.i=p||null,this.j=!!E}function cn(p){p.g||(p.g=new Map,p.h=0,p.i&&$s(p.i,function(E,C){p.add(decodeURIComponent(E.replace(/\+/g," ")),C)}))}n=ho.prototype,n.add=function(p,E){cn(this),this.i=null,p=po(this,p);let C=this.g.get(p);return C||this.g.set(p,C=[]),C.push(E),this.h+=1,this};function eu(p,E){cn(p),E=po(p,E),p.g.has(E)&&(p.i=null,p.h-=p.g.get(E).length,p.g.delete(E))}function Aa(p,E){return cn(p),E=po(p,E),p.g.has(E)}n.forEach=function(p,E){cn(this),this.g.forEach(function(C,w){C.forEach(function(G){p.call(E,G,w,this)},this)},this)};function Ca(p,E){cn(p);let C=[];if(typeof E=="string")Aa(p,E)&&(C=C.concat(p.g.get(po(p,E))));else for(p=Array.from(p.g.values()),E=0;E<p.length;E++)C=C.concat(p[E]);return C}n.set=function(p,E){return cn(this),this.i=null,p=po(this,p),Aa(this,p)&&(this.h-=this.g.get(p).length),this.g.set(p,[E]),this.h+=1,this},n.get=function(p,E){return p?(p=Ca(this,p),p.length>0?String(p[0]):E):E};function Zs(p,E,C){eu(p,E),C.length>0&&(p.i=null,p.g.set(po(p,E),R(C)),p.h+=C.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const p=[],E=Array.from(this.g.keys());for(let w=0;w<E.length;w++){var C=E[w];const G=Ui(C);C=Ca(this,C);for(let J=0;J<C.length;J++){let re=G;C[J]!==""&&(re+="="+Ui(C[J])),p.push(re)}}return this.i=p.join("&")};function tu(p){const E=new ho;return E.i=p.i,p.g&&(E.g=new Map(p.g),E.h=p.h),E}function po(p,E){return E=String(E),p.j&&(E=E.toLowerCase()),E}function js(p,E){E&&!p.j&&(cn(p),p.i=null,p.g.forEach(function(C,w){const G=w.toLowerCase();w!=G&&(eu(this,w),Zs(this,G,C))},p)),p.j=E}function Qn(p,E){const C=new Yn;if(c.Image){const w=new Image;w.onload=v(Nn,C,"TestLoadImage: loaded",!0,E,w),w.onerror=v(Nn,C,"TestLoadImage: error",!1,E,w),w.onabort=v(Nn,C,"TestLoadImage: abort",!1,E,w),w.ontimeout=v(Nn,C,"TestLoadImage: timeout",!1,E,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=p}else E(!1)}function Ia(p,E){const C=new Yn,w=new AbortController,G=setTimeout(()=>{w.abort(),Nn(C,"TestPingServer: timeout",!1,E)},1e4);fetch(p,{signal:w.signal}).then(J=>{clearTimeout(G),J.ok?Nn(C,"TestPingServer: ok",!0,E):Nn(C,"TestPingServer: server error",!1,E)}).catch(()=>{clearTimeout(G),Nn(C,"TestPingServer: error",!1,E)})}function Nn(p,E,C,w,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),w(C)}catch{}}function mo(){this.g=new Gl}function vi(p){this.i=p.Sb||null,this.h=p.ab||!1}T(vi,Hl),vi.prototype.g=function(){return new ds(this.i,this.h)};function ds(p,E){Tt.call(this),this.H=p,this.o=E,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ds,Tt),n=ds.prototype,n.open=function(p,E){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=p,this.D=E,this.readyState=1,Xn(this)},n.send=function(p){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const E={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};p&&(E.body=p),(this.H||c).fetch(new Request(this.D,E)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,go(this)),this.readyState=0},n.Pa=function(p){if(this.g&&(this.l=p,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=p.headers,this.readyState=2,Xn(this)),this.g&&(this.readyState=3,Xn(this),this.g)))if(this.responseType==="arraybuffer")p.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in p){if(this.j=p.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;er(this)}else p.text().then(this.Oa.bind(this),this.ga.bind(this))};function er(p){p.j.read().then(p.Ma.bind(p)).catch(p.ga.bind(p))}n.Ma=function(p){if(this.g){if(this.o&&p.value)this.response.push(p.value);else if(!this.o){var E=p.value?p.value:new Uint8Array(0);(E=this.B.decode(E,{stream:!p.done}))&&(this.response=this.responseText+=E)}p.done?go(this):Xn(this),this.readyState==3&&er(this)}},n.Oa=function(p){this.g&&(this.response=this.responseText=p,go(this))},n.Na=function(p){this.g&&(this.response=p,go(this))},n.ga=function(){this.g&&go(this)};function go(p){p.readyState=4,p.l=null,p.j=null,p.B=null,Xn(p)}n.setRequestHeader=function(p,E){this.A.append(p,E)},n.getResponseHeader=function(p){return this.h&&this.h.get(p.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const p=[],E=this.h.entries();for(var C=E.next();!C.done;)C=C.value,p.push(C[0]+": "+C[1]),C=E.next();return p.join(`\r
`)};function Xn(p){p.onreadystatechange&&p.onreadystatechange.call(p)}Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(p){this.m=p?"include":"same-origin"}});function Dn(p){let E="";return Ge(p,function(C,w){E+=w,E+=":",E+=C,E+=`\r
`}),E}function hs(p,E,C){e:{for(w in C){var w=!1;break e}w=!0}w||(C=Dn(C),typeof p=="string"?C!=null&&Ui(C):$e(p,E,C))}function je(p){Tt.call(this),this.headers=new Map,this.L=p||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(je,Tt);var Ti=/^https?$/i,Ra=["POST","PUT"];n=je.prototype,n.Fa=function(p){this.H=p},n.ea=function(p,E,C,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+p);E=E?E.toUpperCase():"GET",this.D=p,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ma.g(),this.g.onreadystatechange=S(m(this.Ca,this));try{this.B=!0,this.g.open(E,String(p),!0),this.B=!1}catch(J){ps(this,J);return}if(p=C||"",C=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var G in w)C.set(G,w[G]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const J of w.keys())C.set(J,w.get(J));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(C.keys()).find(J=>J.toLowerCase()=="content-type"),G=c.FormData&&p instanceof c.FormData,!(Array.prototype.indexOf.call(Ra,E,void 0)>=0)||w||G||C.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,re]of C)this.g.setRequestHeader(J,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(p),this.v=!1}catch(J){ps(this,J)}};function ps(p,E){p.h=!1,p.g&&(p.j=!0,p.g.abort(),p.j=!1),p.l=E,p.o=5,wa(p),Li(p)}function wa(p){p.A||(p.A=!0,Vt(p,"complete"),Vt(p,"error"))}n.abort=function(p){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=p||7,Vt(this,"complete"),Vt(this,"abort"),Li(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Li(this,!0)),je.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?ms(this):this.Xa())},n.Xa=function(){ms(this)};function ms(p){if(p.h&&typeof l<"u"){if(p.v&&$n(p)==4)setTimeout(p.Ca.bind(p),0);else if(Vt(p,"readystatechange"),$n(p)==4){p.h=!1;try{const J=p.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var E=!0;break e;default:E=!1}var C;if(!(C=E)){var w;if(w=J===0){let re=String(p.D).match(Wl)[1]||null;!re&&c.self&&c.self.location&&(re=c.self.location.protocol.slice(0,-1)),w=!Ti.test(re?re.toLowerCase():"")}C=w}if(C)Vt(p,"complete"),Vt(p,"success");else{p.o=6;try{var G=$n(p)>2?p.g.statusText:""}catch{G=""}p.l=G+" ["+p.ca()+"]",wa(p)}}finally{Li(p)}}}}function Li(p,E){if(p.g){p.m&&(clearTimeout(p.m),p.m=null);const C=p.g;p.g=null,E||Vt(p,"ready");try{C.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function $n(p){return p.g?p.g.readyState:0}n.ca=function(){try{return $n(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(p){if(this.g){var E=this.g.responseText;return p&&E.indexOf(p)==0&&(E=E.substring(p.length)),wf(E)}};function zt(p){try{if(!p.g)return null;if("response"in p.g)return p.g.response;switch(p.F){case"":case"text":return p.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in p.g)return p.g.mozResponseArrayBuffer}return null}catch{return null}}function ki(p){const E={};p=(p.g&&$n(p)>=2&&p.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<p.length;w++){if(b(p[w]))continue;var C=Ql(p[w]);const G=C[0];if(C=C[1],typeof C!="string")continue;C=C.trim();const J=E[G]||[];E[G]=J,J.push(C)}Xe(E,function(w){return w.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ei(p,E,C){return C&&C.internalChannelParams&&C.internalChannelParams[p]||E}function yo(p){this.za=0,this.i=[],this.j=new Yn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ei("failFast",!1,p),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ei("baseRetryDelayMs",5e3,p),this.Za=Ei("retryDelaySeedMs",1e4,p),this.Ta=Ei("forwardChannelMaxRetries",2,p),this.va=Ei("forwardChannelRequestTimeoutMs",2e4,p),this.ma=p&&p.xmlHttpFactory||void 0,this.Ua=p&&p.Rb||void 0,this.Aa=p&&p.useFetchStreams||!1,this.O=void 0,this.L=p&&p.supportsCrossDomainXhr||!1,this.M="",this.h=new ga(p&&p.concurrentRequestLimit),this.Ba=new mo,this.S=p&&p.fastHandshake||!1,this.R=p&&p.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=p&&p.Pb||!1,p&&p.ua&&this.j.ua(),p&&p.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&p&&p.detectBufferingProxy||!1,this.ia=void 0,p&&p.longPollingTimeout&&p.longPollingTimeout>0&&(this.ia=p.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=yo.prototype,n.ka=8,n.I=1,n.connect=function(p,E,C,w){Et(0),this.W=p,this.H=E||{},C&&w!==void 0&&(this.H.OSID=C,this.H.OAID=w),this.F=this.X,this.J=lu(this,null,this.W),Si(this)};function Ma(p){if(tr(p),p.I==3){var E=p.V++,C=Ct(p.J);if($e(C,"SID",p.M),$e(C,"RID",E),$e(C,"TYPE","terminate"),gs(p,C),E=new Jn(p,p.j,E),E.M=2,E.A=cs(Ct(C)),C=!1,c.navigator&&c.navigator.sendBeacon)try{C=c.navigator.sendBeacon(E.A.toString(),"")}catch{}!C&&c.Image&&(new Image().src=E.A,C=!0),C||(E.g=uu(E.j,null),E.g.ea(E.A)),E.F=Date.now(),hi(E)}au(p)}function _o(p){p.g&&(Da(p),p.g.cancel(),p.g=null)}function tr(p){_o(p),p.v&&(c.clearTimeout(p.v),p.v=null),ir(p),p.h.cancel(),p.m&&(typeof p.m=="number"&&c.clearTimeout(p.m),p.m=null)}function Si(p){if(!ya(p.h)&&!p.m){p.m=!0;var E=p.Ea;fe||N(),le||(fe(),le=!0),D.add(E,p),p.D=0}}function nr(p,E){return gi(p.h)>=p.h.j-(p.m?1:0)?!1:p.m?(p.i=E.G.concat(p.i),!0):p.I==1||p.I==2||p.D>=(p.Sa?0:p.Ta)?!1:(p.m=ci(m(p.Ea,p,E),ru(p,p.D)),p.D++,!0)}n.Ea=function(p){if(this.m)if(this.m=null,this.I==1){if(!p){this.V=Math.floor(Math.random()*1e5),p=this.V++;const G=new Jn(this,this.j,p);let J=this.o;if(this.U&&(J?(J=O(J),ue(J,this.U)):J=this.U),this.u!==null||this.R||(G.J=J,J=null),this.S)e:{for(var E=0,C=0;C<this.i.length;C++){t:{var w=this.i[C];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(E+=w,E>4096){E=C;break e}if(E===4096||C===this.i.length-1){E=C+1;break e}}E=1e3}else E=1e3;E=nu(this,G,E),C=Ct(this.J),$e(C,"RID",p),$e(C,"CVER",22),this.G&&$e(C,"X-HTTP-Session-Id",this.G),gs(this,C),J&&(this.R?E="headers="+Ui(Dn(J))+"&"+E:this.u&&hs(C,this.u,J)),_a(this.h,G),this.Ra&&$e(C,"TYPE","init"),this.S?($e(C,"$req",E),$e(C,"SID","null"),G.U=!0,di(G,C,null)):di(G,C,E),this.I=2}}else this.I==3&&(p?Na(this,p):this.i.length==0||ya(this.h)||Na(this))};function Na(p,E){var C;E?C=E.l:C=p.V++;const w=Ct(p.J);$e(w,"SID",p.M),$e(w,"RID",C),$e(w,"AID",p.K),gs(p,w),p.u&&p.o&&hs(w,p.u,p.o),C=new Jn(p,p.j,C,p.D+1),p.u===null&&(C.J=p.o),E&&(p.i=E.G.concat(p.i)),E=nu(p,C,1e3),C.H=Math.round(p.va*.5)+Math.round(p.va*.5*Math.random()),_a(p.h,C),di(C,w,E)}function gs(p,E){p.H&&Ge(p.H,function(C,w){$e(E,w,C)}),p.l&&Ge({},function(C,w){$e(E,w,C)})}function nu(p,E,C){C=Math.min(p.i.length,C);const w=p.l?m(p.l.Ka,p.l,p):null;e:{var G=p.i;let we=-1;for(;;){const gt=["count="+C];we==-1?C>0?(we=G[0].g,gt.push("ofs="+we)):we=0:gt.push("ofs="+we);let Je=!0;for(let ut=0;ut<C;ut++){var J=G[ut].g;const bn=G[ut].map;if(J-=we,J<0)we=Math.max(0,G[ut].g-100),Je=!1;else try{J="req"+J+"_"||"";try{var re=bn instanceof Map?bn:Object.entries(bn);for(const[Ci,Wn]of re){let Zn=Wn;h(Wn)&&(Zn=uo(Wn)),gt.push(J+Ci+"="+encodeURIComponent(Zn))}}catch(Ci){throw gt.push(J+"type="+encodeURIComponent("_badmap")),Ci}}catch{w&&w(bn)}}if(Je){re=gt.join("&");break e}}re=void 0}return p=p.i.splice(0,C),E.G=p,re}function iu(p){if(!p.g&&!p.v){p.Y=1;var E=p.Da;fe||N(),le||(fe(),le=!0),D.add(E,p),p.A=0}}function ys(p){return p.g||p.v||p.A>=3?!1:(p.Y++,p.v=ci(m(p.Da,p),ru(p,p.A)),p.A++,!0)}n.Da=function(){if(this.v=null,ou(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var p=4*this.T;this.j.info("BP detection timer enabled: "+p),this.B=ci(m(this.Wa,this),p)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Et(10),_o(this),ou(this))};function Da(p){p.B!=null&&(c.clearTimeout(p.B),p.B=null)}function ou(p){p.g=new Jn(p,p.j,"rpc",p.Y),p.u===null&&(p.g.J=p.o),p.g.P=0;var E=Ct(p.na);$e(E,"RID","rpc"),$e(E,"SID",p.M),$e(E,"AID",p.K),$e(E,"CI",p.F?"0":"1"),!p.F&&p.ia&&$e(E,"TO",p.ia),$e(E,"TYPE","xmlhttp"),gs(p,E),p.u&&p.o&&hs(E,p.u,p.o),p.O&&(p.g.H=p.O);var C=p.g;p=p.ba,C.M=1,C.A=cs(Ct(E)),C.u=null,C.R=!0,Qs(C,p)}n.Va=function(){this.C!=null&&(this.C=null,_o(this),ys(this),Et(19))};function ir(p){p.C!=null&&(c.clearTimeout(p.C),p.C=null)}function su(p,E){var C=null;if(p.g==E){ir(p),Da(p),p.g=null;var w=2}else if(yi(p.h,E))C=E.G,va(p.h,E),w=1;else return;if(p.I!=0){if(E.o)if(w==1){C=E.u?E.u.length:0,E=Date.now()-E.F;var G=p.D;w=Ks(),Vt(w,new ui(w,C)),Si(p)}else iu(p);else if(G=E.m,G==3||G==0&&E.X>0||!(w==1&&nr(p,E)||w==2&&ys(p)))switch(C&&C.length>0&&(E=p.h,E.i=E.i.concat(C)),G){case 1:Ai(p,5);break;case 4:Ai(p,10);break;case 3:Ai(p,6);break;default:Ai(p,2)}}}function ru(p,E){let C=p.Qa+Math.floor(Math.random()*p.Za);return p.isActive()||(C*=2),C*E}function Ai(p,E){if(p.j.info("Error code "+E),E==2){var C=m(p.bb,p),w=p.Ua;const G=!w;w=new vn(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||kt(w,"https"),cs(w),G?Qn(w.toString(),C):Ia(w.toString(),C)}else Et(2);p.I=0,p.l&&p.l.pa(E),au(p),tr(p)}n.bb=function(p){p?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function au(p){if(p.I=0,p.ja=[],p.l){const E=Ta(p.h);(E.length!=0||p.i.length!=0)&&(U(p.ja,E),U(p.ja,p.i),p.h.i.length=0,R(p.i),p.i.length=0),p.l.oa()}}function lu(p,E,C){var w=C instanceof vn?Ct(C):new vn(C);if(w.g!="")E&&(w.g=E+"."+w.g),co(w,w.u);else{var G=c.location;w=G.protocol,E=E?E+"."+G.hostname:G.hostname,G=+G.port;const J=new vn(null);w&&kt(J,w),E&&(J.g=E),G&&co(J,G),C&&(J.h=C),w=J}return C=p.G,E=p.wa,C&&E&&$e(w,C,E),$e(w,"VER",p.ka),gs(p,w),w}function uu(p,E,C){if(E&&!p.L)throw Error("Can't create secondary domain capable XhrIo object.");return E=p.Aa&&!p.ma?new je(new vi({ab:C})):new je(p.ma),E.Fa(p.L),E}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function cu(){}n=cu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function vo(){}vo.prototype.g=function(p,E){return new sn(p,E)};function sn(p,E){Tt.call(this),this.g=new yo(E),this.l=p,this.h=E&&E.messageUrlParams||null,p=E&&E.messageHeaders||null,E&&E.clientProtocolHeaderRequired&&(p?p["X-Client-Protocol"]="webchannel":p={"X-Client-Protocol":"webchannel"}),this.g.o=p,p=E&&E.initMessageHeaders||null,E&&E.messageContentType&&(p?p["X-WebChannel-Content-Type"]=E.messageContentType:p={"X-WebChannel-Content-Type":E.messageContentType}),E&&E.sa&&(p?p["X-WebChannel-Client-Profile"]=E.sa:p={"X-WebChannel-Client-Profile":E.sa}),this.g.U=p,(p=E&&E.Qb)&&!b(p)&&(this.g.u=p),this.A=E&&E.supportsCrossDomainXhr||!1,this.v=E&&E.sendRawJson||!1,(E=E&&E.httpSessionIdParam)&&!b(E)&&(this.g.G=E,p=this.h,p!==null&&E in p&&(p=this.h,E in p&&delete p[E])),this.j=new Oi(this)}T(sn,Tt),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){Ma(this.g)},sn.prototype.o=function(p){var E=this.g;if(typeof p=="string"){var C={};C.__data__=p,p=C}else this.v&&(C={},C.__data__=uo(p),p=C);E.i.push(new At(E.Ya++,p)),E.I==3&&Si(E)},sn.prototype.N=function(){this.g.l=null,delete this.j,Ma(this.g),delete this.g,sn.Z.N.call(this)};function fu(p){Ht.call(this),p.__headers__&&(this.headers=p.__headers__,this.statusCode=p.__status__,delete p.__headers__,delete p.__status__);var E=p.__sm__;if(E){e:{for(const C in E){p=C;break e}p=void 0}(this.i=p)&&(p=this.i,E=E!==null&&p in E?E[p]:void 0),this.data=E}else this.data=p}T(fu,Ht);function du(){wn.call(this),this.status=1}T(du,wn);function Oi(p){this.g=p}T(Oi,cu),Oi.prototype.ra=function(){Vt(this.g,"a")},Oi.prototype.qa=function(p){Vt(this.g,new fu(p))},Oi.prototype.pa=function(p){Vt(this.g,new du)},Oi.prototype.oa=function(){Vt(this.g,"b")},vo.prototype.createWebChannel=vo.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,WE=function(){return new vo},$E=function(){return Ks()},XE=mt,ap={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ls.NO_ERROR=0,ls.TIMEOUT=8,ls.HTTP_ERROR=6,Nc=ls,pa.COMPLETE="complete",QE=pa,zl.EventType=zn,zn.OPEN="a",zn.CLOSE="b",zn.ERROR="c",zn.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,_l=zl,je.prototype.listenOnce=je.prototype.K,je.prototype.getLastError=je.prototype.Ha,je.prototype.getLastErrorCode=je.prototype.ya,je.prototype.getStatus=je.prototype.ca,je.prototype.getResponseJson=je.prototype.La,je.prototype.getResponseText=je.prototype.la,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Fa,KE=je}).apply(typeof Ec<"u"?Ec:typeof self<"u"?self:typeof window<"u"?window:{});const q0="@firebase/firestore",F0="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}en.UNAUTHENTICATED=new en(null),en.GOOGLE_CREDENTIALS=new en("google-credentials-uid"),en.FIRST_PARTY=new en("first-party-uid"),en.MOCK_USER=new en("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oa="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks=new FE("@firebase/firestore");function Ur(){return ks.logLevel}function he(n,...e){if(ks.logLevel<=Be.DEBUG){const t=e.map(kp);ks.debug(`Firestore (${oa}): ${n}`,...t)}}function oo(n,...e){if(ks.logLevel<=Be.ERROR){const t=e.map(kp);ks.error(`Firestore (${oa}): ${n}`,...t)}}function Qr(n,...e){if(ks.logLevel<=Be.WARN){const t=e.map(kp);ks.warn(`Firestore (${oa}): ${n}`,...t)}}function kp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(n,e,t){let o="Unexpected state";typeof e=="string"?o=e:t=e,ZE(n,o,t)}function ZE(n,e,t){let o=`FIRESTORE (${oa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{o+=" CONTEXT: "+JSON.stringify(t)}catch{o+=" CONTEXT: "+t}throw oo(o),new Error(o)}function Qe(n,e,t,o){let r="Unexpected state";typeof t=="string"?r=t:o=t,n||ZE(e,r,o)}function Re(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends ia{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class f2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(en.UNAUTHENTICATED)))}shutdown(){}}class d2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class h2{constructor(e){this.t=e,this.currentUser=en.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Qe(this.o===void 0,42304);let o=this.i;const r=y=>this.i!==o?(o=this.i,t(y)):Promise.resolve();let l=new Ko;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ko,e.enqueueRetryable((()=>r(this.currentUser)))};const c=()=>{const y=l;e.enqueueRetryable((async()=>{await y.promise,await r(this.currentUser)}))},h=y=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((y=>h(y))),setTimeout((()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?h(y):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ko)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((o=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Qe(typeof o.accessToken=="string",31837,{l:o}),new jE(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new en(e)}}class p2{constructor(e,t,o){this.P=e,this.T=t,this.I=o,this.type="FirstParty",this.user=en.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class m2{constructor(e,t,o){this.P=e,this.T=t,this.I=o}getToken(){return Promise.resolve(new p2(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(en.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class B0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class g2{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Qx(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Qe(this.o===void 0,3512);const o=l=>{l.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,he("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>o(l)))};const r=l=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>r(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?r(l):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new B0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Qe(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new B0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let o=0;o<n;o++)t[o]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Op{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const r=y2(40);for(let l=0;l<r.length;++l)o.length<20&&r[l]<t&&(o+=e.charAt(r[l]%62))}return o}}function Ue(n,e){return n<e?-1:n>e?1:0}function lp(n,e){const t=Math.min(n.length,e.length);for(let o=0;o<t;o++){const r=n.charAt(o),l=e.charAt(o);if(r!==l)return Lh(r)===Lh(l)?Ue(r,l):Lh(r)?1:-1}return Ue(n.length,e.length)}const _2=55296,v2=57343;function Lh(n){const e=n.charCodeAt(0);return e>=_2&&e<=v2}function Xr(n,e,t){return n.length===e.length&&n.every(((o,r)=>t(o,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0="__name__";class Ni{constructor(e,t,o){t===void 0?t=0:t>e.length&&Ee(637,{offset:t,range:e.length}),o===void 0?o=e.length-t:o>e.length-t&&Ee(1746,{length:o,range:e.length-t}),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach((o=>{t.push(o)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let r=0;r<o;r++){const l=Ni.compareSegments(e.get(r),t.get(r));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const o=Ni.isNumericId(e),r=Ni.isNumericId(t);return o&&!r?-1:!o&&r?1:o&&r?Ni.extractNumericId(e).compare(Ni.extractNumericId(t)):lp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Jo.fromString(e.substring(4,e.length-2))}}class ot extends Ni{construct(e,t,o){return new ot(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter((r=>r.length>0)))}return new ot(t)}static emptyPath(){return new ot([])}}const T2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class $t extends Ni{construct(e,t,o){return new $t(e,t,o)}static isValidIdentifier(e){return T2.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),$t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===G0}static keyField(){return new $t([G0])}static fromServerFormat(e){const t=[];let o="",r=0;const l=()=>{if(o.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let c=!1;for(;r<e.length;){const h=e[r];if(h==="\\"){if(r+1===e.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const y=e[r+1];if(y!=="\\"&&y!=="."&&y!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=y,r+=2}else h==="`"?(c=!c,r++):h!=="."||c?(o+=h,r++):(l(),r++)}if(l(),c)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new $t(t)}static emptyPath(){return new $t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(e){this.path=e}static fromPath(e){return new _e(ot.fromString(e))}static fromName(e){return new _e(ot.fromString(e).popFirst(5))}static empty(){return new _e(ot.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ot.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ot.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new ot(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eS(n,e,t){if(!t)throw new de(ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function E2(n,e,t,o){if(e===!0&&o===!0)throw new de(ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function H0(n){if(!_e.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function z0(n){if(_e.isDocumentKey(n))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function tS(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ff(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ee(12329,{type:typeof n})}function Yc(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ff(n);throw new de(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ll(n,e){if(!tS(n))throw new de(ne.INVALID_ARGUMENT,"JSON must be an object");let t;for(const o in e)if(e[o]){const r=e[o].typeString,l="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){t=`JSON missing required field: '${o}'`;break}const c=n[o];if(r&&typeof c!==r){t=`JSON field '${o}' must be a ${r}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${o}' field to equal '${l.value}'`;break}}if(t)throw new de(ne.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y0=-62135596800,J0=1e6;class at{static now(){return at.fromMillis(Date.now())}static fromDate(e){return at.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor((e-1e3*t)*J0);return new at(t,o)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Y0)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/J0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:at._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ll(e,at._jsonSchema))return new at(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Y0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}at._jsonSchemaVersion="firestore/timestamp/1.0",at._jsonSchema={type:bt("string",at._jsonSchemaVersion),seconds:bt("number"),nanoseconds:bt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new at(0,0))}static max(){return new Ce(new at(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;function S2(n,e){const t=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,r=Ce.fromTimestamp(o===1e9?new at(t+1,0):new at(t,o));return new Xo(r,_e.empty(),e)}function A2(n){return new Xo(n.readTime,n.key,Ml)}class Xo{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new Xo(Ce.min(),_e.empty(),Ml)}static max(){return new Xo(Ce.max(),_e.empty(),Ml)}}function C2(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_e.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n){if(n.code!==ne.FAILED_PRECONDITION||n.message!==I2)throw n;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ee(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((o,r)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(o,r)},this.catchCallback=l=>{this.wrapFailure(t,l).next(o,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,o)=>{t(e)}))}static reject(e){return new oe(((t,o)=>{o(e)}))}static waitFor(e){return new oe(((t,o)=>{let r=0,l=0,c=!1;e.forEach((h=>{++r,h.next((()=>{++l,c&&l===r&&t()}),(y=>o(y)))})),c=!0,l===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const o of e)t=t.next((r=>r?oe.resolve(r):o()));return t}static forEach(e,t){const o=[];return e.forEach(((r,l)=>{o.push(t.call(this,r,l))})),this.waitFor(o)}static mapArray(e,t){return new oe(((o,r)=>{const l=e.length,c=new Array(l);let h=0;for(let y=0;y<l;y++){const m=y;t(e[m]).next((v=>{c[m]=v,++h,h===l&&o(c)}),(v=>r(v)))}}))}static doWhile(e,t){return new oe(((o,r)=>{const l=()=>{e()===!0?t().next((()=>{l()}),r):o()};l()}))}}function w2(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ra(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>t.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}df.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp=-1;function hf(n){return n==null}function Jc(n){return n===0&&1/n==-1/0}function M2(n){return typeof n=="number"&&Number.isInteger(n)&&!Jc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS="";function N2(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=K0(e)),e=D2(n.get(t),e);return K0(e)}function D2(n,e){let t=e;const o=n.length;for(let r=0;r<o;r++){const l=n.charAt(r);switch(l){case"\0":t+="";break;case nS:t+="";break;default:t+=l}}return t}function K0(n){return n+nS+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fs(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function iS(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new ft(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new ft(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(o===0)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const r=this.comparator(e,o.key);if(r===0)return t+o.left.size;r<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,o)=>(e(t,o),!1)))}toString(){const e=[];return this.inorderTraversal(((t,o)=>(e.push(`${t}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Sc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Sc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Sc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Sc(this.root,e,this.comparator,!0)}}class Sc{constructor(e,t,o,r){this.isReverse=r,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?o(e.key,t):1,t&&r&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,o,r,l){this.key=e,this.value=t,this.color=o??Xt.RED,this.left=r??Xt.EMPTY,this.right=l??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,r,l){return new Xt(e??this.key,t??this.value,o??this.color,r??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let r=this;const l=o(e,r.key);return r=l<0?r.copy(null,null,null,r.left.insert(e,t,o),null):l===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,o)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Xt.EMPTY;o=r.right.min(),r=r.copy(o.key,o.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ee(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ee(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ee(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ee(57766)}get value(){throw Ee(16141)}get color(){throw Ee(16727)}get left(){throw Ee(29726)}get right(){throw Ee(36894)}copy(e,t,o,r,l){return this}insert(e,t,o){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.comparator=e,this.data=new ft(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,o)=>(e(t),!1)))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const r=o.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let o;for(o=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new X0(this.data.getIterator())}getIteratorFrom(e){return new X0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((o=>{t=t.add(o)})),t}isEqual(e){if(!(e instanceof Ut)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(this.comparator(r,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ut(this.comparator);return t.data=e,t}}class X0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e){this.fields=e,e.sort($t.comparator)}static empty(){return new ni([])}unionWith(e){let t=new Ut($t.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new ni(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Xr(this.fields,e.fields,((t,o)=>t.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new oS("Invalid base64 string: "+l):l}})(e);return new Wt(t)}static fromUint8Array(e){const t=(function(r){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);return l})(e);return new Wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const o=new Uint8Array(t.length);for(let r=0;r<t.length;r++)o[r]=t.charCodeAt(r);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wt.EMPTY_BYTE_STRING=new Wt("");const b2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $o(n){if(Qe(!!n,39018),typeof n=="string"){let e=0;const t=b2.exec(n);if(Qe(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:vt(n.seconds),nanos:vt(n.nanos)}}function vt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Wo(n){return typeof n=="string"?Wt.fromBase64String(n):Wt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS="server_timestamp",rS="__type__",aS="__previous_value__",lS="__local_write_time__";function Fp(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[rS])==null?void 0:o.stringValue)===sS}function pf(n){const e=n.mapValue.fields[aS];return Fp(e)?pf(e):e}function Nl(n){const e=$o(n.mapValue.fields[lS].timestampValue);return new at(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,t,o,r,l,c,h,y,m,v){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=r,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=y,this.useFetchStreams=m,this.isUsingEmulator=v}}const Kc="(default)";class Dl{constructor(e,t){this.projectId=e,this.database=t||Kc}static empty(){return new Dl("","")}get isDefaultDatabase(){return this.database===Kc}isEqual(e){return e instanceof Dl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS="__type__",V2="__max__",Ac={mapValue:{}},cS="__vector__",Qc="value";function Zo(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fp(n)?4:U2(n)?9007199254740991:P2(n)?10:11:Ee(28295,{value:n})}function Pi(n,e){if(n===e)return!0;const t=Zo(n);if(t!==Zo(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Nl(n).isEqual(Nl(e));case 3:return(function(r,l){if(typeof r.timestampValue=="string"&&typeof l.timestampValue=="string"&&r.timestampValue.length===l.timestampValue.length)return r.timestampValue===l.timestampValue;const c=$o(r.timestampValue),h=$o(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,l){return Wo(r.bytesValue).isEqual(Wo(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,l){return vt(r.geoPointValue.latitude)===vt(l.geoPointValue.latitude)&&vt(r.geoPointValue.longitude)===vt(l.geoPointValue.longitude)})(n,e);case 2:return(function(r,l){if("integerValue"in r&&"integerValue"in l)return vt(r.integerValue)===vt(l.integerValue);if("doubleValue"in r&&"doubleValue"in l){const c=vt(r.doubleValue),h=vt(l.doubleValue);return c===h?Jc(c)===Jc(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return Xr(n.arrayValue.values||[],e.arrayValue.values||[],Pi);case 10:case 11:return(function(r,l){const c=r.mapValue.fields||{},h=l.mapValue.fields||{};if(Q0(c)!==Q0(h))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(h[y]===void 0||!Pi(c[y],h[y])))return!1;return!0})(n,e);default:return Ee(52216,{left:n})}}function bl(n,e){return(n.values||[]).find((t=>Pi(t,e)))!==void 0}function $r(n,e){if(n===e)return 0;const t=Zo(n),o=Zo(e);if(t!==o)return Ue(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=vt(l.integerValue||l.doubleValue),y=vt(c.integerValue||c.doubleValue);return h<y?-1:h>y?1:h===y?0:isNaN(h)?isNaN(y)?0:-1:1})(n,e);case 3:return $0(n.timestampValue,e.timestampValue);case 4:return $0(Nl(n),Nl(e));case 5:return lp(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Wo(l),y=Wo(c);return h.compareTo(y)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),y=c.split("/");for(let m=0;m<h.length&&m<y.length;m++){const v=Ue(h[m],y[m]);if(v!==0)return v}return Ue(h.length,y.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ue(vt(l.latitude),vt(c.latitude));return h!==0?h:Ue(vt(l.longitude),vt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return W0(n.arrayValue,e.arrayValue);case 10:return(function(l,c){var S,R,U,q;const h=l.fields||{},y=c.fields||{},m=(S=h[Qc])==null?void 0:S.arrayValue,v=(R=y[Qc])==null?void 0:R.arrayValue,T=Ue(((U=m==null?void 0:m.values)==null?void 0:U.length)||0,((q=v==null?void 0:v.values)==null?void 0:q.length)||0);return T!==0?T:W0(m,v)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===Ac.mapValue&&c===Ac.mapValue)return 0;if(l===Ac.mapValue)return 1;if(c===Ac.mapValue)return-1;const h=l.fields||{},y=Object.keys(h),m=c.fields||{},v=Object.keys(m);y.sort(),v.sort();for(let T=0;T<y.length&&T<v.length;++T){const S=lp(y[T],v[T]);if(S!==0)return S;const R=$r(h[y[T]],m[v[T]]);if(R!==0)return R}return Ue(y.length,v.length)})(n.mapValue,e.mapValue);default:throw Ee(23264,{he:t})}}function $0(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=$o(n),o=$o(e),r=Ue(t.seconds,o.seconds);return r!==0?r:Ue(t.nanos,o.nanos)}function W0(n,e){const t=n.values||[],o=e.values||[];for(let r=0;r<t.length&&r<o.length;++r){const l=$r(t[r],o[r]);if(l)return l}return Ue(t.length,o.length)}function Wr(n){return up(n)}function up(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const o=$o(t);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Wo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return _e.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let o="[",r=!0;for(const l of t.values||[])r?r=!1:o+=",",o+=up(l);return o+"]"})(n.arrayValue):"mapValue"in n?(function(t){const o=Object.keys(t.fields||{}).sort();let r="{",l=!0;for(const c of o)l?l=!1:r+=",",r+=`${c}:${up(t.fields[c])}`;return r+"}"})(n.mapValue):Ee(61005,{value:n})}function Dc(n){switch(Zo(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=pf(n);return e?16+Dc(e):16;case 5:return 2*n.stringValue.length;case 6:return Wo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((r,l)=>r+Dc(l)),0)})(n.arrayValue);case 10:case 11:return(function(o){let r=0;return Fs(o.fields,((l,c)=>{r+=l.length+Dc(c)})),r})(n.mapValue);default:throw Ee(13486,{value:n})}}function Z0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function cp(n){return!!n&&"integerValue"in n}function Bp(n){return!!n&&"arrayValue"in n}function j0(n){return!!n&&"nullValue"in n}function eT(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function bc(n){return!!n&&"mapValue"in n}function P2(n){var t,o;return((o=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[uS])==null?void 0:o.stringValue)===cS}function Sl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return Fs(n.mapValue.fields,((t,o)=>e.mapValue.fields[t]=Sl(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Sl(n.arrayValue.values[t]);return e}return{...n}}function U2(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===V2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this.value=e}static empty(){return new Fn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!bc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Sl(t)}setAll(e){let t=$t.emptyPath(),o={},r=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const y=this.getFieldsMap(t);this.applyChanges(y,o,r),o={},r=[],t=h.popLast()}c?o[h.lastSegment()]=Sl(c):r.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,o,r)}delete(e){const t=this.field(e.popLast());bc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let r=t.mapValue.fields[e.get(o)];bc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,o){Fs(t,((r,l)=>e[r]=l));for(const r of o)delete e[r]}clone(){return new Fn(Sl(this.value))}}function fS(n){const e=[];return Fs(n.fields,((t,o)=>{const r=new $t([t]);if(bc(o)){const l=fS(o.mapValue).fields;if(l.length===0)e.push(r);else for(const c of l)e.push(r.child(c))}else e.push(r)})),new ni(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,t,o,r,l,c,h){this.key=e,this.documentType=t,this.version=o,this.readTime=r,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new tn(e,0,Ce.min(),Ce.min(),Ce.min(),Fn.empty(),0)}static newFoundDocument(e,t,o,r){return new tn(e,1,t,Ce.min(),o,r,0)}static newNoDocument(e,t){return new tn(e,2,t,Ce.min(),Ce.min(),Fn.empty(),0)}static newUnknownDocument(e,t){return new tn(e,3,t,Ce.min(),Ce.min(),Fn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Fn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Fn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof tn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new tn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,t){this.position=e,this.inclusive=t}}function tT(n,e,t){let o=0;for(let r=0;r<n.position.length;r++){const l=e[r],c=n.position[r];if(l.field.isKeyField()?o=_e.comparator(_e.fromName(c.referenceValue),t.key):o=$r(c,t.data.field(l.field)),l.dir==="desc"&&(o*=-1),o!==0)break}return o}function nT(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,t="asc"){this.field=e,this.dir=t}}function L2(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dS{}class Dt extends dS{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,o):new O2(e,t,o):t==="array-contains"?new B2(e,o):t==="in"?new G2(e,o):t==="not-in"?new H2(e,o):t==="array-contains-any"?new z2(e,o):new Dt(e,t,o)}static createKeyFieldInFilter(e,t,o){return t==="in"?new q2(e,o):new F2(e,o)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison($r(t,this.value)):t!==null&&Zo(this.value)===Zo(t)&&this.matchesComparison($r(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ee(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class si extends dS{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new si(e,t)}matches(e){return hS(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hS(n){return n.op==="and"}function pS(n){return k2(n)&&hS(n)}function k2(n){for(const e of n.filters)if(e instanceof si)return!1;return!0}function fp(n){if(n instanceof Dt)return n.field.canonicalString()+n.op.toString()+Wr(n.value);if(pS(n))return n.filters.map((e=>fp(e))).join(",");{const e=n.filters.map((t=>fp(t))).join(",");return`${n.op}(${e})`}}function mS(n,e){return n instanceof Dt?(function(o,r){return r instanceof Dt&&o.op===r.op&&o.field.isEqual(r.field)&&Pi(o.value,r.value)})(n,e):n instanceof si?(function(o,r){return r instanceof si&&o.op===r.op&&o.filters.length===r.filters.length?o.filters.reduce(((l,c,h)=>l&&mS(c,r.filters[h])),!0):!1})(n,e):void Ee(19439)}function gS(n){return n instanceof Dt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Wr(t.value)}`})(n):n instanceof si?(function(t){return t.op.toString()+" {"+t.getFilters().map(gS).join(" ,")+"}"})(n):"Filter"}class O2 extends Dt{constructor(e,t,o){super(e,t,o),this.key=_e.fromName(o.referenceValue)}matches(e){const t=_e.comparator(e.key,this.key);return this.matchesComparison(t)}}class q2 extends Dt{constructor(e,t){super(e,"in",t),this.keys=yS("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class F2 extends Dt{constructor(e,t){super(e,"not-in",t),this.keys=yS("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function yS(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((o=>_e.fromName(o.referenceValue)))}class B2 extends Dt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bp(t)&&bl(t.arrayValue,this.value)}}class G2 extends Dt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&bl(this.value.arrayValue,t)}}class H2 extends Dt{constructor(e,t){super(e,"not-in",t)}matches(e){if(bl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!bl(this.value.arrayValue,t)}}class z2 extends Dt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((o=>bl(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,t=null,o=[],r=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=r,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function iT(n,e=null,t=[],o=[],r=null,l=null,c=null){return new Y2(n,e,t,o,r,l,c)}function Gp(n){const e=Re(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((o=>fp(o))).join(","),t+="|ob:",t+=e.orderBy.map((o=>(function(l){return l.field.canonicalString()+l.dir})(o))).join(","),hf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((o=>Wr(o))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((o=>Wr(o))).join(",")),e.Te=t}return e.Te}function Hp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!L2(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!mS(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nT(n.startAt,e.startAt)&&nT(n.endAt,e.endAt)}function dp(n){return _e.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e,t=null,o=[],r=[],l=null,c="F",h=null,y=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=r,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=y,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function J2(n,e,t,o,r,l,c,h){return new aa(n,e,t,o,r,l,c,h)}function _S(n){return new aa(n)}function oT(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function vS(n){return n.collectionGroup!==null}function Al(n){const e=Re(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ut($t.comparator);return c.filters.forEach((y=>{y.getFlattenedFilters().forEach((m=>{m.isInequality()&&(h=h.add(m.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new xl(l,o))})),t.has($t.keyField().canonicalString())||e.Ie.push(new xl($t.keyField(),o))}return e.Ie}function Di(n){const e=Re(n);return e.Ee||(e.Ee=K2(e,Al(n))),e.Ee}function K2(n,e){if(n.limitType==="F")return iT(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const l=r.dir==="desc"?"asc":"desc";return new xl(r.field,l)}));const t=n.endAt?new Xc(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Xc(n.startAt.position,n.startAt.inclusive):null;return iT(n.path,n.collectionGroup,e,n.filters,n.limit,t,o)}}function hp(n,e){const t=n.filters.concat([e]);return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function $c(n,e,t){return new aa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function mf(n,e){return Hp(Di(n),Di(e))&&n.limitType===e.limitType}function TS(n){return`${Gp(Di(n))}|lt:${n.limitType}`}function Lr(n){return`Query(target=${(function(t){let o=t.path.canonicalString();return t.collectionGroup!==null&&(o+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(o+=`, filters: [${t.filters.map((r=>gS(r))).join(", ")}]`),hf(t.limit)||(o+=", limit: "+t.limit),t.orderBy.length>0&&(o+=`, orderBy: [${t.orderBy.map((r=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(r))).join(", ")}]`),t.startAt&&(o+=", startAt: ",o+=t.startAt.inclusive?"b:":"a:",o+=t.startAt.position.map((r=>Wr(r))).join(",")),t.endAt&&(o+=", endAt: ",o+=t.endAt.inclusive?"a:":"b:",o+=t.endAt.position.map((r=>Wr(r))).join(",")),`Target(${o})`})(Di(n))}; limitType=${n.limitType})`}function gf(n,e){return e.isFoundDocument()&&(function(o,r){const l=r.key.path;return o.collectionGroup!==null?r.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(l):_e.isDocumentKey(o.path)?o.path.isEqual(l):o.path.isImmediateParentOf(l)})(n,e)&&(function(o,r){for(const l of Al(o))if(!l.field.isKeyField()&&r.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(o,r){for(const l of o.filters)if(!l.matches(r))return!1;return!0})(n,e)&&(function(o,r){return!(o.startAt&&!(function(c,h,y){const m=tT(c,h,y);return c.inclusive?m<=0:m<0})(o.startAt,Al(o),r)||o.endAt&&!(function(c,h,y){const m=tT(c,h,y);return c.inclusive?m>=0:m>0})(o.endAt,Al(o),r))})(n,e)}function Q2(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function ES(n){return(e,t)=>{let o=!1;for(const r of Al(n)){const l=X2(r,e,t);if(l!==0)return l;o=o||r.field.isKeyField()}return 0}}function X2(n,e,t){const o=n.field.isKeyField()?_e.comparator(e.key,t.key):(function(l,c,h){const y=c.data.field(l),m=h.data.field(l);return y!==null&&m!==null?$r(y,m):Ee(42886)})(n.field,e,t);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return Ee(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o!==void 0){for(const[r,l]of o)if(this.equalsFn(r,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const o=this.mapKeyFn(e),r=this.inner[o];if(r===void 0)return this.inner[o]=[[e,t]],void this.innerSize++;for(let l=0;l<r.length;l++)if(this.equalsFn(r[l][0],e))return void(r[l]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(o===void 0)return!1;for(let r=0;r<o.length;r++)if(this.equalsFn(o[r][0],e))return o.length===1?delete this.inner[t]:o.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Fs(this.inner,((t,o)=>{for(const[r,l]of o)e(r,l)}))}isEmpty(){return iS(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new ft(_e.comparator);function so(){return $2}const SS=new ft(_e.comparator);function vl(...n){let e=SS;for(const t of n)e=e.insert(t.key,t);return e}function AS(n){let e=SS;return n.forEach(((t,o)=>e=e.insert(t,o.overlayedDocument))),e}function Ls(){return Cl()}function CS(){return Cl()}function Cl(){return new Bs((n=>n.toString()),((n,e)=>n.isEqual(e)))}const W2=new ft(_e.comparator),Z2=new Ut(_e.comparator);function Le(...n){let e=Z2;for(const t of n)e=e.add(t);return e}const j2=new Ut(Ue);function eV(){return j2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jc(e)?"-0":e}}function IS(n){return{integerValue:""+n}}function tV(n,e){return M2(e)?IS(e):zp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(){this._=void 0}}function nV(n,e,t){return n instanceof Vl?(function(r,l){const c={fields:{[rS]:{stringValue:sS},[lS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return l&&Fp(l)&&(l=pf(l)),l&&(c.fields[aS]=l),{mapValue:c}})(t,e):n instanceof Pl?wS(n,e):n instanceof Ul?MS(n,e):(function(r,l){const c=RS(r,l),h=sT(c)+sT(r.Ae);return cp(c)&&cp(r.Ae)?IS(h):zp(r.serializer,h)})(n,e)}function iV(n,e,t){return n instanceof Pl?wS(n,e):n instanceof Ul?MS(n,e):t}function RS(n,e){return n instanceof Wc?(function(o){return cp(o)||(function(l){return!!l&&"doubleValue"in l})(o)})(e)?e:{integerValue:0}:null}class Vl extends yf{}class Pl extends yf{constructor(e){super(),this.elements=e}}function wS(n,e){const t=NS(e);for(const o of n.elements)t.some((r=>Pi(r,o)))||t.push(o);return{arrayValue:{values:t}}}class Ul extends yf{constructor(e){super(),this.elements=e}}function MS(n,e){let t=NS(e);for(const o of n.elements)t=t.filter((r=>!Pi(r,o)));return{arrayValue:{values:t}}}class Wc extends yf{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function sT(n){return vt(n.integerValue||n.doubleValue)}function NS(n){return Bp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e,t){this.field=e,this.transform=t}}function sV(n,e){return n.field.isEqual(e.field)&&(function(o,r){return o instanceof Pl&&r instanceof Pl||o instanceof Ul&&r instanceof Ul?Xr(o.elements,r.elements,Pi):o instanceof Wc&&r instanceof Wc?Pi(o.Ae,r.Ae):o instanceof Vl&&r instanceof Vl})(n.transform,e.transform)}class rV{constructor(e,t){this.version=e,this.transformResults=t}}class to{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new to}static exists(e){return new to(void 0,e)}static updateTime(e){return new to(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class _f{}function DS(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new xS(n.key,to.none()):new kl(n.key,n.data,to.none());{const t=n.data,o=Fn.empty();let r=new Ut($t.comparator);for(let l of e.fields)if(!r.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?o.delete(l):o.set(l,c),r=r.add(l)}return new Gs(n.key,o,new ni(r.toArray()),to.none())}}function aV(n,e,t){n instanceof kl?(function(r,l,c){const h=r.value.clone(),y=aT(r.fieldTransforms,l,c.transformResults);h.setAll(y),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof Gs?(function(r,l,c){if(!xc(r.precondition,l))return void l.convertToUnknownDocument(c.version);const h=aT(r.fieldTransforms,l,c.transformResults),y=l.data;y.setAll(bS(r)),y.setAll(h),l.convertToFoundDocument(c.version,y).setHasCommittedMutations()})(n,e,t):(function(r,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Il(n,e,t,o){return n instanceof kl?(function(l,c,h,y){if(!xc(l.precondition,c))return h;const m=l.value.clone(),v=lT(l.fieldTransforms,y,c);return m.setAll(v),c.convertToFoundDocument(c.version,m).setHasLocalMutations(),null})(n,e,t,o):n instanceof Gs?(function(l,c,h,y){if(!xc(l.precondition,c))return h;const m=lT(l.fieldTransforms,y,c),v=c.data;return v.setAll(bS(l)),v.setAll(m),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(n,e,t,o):(function(l,c,h){return xc(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function lV(n,e){let t=null;for(const o of n.fieldTransforms){const r=e.data.field(o.field),l=RS(o.transform,r||null);l!=null&&(t===null&&(t=Fn.empty()),t.set(o.field,l))}return t||null}function rT(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,r){return o===void 0&&r===void 0||!(!o||!r)&&Xr(o,r,((l,c)=>sV(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class kl extends _f{constructor(e,t,o,r=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gs extends _f{constructor(e,t,o,r,l=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=r,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function bS(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const o=n.data.field(t);e.set(t,o)}})),e}function aT(n,e,t){const o=new Map;Qe(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const l=n[r],c=l.transform,h=e.data.field(l.field);o.set(l.field,iV(c,h,t[r]))}return o}function lT(n,e,t){const o=new Map;for(const r of n){const l=r.transform,c=t.data.field(r.field);o.set(r.field,nV(l,c,e))}return o}class xS extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uV extends _f{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t,o,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=r}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const l=this.mutations[r];l.key.isEqual(e.key)&&aV(l,e,o[r])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Il(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Il(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=CS();return this.mutations.forEach((r=>{const l=e.get(r.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(r.key)?null:h;const y=DS(c,h);y!==null&&o.set(r.key,y),c.isValidDocument()||c.convertToNoDocument(Ce.min())})),o}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Le())}isEqual(e){return this.batchId===e.batchId&&Xr(this.mutations,e.mutations,((t,o)=>rT(t,o)))&&Xr(this.baseMutations,e.baseMutations,((t,o)=>rT(t,o)))}}class Yp{constructor(e,t,o,r){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=r}static from(e,t,o){Qe(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let r=(function(){return W2})();const l=e.mutations;for(let c=0;c<l.length;c++)r=r.insert(l[c].key,o[c].version);return new Yp(e,t,o,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nt,Fe;function hV(n){switch(n){case ne.OK:return Ee(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ee(15467,{code:n})}}function VS(n){if(n===void 0)return oo("GRPC error has no .code"),ne.UNKNOWN;switch(n){case Nt.OK:return ne.OK;case Nt.CANCELLED:return ne.CANCELLED;case Nt.UNKNOWN:return ne.UNKNOWN;case Nt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case Nt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case Nt.INTERNAL:return ne.INTERNAL;case Nt.UNAVAILABLE:return ne.UNAVAILABLE;case Nt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case Nt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case Nt.NOT_FOUND:return ne.NOT_FOUND;case Nt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case Nt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case Nt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case Nt.ABORTED:return ne.ABORTED;case Nt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case Nt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case Nt.DATA_LOSS:return ne.DATA_LOSS;default:return Ee(39323,{code:n})}}(Fe=Nt||(Nt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mV=new Jo([4294967295,4294967295],0);function uT(n){const e=pV().encode(n),t=new JE;return t.update(e),new Uint8Array(t.digest())}function cT(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),o=e.getUint32(4,!0),r=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Jo([t,o],0),new Jo([r,l],0)]}class Jp{constructor(e,t,o){if(this.bitmap=e,this.padding=t,this.hashCount=o,t<0||t>=8)throw new Tl(`Invalid padding: ${t}`);if(o<0)throw new Tl(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new Tl(`Invalid hash count: ${o}`);if(e.length===0&&t!==0)throw new Tl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Jo.fromNumber(this.ge)}ye(e,t,o){let r=e.add(t.multiply(Jo.fromNumber(o)));return r.compare(mV)===1&&(r=new Jo([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=uT(e),[o,r]=cT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);if(!this.we(c))return!1}return!0}static create(e,t,o){const r=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Jp(l,r,t);return o.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=uT(e),[o,r]=cT(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(o,r,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),o=e%8;this.bitmap[t]|=1<<o}}class Tl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,t,o,r,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=r,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const r=new Map;return r.set(e,Ol.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new vf(Ce.min(),r,new ft(Ue),so(),Le())}}class Ol{constructor(e,t,o,r,l){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=r,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Ol(o,t,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,t,o,r){this.be=e,this.removedTargetIds=t,this.key=o,this.De=r}}class PS{constructor(e,t){this.targetId=e,this.Ce=t}}class US{constructor(e,t,o=Wt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=r}}class fT{constructor(){this.ve=0,this.Fe=dT(),this.Me=Wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Le(),t=Le(),o=Le();return this.Fe.forEach(((r,l)=>{switch(l){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:o=o.add(r);break;default:Ee(38017,{changeType:l})}})),new Ol(this.Me,this.xe,e,t,o)}qe(){this.Oe=!1,this.Fe=dT()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class gV{constructor(e){this.Ge=e,this.ze=new Map,this.je=so(),this.Je=Cc(),this.He=Cc(),this.Ye=new ft(Ue)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const o=this.nt(t);switch(e.state){case 0:this.rt(t)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),o.Le(e.resumeToken));break;default:Ee(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((o,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,o=e.Ce.count,r=this.ot(t);if(r){const l=r.target;if(dp(l))if(o===0){const c=new _e(l.path);this.et(t,c,tn.newNoDocument(c,Ce.min()))}else Qe(o===1,20013,{expectedCount:o});else{const c=this._t(t);if(c!==o){const h=this.ut(e),y=h?this.ct(h,e,c):1;if(y!==0){this.it(t);const m=y===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,m)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:o="",padding:r=0},hashCount:l=0}=t;let c,h;try{c=Wo(o).toUint8Array()}catch(y){if(y instanceof oS)return Qr("Decoding the base64 bloom filter in existence filter failed ("+y.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw y}try{h=new Jp(c,r,l)}catch(y){return Qr(y instanceof Tl?"BloomFilter error: ":"Applying bloom filter failed: ",y),null}return h.ge===0?null:h}ct(e,t,o){return t.Ce.count===o-this.Pt(e,t.targetId)?0:2}Pt(e,t){const o=this.Ge.getRemoteKeysForTarget(t);let r=0;return o.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&dp(h.target)){const y=new _e(h.target.path);this.It(y).has(c)||this.Et(c,y)||this.et(c,y,tn.newNoDocument(y,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let o=Le();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((y=>{const m=this.ot(y);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(o=o.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const r=new vf(e,t,this.Ye,this.je,o);return this.je=so(),this.Je=Cc(),this.He=Cc(),this.Ye=new ft(Ue),r}Xe(e,t){if(!this.rt(e))return;const o=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,o),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,o){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),o&&(this.je=this.je.insert(t,o))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new fT,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ut(Ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ut(Ue),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||he("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new fT),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Cc(){return new ft(_e.comparator)}function dT(){return new ft(_e.comparator)}const yV={asc:"ASCENDING",desc:"DESCENDING"},_V={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vV={and:"AND",or:"OR"};class TV{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function pp(n,e){return n.useProto3Json||hf(e)?e:{value:e}}function Zc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function LS(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function EV(n,e){return Zc(n,e.toTimestamp())}function bi(n){return Qe(!!n,49232),Ce.fromTimestamp((function(t){const o=$o(t);return new at(o.seconds,o.nanos)})(n))}function Kp(n,e){return mp(n,e).canonicalString()}function mp(n,e){const t=(function(r){return new ot(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function kS(n){const e=ot.fromString(n);return Qe(GS(e),10190,{key:e.toString()}),e}function gp(n,e){return Kp(n.databaseId,e.path)}function kh(n,e){const t=kS(e);if(t.get(1)!==n.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _e(qS(t))}function OS(n,e){return Kp(n.databaseId,e)}function SV(n){const e=kS(n);return e.length===4?ot.emptyPath():qS(e)}function yp(n){return new ot(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function qS(n){return Qe(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function hT(n,e,t){return{name:gp(n,e),fields:t.value.mapValue.fields}}function AV(n,e){let t;if("targetChange"in e){e.targetChange;const o=(function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:Ee(39313,{state:m})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],l=(function(m,v){return m.useProto3Json?(Qe(v===void 0||typeof v=="string",58123),Wt.fromBase64String(v||"")):(Qe(v===void 0||v instanceof Buffer||v instanceof Uint8Array,16193),Wt.fromUint8Array(v||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(m){const v=m.code===void 0?ne.UNKNOWN:VS(m.code);return new de(v,m.message||"")})(c);t=new US(o,r,l,h||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const r=kh(n,o.document.name),l=bi(o.document.updateTime),c=o.document.createTime?bi(o.document.createTime):Ce.min(),h=new Fn({mapValue:{fields:o.document.fields}}),y=tn.newFoundDocument(r,l,c,h),m=o.targetIds||[],v=o.removedTargetIds||[];t=new Vc(m,v,y.key,y)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const r=kh(n,o.document),l=o.readTime?bi(o.readTime):Ce.min(),c=tn.newNoDocument(r,l),h=o.removedTargetIds||[];t=new Vc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const r=kh(n,o.document),l=o.removedTargetIds||[];t=new Vc([],l,r,null)}else{if(!("filter"in e))return Ee(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:r=0,unchangedNames:l}=o,c=new dV(r,l),h=o.targetId;t=new PS(h,c)}}return t}function CV(n,e){let t;if(e instanceof kl)t={update:hT(n,e.key,e.value)};else if(e instanceof xS)t={delete:gp(n,e.key)};else if(e instanceof Gs)t={update:hT(n,e.key,e.data),updateMask:VV(e.fieldMask)};else{if(!(e instanceof uV))return Ee(16599,{Vt:e.type});t={verify:gp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((o=>(function(l,c){const h=c.transform;if(h instanceof Vl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Pl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Ul)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof Wc)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ee(20930,{transform:c.transform})})(0,o)))),e.precondition.isNone||(t.currentDocument=(function(r,l){return l.updateTime!==void 0?{updateTime:EV(r,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ee(27497)})(n,e.precondition)),t}function IV(n,e){return n&&n.length>0?(Qe(e!==void 0,14353),n.map((t=>(function(r,l){let c=r.updateTime?bi(r.updateTime):bi(l);return c.isEqual(Ce.min())&&(c=bi(l)),new rV(c,r.transformResults||[])})(t,e)))):[]}function RV(n,e){return{documents:[OS(n,e.path)]}}function wV(n,e){const t={structuredQuery:{}},o=e.path;let r;e.collectionGroup!==null?(r=o,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=o.popLast(),t.structuredQuery.from=[{collectionId:o.lastSegment()}]),t.parent=OS(n,r);const l=(function(m){if(m.length!==0)return BS(si.create(m,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(m){if(m.length!==0)return m.map((v=>(function(S){return{field:kr(S.field),direction:DV(S.dir)}})(v)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=pp(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(m){return{before:m.inclusive,values:m.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(m){return{before:!m.inclusive,values:m.position}})(e.endAt)),{ft:t,parent:r}}function MV(n){let e=SV(n.parent);const t=n.structuredQuery,o=t.from?t.from.length:0;let r=null;if(o>0){Qe(o===1,65062);const v=t.from[0];v.allDescendants?r=v.collectionId:e=e.child(v.collectionId)}let l=[];t.where&&(l=(function(T){const S=FS(T);return S instanceof si&&pS(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((S=>(function(U){return new xl(Or(U.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(T){let S;return S=typeof T=="object"?T.value:T,hf(S)?null:S})(t.limit));let y=null;t.startAt&&(y=(function(T){const S=!!T.before,R=T.values||[];return new Xc(R,S)})(t.startAt));let m=null;return t.endAt&&(m=(function(T){const S=!T.before,R=T.values||[];return new Xc(R,S)})(t.endAt)),J2(e,r,c,l,h,"F",y,m)}function NV(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ee(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function FS(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const o=Or(t.unaryFilter.field);return Dt.create(o,"==",{doubleValue:NaN});case"IS_NULL":const r=Or(t.unaryFilter.field);return Dt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Or(t.unaryFilter.field);return Dt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Or(t.unaryFilter.field);return Dt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ee(61313);default:return Ee(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Dt.create(Or(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ee(58110);default:return Ee(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return si.create(t.compositeFilter.filters.map((o=>FS(o))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ee(1026)}})(t.compositeFilter.op))})(n):Ee(30097,{filter:n})}function DV(n){return yV[n]}function bV(n){return _V[n]}function xV(n){return vV[n]}function kr(n){return{fieldPath:n.canonicalString()}}function Or(n){return $t.fromServerFormat(n.fieldPath)}function BS(n){return n instanceof Dt?(function(t){if(t.op==="=="){if(eT(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NAN"}};if(j0(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(eT(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NOT_NAN"}};if(j0(t.value))return{unaryFilter:{field:kr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kr(t.field),op:bV(t.op),value:t.value}}})(n):n instanceof si?(function(t){const o=t.getFilters().map((r=>BS(r)));return o.length===1?o[0]:{compositeFilter:{op:xV(t.op),filters:o}}})(n):Ee(54877,{filter:n})}function VV(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function GS(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,t,o,r,l=Ce.min(),c=Ce.min(),h=Wt.EMPTY_BYTE_STRING,y=null){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=r,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=y}withSequenceNumber(e){return new Ho(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ho(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.yt=e}}function UV(n){const e=MV({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?$c(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.Cn=new kV}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Xo.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Xo.min())}updateCollectionGroup(e,t,o){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class kV{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t]||new Ut(ot.comparator),l=!r.has(o);return this.index[t]=r.add(o),l}has(e){const t=e.lastSegment(),o=e.popLast(),r=this.index[t];return r&&r.has(o)}getEntries(e){return(this.index[e]||new Ut(ot.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},HS=41943040;class gn{static withCacheSize(e){return new gn(e,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gn.DEFAULT_COLLECTION_PERCENTILE=10,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gn.DEFAULT=new gn(HS,gn.DEFAULT_COLLECTION_PERCENTILE,gn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gn.DISABLED=new gn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Zr(0)}static cr(){return new Zr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mT="LruGarbageCollector",OV=1048576;function gT([n,e],[t,o]){const r=Ue(n,t);return r===0?Ue(e,o):r}class qV{constructor(e){this.Ir=e,this.buffer=new Ut(gT),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();gT(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class FV{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){he(mT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ra(t)?he(mT,"Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Vr(3e5)}))}}class BV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((o=>Math.floor(t/100*o)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(df.ce);const o=new qV(t);return this.mr.forEachTarget(e,(r=>o.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>o.Ar(r))))).next((()=>o.maxValue))}removeTargets(e,t,o){return this.mr.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(pT)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),pT):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let o,r,l,c,h,y,m;const v=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(o=T,h=Date.now(),this.removeTargets(e,o,t)))).next((T=>(l=T,y=Date.now(),this.removeOrphanedDocuments(e,o)))).next((T=>(m=Date.now(),Ur()<=Be.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-v}ms
	Determined least recently used ${r} in `+(h-c)+`ms
	Removed ${l} targets in `+(y-h)+`ms
	Removed ${T} documents in `+(m-y)+`ms
Total Duration: ${m-v}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:l,documentsRemoved:T}))))}}function GV(n,e){return new BV(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(){this.changes=new Bs((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,tn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return o!==void 0?oe.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,t,o,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=r}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(o=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(o!==null&&Il(o.mutation,r,ni.empty(),at.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.getLocalViewOfDocuments(e,o,Le()).next((()=>o))))}getLocalViewOfDocuments(e,t,o=Le()){const r=Ls();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,o).next((l=>{let c=vl();return l.forEach(((h,y)=>{c=c.insert(h,y.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const o=Ls();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,Le())))}populateOverlays(e,t,o){const r=[];return o.forEach((l=>{t.has(l)||r.push(l)})),this.documentOverlayCache.getOverlays(e,r).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,o,r){let l=so();const c=Cl(),h=(function(){return Cl()})();return t.forEach(((y,m)=>{const v=o.get(m.key);r.has(m.key)&&(v===void 0||v.mutation instanceof Gs)?l=l.insert(m.key,m):v!==void 0?(c.set(m.key,v.mutation.getFieldMask()),Il(v.mutation,m,v.mutation.getFieldMask(),at.now())):c.set(m.key,ni.empty())})),this.recalculateAndSaveOverlays(e,l).next((y=>(y.forEach(((m,v)=>c.set(m,v))),t.forEach(((m,v)=>h.set(m,new zV(v,c.get(m)??null)))),h)))}recalculateAndSaveOverlays(e,t){const o=Cl();let r=new ft(((c,h)=>c-h)),l=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((y=>{const m=t.get(y);if(m===null)return;let v=o.get(y)||ni.empty();v=h.applyToLocalView(m,v),o.set(y,v);const T=(r.get(h.batchId)||Le()).add(y);r=r.insert(h.batchId,T)}))})).next((()=>{const c=[],h=r.getReverseIterator();for(;h.hasNext();){const y=h.getNext(),m=y.key,v=y.value,T=CS();v.forEach((S=>{if(!l.has(S)){const R=DS(t.get(S),o.get(S));R!==null&&T.set(S,R),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,m,T))}return oe.waitFor(c)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,t,o,r){return(function(c){return _e.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):vS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o,r):this.getDocumentsMatchingCollectionQuery(e,t,o,r)}getNextDocuments(e,t,o,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,r).next((l=>{const c=r-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,r-l.size):oe.resolve(Ls());let h=Ml,y=l;return c.next((m=>oe.forEach(m,((v,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),l.get(v)?oe.resolve():this.remoteDocumentCache.getEntry(e,v).next((S=>{y=y.insert(v,S)}))))).next((()=>this.populateOverlays(e,m,l))).next((()=>this.computeViews(e,y,m,Le()))).next((v=>({batchId:h,changes:AS(v)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _e(t)).next((o=>{let r=vl();return o.isFoundDocument()&&(r=r.insert(o.key,o)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,o,r){const l=t.collectionGroup;let c=vl();return this.indexManager.getCollectionParents(e,l).next((h=>oe.forEach(h,(y=>{const m=(function(T,S){return new aa(S,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,y.child(l));return this.getDocumentsMatchingCollectionQuery(e,m,o,r).next((v=>{v.forEach(((T,S)=>{c=c.insert(T,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,o,r){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,o,l,r)))).next((c=>{l.forEach(((y,m)=>{const v=m.getKey();c.get(v)===null&&(c=c.insert(v,tn.newInvalidDocument(v)))}));let h=vl();return c.forEach(((y,m)=>{const v=l.get(y);v!==void 0&&Il(v.mutation,m,ni.empty(),at.now()),gf(t,m)&&(h=h.insert(y,m))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:bi(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:UV(r.bundledQuery),readTime:bi(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.overlays=new ft(_e.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Ls();return oe.forEach(t,(r=>this.getOverlay(e,r).next((l=>{l!==null&&o.set(r,l)})))).next((()=>o))}saveOverlays(e,t,o){return o.forEach(((r,l)=>{this.St(e,t,l)})),oe.resolve()}removeOverlaysForBatchId(e,t,o){const r=this.qr.get(o);return r!==void 0&&(r.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(o)),oe.resolve()}getOverlaysForCollection(e,t,o){const r=Ls(),l=t.length+1,c=new _e(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const y=h.getNext().value,m=y.getKey();if(!t.isPrefixOf(m.path))break;m.path.length===l&&y.largestBatchId>o&&r.set(y.getKey(),y)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,o,r){let l=new ft(((m,v)=>m-v));const c=this.overlays.getIterator();for(;c.hasNext();){const m=c.getNext().value;if(m.getKey().getCollectionGroup()===t&&m.largestBatchId>o){let v=l.get(m.largestBatchId);v===null&&(v=Ls(),l=l.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Ls(),y=l.getIterator();for(;y.hasNext()&&(y.getNext().value.forEach(((m,v)=>h.set(m,v))),!(h.size()>=r)););return oe.resolve(h)}St(e,t,o){const r=this.overlays.get(o.key);if(r!==null){const c=this.qr.get(r.largestBatchId).delete(o.key);this.qr.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(o.key,new fV(t,o));let l=this.qr.get(t);l===void 0&&(l=Le(),this.qr.set(t,l)),this.qr.set(t,l.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.sessionToken=Wt.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qp{constructor(){this.Qr=new Ut(Ft.$r),this.Ur=new Ut(Ft.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const o=new Ft(e,t);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,t){e.forEach((o=>this.addReference(o,t)))}removeReference(e,t){this.Gr(new Ft(e,t))}zr(e,t){e.forEach((o=>this.removeReference(o,t)))}jr(e){const t=new _e(new ot([])),o=new Ft(t,e),r=new Ft(t,e+1),l=[];return this.Ur.forEachInRange([o,r],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new _e(new ot([])),o=new Ft(t,e),r=new Ft(t,e+1);let l=Le();return this.Ur.forEachInRange([o,r],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Ft(e,0),o=this.Qr.firstAfterOrEqual(t);return o!==null&&e.isEqual(o.key)}}class Ft{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return _e.comparator(e.key,t.key)||Ue(e.Yr,t.Yr)}static Kr(e,t){return Ue(e.Yr,t.Yr)||_e.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ut(Ft.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,o,r){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new cV(l,t,o,r);this.mutationQueue.push(c);for(const h of r)this.Zr=this.Zr.add(new Ft(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(c)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const o=t+1,r=this.ei(o),l=r<0?0:r;return oe.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?qp:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new Ft(t,0),r=new Ft(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([o,r],(c=>{const h=this.Xr(c.Yr);l.push(h)})),oe.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Ut(Ue);return t.forEach((r=>{const l=new Ft(r,0),c=new Ft(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{o=o.add(h.Yr)}))})),oe.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,r=o.length+1;let l=o;_e.isDocumentKey(l)||(l=l.child(""));const c=new Ft(new _e(l),0);let h=new Ut(Ue);return this.Zr.forEachWhile((y=>{const m=y.key.path;return!!o.isPrefixOf(m)&&(m.length===r&&(h=h.add(y.Yr)),!0)}),c),oe.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((o=>{const r=this.Xr(o);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Qe(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return oe.forEach(t.mutations,(r=>{const l=new Ft(r.key,t.batchId);return o=o.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,t){const o=new Ft(t,0),r=this.Zr.firstAfterOrEqual(o);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.ri=e,this.docs=(function(){return new ft(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,r=this.docs.get(o),l=r?r.size:0,c=this.ri(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return oe.resolve(o?o.document.mutableCopy():tn.newInvalidDocument(t))}getEntries(e,t){let o=so();return t.forEach((r=>{const l=this.docs.get(r);o=o.insert(r,l?l.document.mutableCopy():tn.newInvalidDocument(r))})),oe.resolve(o)}getDocumentsMatchingQuery(e,t,o,r){let l=so();const c=t.path,h=new _e(c.child("__id-9223372036854775808__")),y=this.docs.getIteratorFrom(h);for(;y.hasNext();){const{key:m,value:{document:v}}=y.getNext();if(!c.isPrefixOf(m.path))break;m.path.length>c.length+1||C2(A2(v),o)<=0||(r.has(v.key)||gf(t,v))&&(l=l.insert(v.key,v.mutableCopy()))}return oe.resolve(l)}getAllFromCollectionGroup(e,t,o,r){Ee(9500)}ii(e,t){return oe.forEach(this.docs,(o=>t(o)))}newChangeBuffer(e){return new WV(this)}getSize(e){return oe.resolve(this.size)}}class WV extends HV{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((o,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(o)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.persistence=e,this.si=new Bs((t=>Gp(t)),Hp),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.oi=0,this._i=new Qp,this.targetCount=0,this.ai=Zr.ur()}forEachTarget(e,t){return this.si.forEach(((o,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Zr(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,o){let r=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&o.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),r++)})),oe.waitFor(l).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const o=this.si.get(t)||null;return oe.resolve(o)}addMatchingKeys(e,t,o){return this._i.Wr(t,o),oe.resolve()}removeMatchingKeys(e,t,o){this._i.zr(t,o);const r=this.persistence.referenceDelegate,l=[];return r&&t.forEach((c=>{l.push(r.markPotentiallyOrphaned(e,c))})),oe.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const o=this._i.Hr(t);return oe.resolve(o)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e,t){this.ui={},this.overlays={},this.ci=new df(0),this.li=!1,this.li=!0,this.hi=new QV,this.referenceDelegate=e(this),this.Pi=new ZV(this),this.indexManager=new LV,this.remoteDocumentCache=(function(r){return new $V(r)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new PV(t),this.Ii=new JV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.ui[e.toKey()];return o||(o=new XV(t,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,o){he("MemoryPersistence","Starting transaction:",e);const r=new jV(this.ci.next());return this.referenceDelegate.Ei(),o(r).next((l=>this.referenceDelegate.di(r).next((()=>l)))).toPromise().then((l=>(r.raiseOnCommittedEvent(),l)))}Ai(e,t){return oe.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,t))))}}class jV extends R2{constructor(e){super(),this.currentSequenceNumber=e}}class Xp{constructor(e){this.persistence=e,this.Ri=new Qp,this.Vi=null}static mi(e){return new Xp(e)}get fi(){if(this.Vi)return this.Vi;throw Ee(60996)}addReference(e,t,o){return this.Ri.addReference(o,t),this.fi.delete(o.toString()),oe.resolve()}removeReference(e,t,o){return this.Ri.removeReference(o,t),this.fi.add(o.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((l=>this.fi.add(l.toString())))})).next((()=>o.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(o=>{const r=_e.fromPath(o);return this.gi(e,r).next((l=>{l||t.removeEntry(r,Ce.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((o=>{o?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class jc{constructor(e,t){this.persistence=e,this.pi=new Bs((o=>N2(o.path)),((o,r)=>o.isEqual(r))),this.garbageCollector=GV(this,t)}static mi(e,t){return new jc(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>t.next((r=>o+r))))}wr(e){let t=0;return this.pr(e,(o=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((o,r)=>this.br(e,o,r).next((l=>l?oe.resolve():t(r)))))}removeTargets(e,t,o){return this.persistence.getTargetCache().removeTargets(e,t,o)}removeOrphanedDocuments(e,t){let o=0;const r=this.persistence.getRemoteDocumentCache(),l=r.newChangeBuffer();return r.ii(e,(c=>this.br(e,c,t).next((h=>{h||(o++,l.removeEntry(c,Ce.min()))})))).next((()=>l.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,t,o){return this.pi.set(o,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,o){return this.pi.set(o,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Dc(e.data.value)),t}br(e,t,o){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return oe.resolve(r!==void 0&&r>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t,o,r){this.targetId=e,this.fromCache=t,this.Es=o,this.ds=r}static As(e,t){let o=Le(),r=Le();for(const l of t.docChanges)switch(l.type){case 0:o=o.add(l.doc.key);break;case 1:r=r.add(l.doc.key)}return new $p(e,t.fromCache,o,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return Yb()?8:w2(Hb())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,o,r){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,r,o).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new eP;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,o,r){return o.documentReadCount<this.fs?(Ur()<=Be.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Lr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(Ur()<=Be.DEBUG&&he("QueryEngine","Query:",Lr(t),"scans",o.documentReadCount,"local documents and returns",r,"documents as results."),o.documentReadCount>this.gs*r?(Ur()<=Be.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Lr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Di(t))):oe.resolve())}ys(e,t){if(oT(t))return oe.resolve(null);let o=Di(t);return this.indexManager.getIndexType(e,o).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=$c(t,null,"F"),o=Di(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next((l=>{const c=Le(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,o).next((y=>{const m=this.Ds(t,h);return this.Cs(t,m,c,y.readTime)?this.ys(e,$c(t,null,"F")):this.vs(e,m,t,y)}))))})))))}ws(e,t,o,r){return oT(t)||r.isEqual(Ce.min())?oe.resolve(null):this.ps.getDocuments(e,o).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,o,r)?oe.resolve(null):(Ur()<=Be.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Lr(t)),this.vs(e,c,t,S2(r,Ml)).next((h=>h)))}))}Ds(e,t){let o=new Ut(ES(e));return t.forEach(((r,l)=>{gf(e,l)&&(o=o.add(l))})),o}Cs(e,t,o,r){if(e.limit===null)return!1;if(o.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(r)>0)}Ss(e,t,o){return Ur()<=Be.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Lr(t)),this.ps.getDocumentsMatchingQuery(e,t,Xo.min(),o)}vs(e,t,o,r){return this.ps.getDocumentsMatchingQuery(e,o,r).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp="LocalStore",nP=3e8;class iP{constructor(e,t,o,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new ft(Ue),this.xs=new Bs((l=>Gp(l)),Hp),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new YV(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function oP(n,e,t,o){return new iP(n,e,t,o)}async function YS(n,e){const t=Re(n);return await t.persistence.runTransaction("Handle user change","readonly",(o=>{let r;return t.mutationQueue.getAllMutationBatches(o).next((l=>(r=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(o)))).next((l=>{const c=[],h=[];let y=Le();for(const m of r){c.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}for(const m of l){h.push(m.batchId);for(const v of m.mutations)y=y.add(v.key)}return t.localDocuments.getDocuments(o,y).next((m=>({Ls:m,removedBatchIds:c,addedBatchIds:h})))}))}))}function sP(n,e){const t=Re(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const r=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,y,m,v){const T=m.batch,S=T.keys();let R=oe.resolve();return S.forEach((U=>{R=R.next((()=>v.getEntry(y,U))).next((q=>{const L=m.docVersions.get(U);Qe(L!==null,48541),q.version.compareTo(L)<0&&(T.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),v.addEntry(q)))}))})),R.next((()=>h.mutationQueue.removeMutationBatch(y,T)))})(t,o,e,l).next((()=>l.apply(o))).next((()=>t.mutationQueue.performConsistencyCheck(o))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(o,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(h){let y=Le();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(y=y.add(h.batch.mutations[m].key));return y})(e)))).next((()=>t.localDocuments.getDocuments(o,r)))}))}function JS(n){const e=Re(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function rP(n,e){const t=Re(n),o=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const h=[];e.targetChanges.forEach(((v,T)=>{const S=r.get(T);if(!S)return;h.push(t.Pi.removeMatchingKeys(l,v.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,v.addedDocuments,T))));let R=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?R=R.withResumeToken(Wt.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):v.resumeToken.approximateByteSize()>0&&(R=R.withResumeToken(v.resumeToken,o)),r=r.insert(T,R),(function(q,L,X){return q.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=nP?!0:X.addedDocuments.size+X.modifiedDocuments.size+X.removedDocuments.size>0})(S,R,v)&&h.push(t.Pi.updateTargetData(l,R))}));let y=so(),m=Le();if(e.documentUpdates.forEach((v=>{e.resolvedLimboDocuments.has(v)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,v))})),h.push(aP(l,c,e.documentUpdates).next((v=>{y=v.ks,m=v.qs}))),!o.isEqual(Ce.min())){const v=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,o)));h.push(v)}return oe.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,y,m))).next((()=>y))})).then((l=>(t.Ms=r,l)))}function aP(n,e,t){let o=Le(),r=Le();return t.forEach((l=>o=o.add(l))),e.getEntries(n,o).next((l=>{let c=so();return t.forEach(((h,y)=>{const m=l.get(h);y.isFoundDocument()!==m.isFoundDocument()&&(r=r.add(h)),y.isNoDocument()&&y.version.isEqual(Ce.min())?(e.removeEntry(h,y.readTime),c=c.insert(h,y)):!m.isValidDocument()||y.version.compareTo(m.version)>0||y.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(y),c=c.insert(h,y)):he(Wp,"Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",y.version)})),{ks:c,qs:r}}))}function lP(n,e){const t=Re(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=qp),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function uP(n,e){const t=Re(n);return t.persistence.runTransaction("Allocate target","readwrite",(o=>{let r;return t.Pi.getTargetData(o,e).next((l=>l?(r=l,oe.resolve(r)):t.Pi.allocateTargetId(o).next((c=>(r=new Ho(e,c,"TargetPurposeListen",o.currentSequenceNumber),t.Pi.addTargetData(o,r).next((()=>r)))))))})).then((o=>{const r=t.Ms.get(o.targetId);return(r===null||o.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(o.targetId,o),t.xs.set(e,o.targetId)),o}))}async function _p(n,e,t){const o=Re(n),r=o.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await o.persistence.runTransaction("Release target",l,(c=>o.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!ra(c))throw c;he(Wp,`Failed to update sequence numbers for target ${e}: ${c}`)}o.Ms=o.Ms.remove(e),o.xs.delete(r.target)}function yT(n,e,t){const o=Re(n);let r=Ce.min(),l=Le();return o.persistence.runTransaction("Execute query","readwrite",(c=>(function(y,m,v){const T=Re(y),S=T.xs.get(v);return S!==void 0?oe.resolve(T.Ms.get(S)):T.Pi.getTargetData(m,v)})(o,c,Di(e)).next((h=>{if(h)return r=h.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(c,h.targetId).next((y=>{l=y}))})).next((()=>o.Fs.getDocumentsMatchingQuery(c,e,t?r:Ce.min(),t?l:Le()))).next((h=>(cP(o,Q2(e),h),{documents:h,Qs:l})))))}function cP(n,e,t){let o=n.Os.get(e)||Ce.min();t.forEach(((r,l)=>{l.readTime.compareTo(o)>0&&(o=l.readTime)})),n.Os.set(e,o)}class _T{constructor(){this.activeTargetIds=eV()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fP{constructor(){this.Mo=new _T,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,o){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new _T,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dP{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="ConnectivityMonitor";class TT{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){he(vT,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){he(vT,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ic=null;function vp(){return Ic===null?Ic=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ic++,"0x"+Ic.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oh="RestConnection",hP={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class pP{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${o}/databases/${r}`,this.Wo=this.databaseId.database===Kc?`project_id=${o}`:`project_id=${o}&database_id=${r}`}Go(e,t,o,r,l){const c=vp(),h=this.zo(e,t.toUriEncodedString());he(Oh,`Sending RPC '${e}' ${c}:`,h,o);const y={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(y,r,l);const{host:m}=new URL(h),v=Up(m);return this.Jo(e,h,y,o,v).then((T=>(he(Oh,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Qr(Oh,`RPC '${e}' ${c} failed with error: `,T,"url: ",h,"request:",o),T}))}Ho(e,t,o,r,l,c){return this.Go(e,t,o,r,l)}jo(e,t,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+oa})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,l)=>e[l]=r)),o&&o.headers.forEach(((r,l)=>e[l]=r))}zo(e,t){const o=hP[e];return`${this.Uo}/v1/${t}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt="WebChannelConnection";class gP extends pP{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,o,r,l){const c=vp();return new Promise(((h,y)=>{const m=new KE;m.setWithCredentials(!0),m.listenOnce(QE.COMPLETE,(()=>{try{switch(m.getLastErrorCode()){case Nc.NO_ERROR:const T=m.getResponseJson();he(jt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),h(T);break;case Nc.TIMEOUT:he(jt,`RPC '${e}' ${c} timed out`),y(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Nc.HTTP_ERROR:const S=m.getStatus();if(he(jt,`RPC '${e}' ${c} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const U=R==null?void 0:R.error;if(U&&U.status&&U.message){const q=(function(X){const ie=X.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(ie)>=0?ie:ne.UNKNOWN})(U.status);y(new de(q,U.message))}else y(new de(ne.UNKNOWN,"Server responded with status "+m.getStatus()))}else y(new de(ne.UNAVAILABLE,"Connection failed."));break;default:Ee(9055,{l_:e,streamId:c,h_:m.getLastErrorCode(),P_:m.getLastError()})}}finally{he(jt,`RPC '${e}' ${c} completed.`)}}));const v=JSON.stringify(r);he(jt,`RPC '${e}' ${c} sending request:`,r),m.send(t,"POST",v,o,15)}))}T_(e,t,o){const r=vp(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=WE(),h=$E(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(y.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(y.useFetchStreams=!0),this.jo(y.initMessageHeaders,t,o),y.encodeInitMessageHeaders=!0;const v=l.join("");he(jt,`Creating RPC '${e}' stream ${r}: ${v}`,y);const T=c.createWebChannel(v,y);this.I_(T);let S=!1,R=!1;const U=new mP({Yo:L=>{R?he(jt,`Not sending because RPC '${e}' stream ${r} is closed:`,L):(S||(he(jt,`Opening RPC '${e}' stream ${r} transport.`),T.open(),S=!0),he(jt,`RPC '${e}' stream ${r} sending:`,L),T.send(L))},Zo:()=>T.close()}),q=(L,X,ie)=>{L.listen(X,(W=>{try{ie(W)}catch(se){setTimeout((()=>{throw se}),0)}}))};return q(T,_l.EventType.OPEN,(()=>{R||(he(jt,`RPC '${e}' stream ${r} transport opened.`),U.o_())})),q(T,_l.EventType.CLOSE,(()=>{R||(R=!0,he(jt,`RPC '${e}' stream ${r} transport closed`),U.a_(),this.E_(T))})),q(T,_l.EventType.ERROR,(L=>{R||(R=!0,Qr(jt,`RPC '${e}' stream ${r} transport errored. Name:`,L.name,"Message:",L.message),U.a_(new de(ne.UNAVAILABLE,"The operation could not be completed")))})),q(T,_l.EventType.MESSAGE,(L=>{var X;if(!R){const ie=L.data[0];Qe(!!ie,16349);const W=ie,se=(W==null?void 0:W.error)||((X=W[0])==null?void 0:X.error);if(se){he(jt,`RPC '${e}' stream ${r} received error:`,se);const fe=se.status;let le=(function(M){const P=Nt[M];if(P!==void 0)return VS(P)})(fe),D=se.message;le===void 0&&(le=ne.INTERNAL,D="Unknown error status: "+fe+" with message "+se.message),R=!0,U.a_(new de(le,D)),T.close()}else he(jt,`RPC '${e}' stream ${r} received:`,ie),U.u_(ie)}})),q(h,XE.STAT_EVENT,(L=>{L.stat===ap.PROXY?he(jt,`RPC '${e}' stream ${r} detected buffering proxy`):L.stat===ap.NOPROXY&&he(jt,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function qh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tf(n){return new TV(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,t,o=1e3,r=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=o,this.A_=r,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-o);r>0&&he("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="PersistentStream";class QS{constructor(e,t,o,r,l,c,h,y){this.Mi=e,this.S_=o,this.b_=r,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=y,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new KS(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ne.RESOURCE_EXHAUSTED?(oo(t.toString()),oo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,r])=>{this.D_===t&&this.G_(o,r)}),(o=>{e((()=>{const r=new de(ne.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(r)}))}))}G_(e,t){const o=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{o((()=>this.z_(r)))})),this.stream.onMessage((r=>{o((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(ET,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(he(ET,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yP extends QS{constructor(e,t,o,r,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=AV(this.serializer,e),o=(function(l){if(!("targetChange"in l))return Ce.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Ce.min():c.readTime?bi(c.readTime):Ce.min()})(e);return this.listener.H_(t,o)}Y_(e){const t={};t.database=yp(this.serializer),t.addTarget=(function(l,c){let h;const y=c.target;if(h=dp(y)?{documents:RV(l,y)}:{query:wV(l,y).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=LS(l,c.resumeToken);const m=pp(l,c.expectedCount);m!==null&&(h.expectedCount=m)}else if(c.snapshotVersion.compareTo(Ce.min())>0){h.readTime=Zc(l,c.snapshotVersion.toTimestamp());const m=pp(l,c.expectedCount);m!==null&&(h.expectedCount=m)}return h})(this.serializer,e);const o=NV(this.serializer,e);o&&(t.labels=o),this.q_(t)}Z_(e){const t={};t.database=yp(this.serializer),t.removeTarget=e,this.q_(t)}}class _P extends QS{constructor(e,t,o,r,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,r,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=IV(e.writeResults,e.commitTime),o=bi(e.commitTime);return this.listener.na(o,t)}ra(){const e={};e.database=yp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((o=>CV(this.serializer,o)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vP{}class TP extends vP{constructor(e,t,o,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,o,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,mp(t,o),r,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new de(ne.UNKNOWN,l.toString())}))}Ho(e,t,o,r,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,mp(t,o),r,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new de(ne.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class EP{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(oo(t),this.aa=!1):he("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Os="RemoteStore";class SP{constructor(e,t,o,r,l){this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{o.enqueueAndForget((async()=>{Hs(this)&&(he(Os,"Restarting streams for network reachability change."),await(async function(y){const m=Re(y);m.Ea.add(4),await ql(m),m.Ra.set("Unknown"),m.Ea.delete(4),await Ef(m)})(this))}))})),this.Ra=new EP(o,r)}}async function Ef(n){if(Hs(n))for(const e of n.da)await e(!0)}async function ql(n){for(const e of n.da)await e(!1)}function XS(n,e){const t=Re(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),tm(t)?em(t):la(t).O_()&&jp(t,e))}function Zp(n,e){const t=Re(n),o=la(t);t.Ia.delete(e),o.O_()&&$S(t,e),t.Ia.size===0&&(o.O_()?o.L_():Hs(t)&&t.Ra.set("Unknown"))}function jp(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}la(n).Y_(e)}function $S(n,e){n.Va.Ue(e),la(n).Z_(e)}function em(n){n.Va=new gV({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),la(n).start(),n.Ra.ua()}function tm(n){return Hs(n)&&!la(n).x_()&&n.Ia.size>0}function Hs(n){return Re(n).Ea.size===0}function WS(n){n.Va=void 0}async function AP(n){n.Ra.set("Online")}async function CP(n){n.Ia.forEach(((e,t)=>{jp(n,e)}))}async function IP(n,e){WS(n),tm(n)?(n.Ra.ha(e),em(n)):n.Ra.set("Unknown")}async function RP(n,e,t){if(n.Ra.set("Online"),e instanceof US&&e.state===2&&e.cause)try{await(async function(r,l){const c=l.cause;for(const h of l.targetIds)r.Ia.has(h)&&(await r.remoteSyncer.rejectListen(h,c),r.Ia.delete(h),r.Va.removeTarget(h))})(n,e)}catch(o){he(Os,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await ef(n,o)}else if(e instanceof Vc?n.Va.Ze(e):e instanceof PS?n.Va.st(e):n.Va.tt(e),!t.isEqual(Ce.min()))try{const o=await JS(n.localStore);t.compareTo(o)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((y,m)=>{if(y.resumeToken.approximateByteSize()>0){const v=l.Ia.get(m);v&&l.Ia.set(m,v.withResumeToken(y.resumeToken,c))}})),h.targetMismatches.forEach(((y,m)=>{const v=l.Ia.get(y);if(!v)return;l.Ia.set(y,v.withResumeToken(Wt.EMPTY_BYTE_STRING,v.snapshotVersion)),$S(l,y);const T=new Ho(v.target,y,m,v.sequenceNumber);jp(l,T)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(o){he(Os,"Failed to raise snapshot:",o),await ef(n,o)}}async function ef(n,e,t){if(!ra(e))throw e;n.Ea.add(1),await ql(n),n.Ra.set("Offline"),t||(t=()=>JS(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{he(Os,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Ef(n)}))}function ZS(n,e){return e().catch((t=>ef(n,t,e)))}async function Sf(n){const e=Re(n),t=jo(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:qp;for(;wP(e);)try{const r=await lP(e.localStore,o);if(r===null){e.Ta.length===0&&t.L_();break}o=r.batchId,MP(e,r)}catch(r){await ef(e,r)}jS(e)&&eA(e)}function wP(n){return Hs(n)&&n.Ta.length<10}function MP(n,e){n.Ta.push(e);const t=jo(n);t.O_()&&t.X_&&t.ea(e.mutations)}function jS(n){return Hs(n)&&!jo(n).x_()&&n.Ta.length>0}function eA(n){jo(n).start()}async function NP(n){jo(n).ra()}async function DP(n){const e=jo(n);for(const t of n.Ta)e.ea(t.mutations)}async function bP(n,e,t){const o=n.Ta.shift(),r=Yp.from(o,e,t);await ZS(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await Sf(n)}async function xP(n,e){e&&jo(n).X_&&await(async function(o,r){if((function(c){return hV(c)&&c!==ne.ABORTED})(r.code)){const l=o.Ta.shift();jo(o).B_(),await ZS(o,(()=>o.remoteSyncer.rejectFailedWrite(l.batchId,r))),await Sf(o)}})(n,e),jS(n)&&eA(n)}async function ST(n,e){const t=Re(n);t.asyncQueue.verifyOperationInProgress(),he(Os,"RemoteStore received new credentials");const o=Hs(t);t.Ea.add(3),await ql(t),o&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Ef(t)}async function VP(n,e){const t=Re(n);e?(t.Ea.delete(2),await Ef(t)):e||(t.Ea.add(2),await ql(t),t.Ra.set("Unknown"))}function la(n){return n.ma||(n.ma=(function(t,o,r){const l=Re(t);return l.sa(),new yP(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:AP.bind(null,n),t_:CP.bind(null,n),r_:IP.bind(null,n),H_:RP.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),tm(n)?em(n):n.Ra.set("Unknown")):(await n.ma.stop(),WS(n))}))),n.ma}function jo(n){return n.fa||(n.fa=(function(t,o,r){const l=Re(t);return l.sa(),new _P(o,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:NP.bind(null,n),r_:xP.bind(null,n),ta:DP.bind(null,n),na:bP.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Sf(n)):(await n.fa.stop(),n.Ta.length>0&&(he(Os,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm{constructor(e,t,o,r,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=r,this.removalCallback=l,this.deferred=new Ko,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,o,r,l){const c=Date.now()+o,h=new nm(e,t,c,r,l);return h.start(o),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function im(n,e){if(oo("AsyncQueue",`${e}: ${n}`),ra(n))return new de(ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{static emptySet(e){return new zr(e.comparator)}constructor(e){this.comparator=e?(t,o)=>e(t,o)||_e.comparator(t.key,o.key):(t,o)=>_e.comparator(t.key,o.key),this.keyedMap=vl(),this.sortedSet=new ft(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,o)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,l=o.getNext().key;if(!r.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const o=new zr;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(){this.ga=new ft(_e.comparator)}track(e){const t=e.doc.key,o=this.ga.get(t);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(t,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(t,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(t):e.type===1&&o.type===2?this.ga=this.ga.insert(t,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ee(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,o)=>{e.push(o)})),e}}class jr{constructor(e,t,o,r,l,c,h,y,m){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=r,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=y,this.hasCachedResults=m}static fromInitialDocuments(e,t,o,r,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new jr(e,t,zr.emptySet(t),c,o,r,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&mf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==o[r].type||!t[r].doc.isEqual(o[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PP{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class UP{constructor(){this.queries=CT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,o){const r=Re(t),l=r.queries;r.queries=CT(),l.forEach(((c,h)=>{for(const y of h.Sa)y.onError(o)}))})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function CT(){return new Bs((n=>TS(n)),mf)}async function LP(n,e){const t=Re(n);let o=3;const r=e.query;let l=t.queries.get(r);l?!l.ba()&&e.Da()&&(o=2):(l=new PP,o=e.Da()?0:1);try{switch(o){case 0:l.wa=await t.onListen(r,!0);break;case 1:l.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(c){const h=im(c,`Initialization of query '${Lr(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&om(t)}async function kP(n,e){const t=Re(n),o=e.query;let r=3;const l=t.queries.get(o);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?r=e.Da()?0:1:!l.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(o),t.onUnlisten(o,!0);case 1:return t.queries.delete(o),t.onUnlisten(o,!1);case 2:return t.onLastRemoteStoreUnlisten(o);default:return}}function OP(n,e){const t=Re(n);let o=!1;for(const r of e){const l=r.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(r)&&(o=!0);c.wa=r}}o&&om(t)}function qP(n,e,t){const o=Re(n),r=o.queries.get(e);if(r)for(const l of r.Sa)l.onError(t);o.queries.delete(e)}function om(n){n.Ca.forEach((e=>{e.next()}))}var Tp,IT;(IT=Tp||(Tp={})).Ma="default",IT.Cache="cache";class FP{constructor(e,t,o){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const r of e.docChanges)r.type!==3&&o.push(r);e=new jr(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const o=t!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=jr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e){this.key=e}}class nA{constructor(e){this.key=e}}class BP{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Le(),this.mutatedKeys=Le(),this.eu=ES(e),this.tu=new zr(this.eu)}get nu(){return this.Ya}ru(e,t){const o=t?t.iu:new AT,r=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=r,h=!1;const y=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,m=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((v,T)=>{const S=r.get(v),R=gf(this.query,T)?T:null,U=!!S&&this.mutatedKeys.has(S.key),q=!!R&&(R.hasLocalMutations||this.mutatedKeys.has(R.key)&&R.hasCommittedMutations);let L=!1;S&&R?S.data.isEqual(R.data)?U!==q&&(o.track({type:3,doc:R}),L=!0):this.su(S,R)||(o.track({type:2,doc:R}),L=!0,(y&&this.eu(R,y)>0||m&&this.eu(R,m)<0)&&(h=!0)):!S&&R?(o.track({type:0,doc:R}),L=!0):S&&!R&&(o.track({type:1,doc:S}),L=!0,(y||m)&&(h=!0)),L&&(R?(c=c.add(R),l=q?l.add(v):l.delete(v)):(c=c.delete(v),l=l.delete(v)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const v=this.query.limitType==="F"?c.last():c.first();c=c.delete(v.key),l=l.delete(v.key),o.track({type:1,doc:v})}return{tu:c,iu:o,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o,r){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((v,T)=>(function(R,U){const q=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ee(20277,{Rt:L})}};return q(R)-q(U)})(v.type,T.type)||this.eu(v.doc,T.doc))),this.ou(o),r=r??!1;const h=t&&!r?this._u():[],y=this.Xa.size===0&&this.current&&!r?1:0,m=y!==this.Za;return this.Za=y,c.length!==0||m?{snapshot:new jr(this.query,e.tu,l,c,e.mutatedKeys,y===0,m,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new AT,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Le(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const t=[];return e.forEach((o=>{this.Xa.has(o)||t.push(new nA(o))})),this.Xa.forEach((o=>{e.has(o)||t.push(new tA(o))})),t}cu(e){this.Ya=e.Qs,this.Xa=Le();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return jr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sm="SyncEngine";class GP{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class HP{constructor(e){this.key=e,this.hu=!1}}class zP{constructor(e,t,o,r,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=r,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Bs((h=>TS(h)),mf),this.Iu=new Map,this.Eu=new Set,this.du=new ft(_e.comparator),this.Au=new Map,this.Ru=new Qp,this.Vu={},this.mu=new Map,this.fu=Zr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YP(n,e,t=!0){const o=lA(n);let r;const l=o.Tu.get(e);return l?(o.sharedClientState.addLocalQueryTarget(l.targetId),r=l.view.lu()):r=await iA(o,e,t,!0),r}async function JP(n,e){const t=lA(n);await iA(t,e,!0,!1)}async function iA(n,e,t,o){const r=await uP(n.localStore,Di(e)),l=r.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return o&&(h=await KP(n,e,l,c==="current",r.resumeToken)),n.isPrimaryClient&&t&&XS(n.remoteStore,r),h}async function KP(n,e,t,o,r){n.pu=(T,S,R)=>(async function(q,L,X,ie){let W=L.view.ru(X);W.Cs&&(W=await yT(q.localStore,L.query,!1).then((({documents:D})=>L.view.ru(D,W))));const se=ie&&ie.targetChanges.get(L.targetId),fe=ie&&ie.targetMismatches.get(L.targetId)!=null,le=L.view.applyChanges(W,q.isPrimaryClient,se,fe);return wT(q,L.targetId,le.au),le.snapshot})(n,T,S,R);const l=await yT(n.localStore,e,!0),c=new BP(e,l.Qs),h=c.ru(l.documents),y=Ol.createSynthesizedTargetChangeForCurrentChange(t,o&&n.onlineState!=="Offline",r),m=c.applyChanges(h,n.isPrimaryClient,y);wT(n,t,m.au);const v=new GP(e,t,c);return n.Tu.set(e,v),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),m.snapshot}async function QP(n,e,t){const o=Re(n),r=o.Tu.get(e),l=o.Iu.get(r.targetId);if(l.length>1)return o.Iu.set(r.targetId,l.filter((c=>!mf(c,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(r.targetId),o.sharedClientState.isActiveQueryTarget(r.targetId)||await _p(o.localStore,r.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(r.targetId),t&&Zp(o.remoteStore,r.targetId),Ep(o,r.targetId)})).catch(sa)):(Ep(o,r.targetId),await _p(o.localStore,r.targetId,!0))}async function XP(n,e){const t=Re(n),o=t.Tu.get(e),r=t.Iu.get(o.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(o.targetId),Zp(t.remoteStore,o.targetId))}async function $P(n,e,t){const o=iU(n);try{const r=await(function(c,h){const y=Re(c),m=at.now(),v=h.reduce(((R,U)=>R.add(U.key)),Le());let T,S;return y.persistence.runTransaction("Locally write mutations","readwrite",(R=>{let U=so(),q=Le();return y.Ns.getEntries(R,v).next((L=>{U=L,U.forEach(((X,ie)=>{ie.isValidDocument()||(q=q.add(X))}))})).next((()=>y.localDocuments.getOverlayedDocuments(R,U))).next((L=>{T=L;const X=[];for(const ie of h){const W=lV(ie,T.get(ie.key).overlayedDocument);W!=null&&X.push(new Gs(ie.key,W,fS(W.value.mapValue),to.exists(!0)))}return y.mutationQueue.addMutationBatch(R,m,X,h)})).next((L=>{S=L;const X=L.applyToLocalDocumentSet(T,q);return y.documentOverlayCache.saveOverlays(R,L.batchId,X)}))})).then((()=>({batchId:S.batchId,changes:AS(T)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(r.batchId),(function(c,h,y){let m=c.Vu[c.currentUser.toKey()];m||(m=new ft(Ue)),m=m.insert(h,y),c.Vu[c.currentUser.toKey()]=m})(o,r.batchId,t),await Fl(o,r.changes),await Sf(o.remoteStore)}catch(r){const l=im(r,"Failed to persist write");t.reject(l)}}async function oA(n,e){const t=Re(n);try{const o=await rP(t.localStore,e);e.targetChanges.forEach(((r,l)=>{const c=t.Au.get(l);c&&(Qe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?c.hu=!0:r.modifiedDocuments.size>0?Qe(c.hu,14607):r.removedDocuments.size>0&&(Qe(c.hu,42227),c.hu=!1))})),await Fl(t,o,e)}catch(o){await sa(o)}}function RT(n,e,t){const o=Re(n);if(o.isPrimaryClient&&t===0||!o.isPrimaryClient&&t===1){const r=[];o.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&r.push(h.snapshot)})),(function(c,h){const y=Re(c);y.onlineState=h;let m=!1;y.queries.forEach(((v,T)=>{for(const S of T.Sa)S.va(h)&&(m=!0)})),m&&om(y)})(o.eventManager,e),r.length&&o.Pu.H_(r),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function WP(n,e,t){const o=Re(n);o.sharedClientState.updateQueryState(e,"rejected",t);const r=o.Au.get(e),l=r&&r.key;if(l){let c=new ft(_e.comparator);c=c.insert(l,tn.newNoDocument(l,Ce.min()));const h=Le().add(l),y=new vf(Ce.min(),new Map,new ft(Ue),c,h);await oA(o,y),o.du=o.du.remove(l),o.Au.delete(e),rm(o)}else await _p(o.localStore,e,!1).then((()=>Ep(o,e,t))).catch(sa)}async function ZP(n,e){const t=Re(n),o=e.batch.batchId;try{const r=await sP(t.localStore,e);rA(t,o,null),sA(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),await Fl(t,r)}catch(r){await sa(r)}}async function jP(n,e,t){const o=Re(n);try{const r=await(function(c,h){const y=Re(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",(m=>{let v;return y.mutationQueue.lookupMutationBatch(m,h).next((T=>(Qe(T!==null,37113),v=T.keys(),y.mutationQueue.removeMutationBatch(m,T)))).next((()=>y.mutationQueue.performConsistencyCheck(m))).next((()=>y.documentOverlayCache.removeOverlaysForBatchId(m,v,h))).next((()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v))).next((()=>y.localDocuments.getDocuments(m,v)))}))})(o.localStore,e);rA(o,e,t),sA(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),await Fl(o,r)}catch(r){await sa(r)}}function sA(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function rA(n,e,t){const o=Re(n);let r=o.Vu[o.currentUser.toKey()];if(r){const l=r.get(e);l&&(t?l.reject(t):l.resolve(),r=r.remove(e)),o.Vu[o.currentUser.toKey()]=r}}function Ep(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),t&&n.Pu.yu(o,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((o=>{n.Ru.containsKey(o)||aA(n,o)}))}function aA(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Zp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),rm(n))}function wT(n,e,t){for(const o of t)o instanceof tA?(n.Ru.addReference(o.key,e),eU(n,o)):o instanceof nA?(he(sm,"Document no longer in limbo: "+o.key),n.Ru.removeReference(o.key,e),n.Ru.containsKey(o.key)||aA(n,o.key)):Ee(19791,{wu:o})}function eU(n,e){const t=e.key,o=t.path.canonicalString();n.du.get(t)||n.Eu.has(o)||(he(sm,"New document in limbo: "+t),n.Eu.add(o),rm(n))}function rm(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new _e(ot.fromString(e)),o=n.fu.next();n.Au.set(o,new HP(t)),n.du=n.du.insert(t,o),XS(n.remoteStore,new Ho(Di(_S(t.path)),o,"TargetPurposeLimboResolution",df.ce))}}async function Fl(n,e,t){const o=Re(n),r=[],l=[],c=[];o.Tu.isEmpty()||(o.Tu.forEach(((h,y)=>{c.push(o.pu(y,e,t).then((m=>{var v;if((m||t)&&o.isPrimaryClient){const T=m?!m.fromCache:(v=t==null?void 0:t.targetChanges.get(y.targetId))==null?void 0:v.current;o.sharedClientState.updateQueryState(y.targetId,T?"current":"not-current")}if(m){r.push(m);const T=$p.As(y.targetId,m);l.push(T)}})))})),await Promise.all(c),o.Pu.H_(r),await(async function(y,m){const v=Re(y);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(m,(S=>oe.forEach(S.Es,(R=>v.persistence.referenceDelegate.addReference(T,S.targetId,R))).next((()=>oe.forEach(S.ds,(R=>v.persistence.referenceDelegate.removeReference(T,S.targetId,R)))))))))}catch(T){if(!ra(T))throw T;he(Wp,"Failed to update sequence numbers: "+T)}for(const T of m){const S=T.targetId;if(!T.fromCache){const R=v.Ms.get(S),U=R.snapshotVersion,q=R.withLastLimboFreeSnapshotVersion(U);v.Ms=v.Ms.insert(S,q)}}})(o.localStore,l))}async function tU(n,e){const t=Re(n);if(!t.currentUser.isEqual(e)){he(sm,"User change. New user:",e.toKey());const o=await YS(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((y=>{y.reject(new de(ne.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await Fl(t,o.Ls)}}function nU(n,e){const t=Re(n),o=t.Au.get(e);if(o&&o.hu)return Le().add(o.key);{let r=Le();const l=t.Iu.get(e);if(!l)return r;for(const c of l){const h=t.Tu.get(c);r=r.unionWith(h.view.nu)}return r}}function lA(n){const e=Re(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=oA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=WP.bind(null,e),e.Pu.H_=OP.bind(null,e.eventManager),e.Pu.yu=qP.bind(null,e.eventManager),e}function iU(n){const e=Re(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ZP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=jP.bind(null,e),e}class tf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Tf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return oP(this.persistence,new tP,e.initialUser,this.serializer)}Cu(e){return new zS(Xp.mi,this.serializer)}Du(e){return new fP}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}tf.provider={build:()=>new tf};class oU extends tf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Qe(this.persistence.referenceDelegate instanceof jc,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new FV(o,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?gn.withCacheSize(this.cacheSizeBytes):gn.DEFAULT;return new zS((o=>jc.mi(o,t)),this.serializer)}}class Sp{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>RT(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=tU.bind(null,this.syncEngine),await VP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new UP})()}createDatastore(e){const t=Tf(e.databaseInfo.databaseId),o=(function(l){return new gP(l)})(e.databaseInfo);return(function(l,c,h,y){return new TP(l,c,h,y)})(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return(function(o,r,l,c,h){return new SP(o,r,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>RT(this.syncEngine,t,0)),(function(){return TT.v()?new TT:new dP})())}createSyncEngine(e,t){return(function(r,l,c,h,y,m,v){const T=new zP(r,l,c,h,y,m);return v&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const l=Re(r);he(Os,"RemoteStore shutting down."),l.Ea.add(5),await ql(l),l.Aa.shutdown(),l.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Sp.provider={build:()=>new Sp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):oo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="FirestoreClient";class rU{constructor(e,t,o,r,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=r,this.user=en.UNAUTHENTICATED,this.clientId=Op.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(o,(async c=>{he(es,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(o,(c=>(he(es,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ko;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const o=im(t,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function Fh(n,e){n.asyncQueue.verifyOperationInProgress(),he(es,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let o=t.initialUser;n.setCredentialChangeListener((async r=>{o.isEqual(r)||(await YS(e.localStore,r),o=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function MT(n,e){n.asyncQueue.verifyOperationInProgress();const t=await aU(n);he(es,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((o=>ST(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,r)=>ST(e.remoteStore,r))),n._onlineComponents=e}async function aU(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){he(es,"Using user provided OfflineComponentProvider");try{await Fh(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ne.FAILED_PRECONDITION||r.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Qr("Error using user provided cache. Falling back to memory cache: "+t),await Fh(n,new tf)}}else he(es,"Using default OfflineComponentProvider"),await Fh(n,new oU(void 0));return n._offlineComponents}async function uA(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(he(es,"Using user provided OnlineComponentProvider"),await MT(n,n._uninitializedComponentsProvider._online)):(he(es,"Using default OnlineComponentProvider"),await MT(n,new Sp))),n._onlineComponents}function lU(n){return uA(n).then((e=>e.syncEngine))}async function uU(n){const e=await uA(n),t=e.eventManager;return t.onListen=YP.bind(null,e.syncEngine),t.onUnlisten=QP.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=JP.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=XP.bind(null,e.syncEngine),t}function cU(n,e,t={}){const o=new Ko;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,y,m){const v=new sU({next:S=>{v.Nu(),c.enqueueAndForget((()=>kP(l,T))),S.fromCache&&y.source==="server"?m.reject(new de(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),T=new FP(h,v,{includeMetadataChanges:!0,qa:!0});return LP(l,T)})(await uU(n),n.asyncQueue,e,t,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cA(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NT=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="firestore.googleapis.com",DT=!0;class bT{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=fA,this.ssl=DT}else this.host=e.host,this.ssl=e.ssl??DT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=HS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<OV)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}E2("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cA(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,r){return o.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Af{constructor(e,t,o,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bT({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bT(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new f2;switch(o.type){case"firstParty":return new m2(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const o=NT.get(t);o&&(he("ComponentProvider","Removing Datastore"),NT.delete(t),o.terminate())})(this),Promise.resolve()}}function fU(n,e,t,o={}){var m;n=Yc(n,Af);const r=Up(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;r&&(Ob(`https://${h}`),Gb("Firestore",!0)),l.host!==fA&&l.host!==h&&Qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const y={...l,host:h,ssl:r,emulatorOptions:o};if(!Gc(y,c)&&(n._setSettings(y),o.mockUserToken)){let v,T;if(typeof o.mockUserToken=="string")v=o.mockUserToken,T=en.MOCK_USER;else{v=qb(o.mockUserToken,(m=n._app)==null?void 0:m.options.projectId);const S=o.mockUserToken.sub||o.mockUserToken.user_id;if(!S)throw new de(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new en(S)}n._authCredentials=new d2(new jE(v,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new ns(this.firestore,e,this._query)}}class Bt{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,o){if(Ll(t,Bt._jsonSchema))return new Bt(e,o||null,new _e(ot.fromString(t.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:bt("string",Bt._jsonSchemaVersion),referencePath:bt("string")};class Qo extends ns{constructor(e,t,o){super(e,t,_S(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new _e(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function xT(n,e,...t){if(n=Kr(n),eS("collection","path",e),n instanceof Af){const o=ot.fromString(e,...t);return z0(o),new Qo(n,null,o)}{if(!(n instanceof Bt||n instanceof Qo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ot.fromString(e,...t));return z0(o),new Qo(n.firestore,null,o)}}function dU(n,e,...t){if(n=Kr(n),arguments.length===1&&(e=Op.newId()),eS("doc","path",e),n instanceof Af){const o=ot.fromString(e,...t);return H0(o),new Bt(n,null,new _e(o))}{if(!(n instanceof Bt||n instanceof Qo))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ot.fromString(e,...t));return H0(o),new Bt(n.firestore,n instanceof Qo?n.converter:null,new _e(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VT="AsyncQueue";class PT{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new KS(this,"async_queue_retry"),this._c=()=>{const o=qh();o&&he(VT,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const t=qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ko;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ra(e))throw e;he(VT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,oo("INTERNAL UNHANDLED ERROR: ",UT(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=t,t}enqueueAfterDelay(e,t,o){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=nm.createAndSchedule(this,e,t,o,(l=>this.hc(l)));return this.tc.push(r),r}uc(){this.nc&&Ee(47125,{Pc:UT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,o)=>t.targetTimeMs-o.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function UT(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class am extends Af{constructor(e,t,o,r){super(e,t,o,r),this.type="firestore",this._queue=new PT,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new PT(e),this._firestoreClient=void 0,await e}}}function hU(n,e){const t=typeof n=="object"?n:Zx(),o=typeof n=="string"?n:Kc,r=Kx(t,"firestore").getImmediate({identifier:o});if(!r._initialized){const l=Lb("firestore");l&&fU(r,...l)}return r}function dA(n){if(n._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||pU(n),n._firestoreClient}function pU(n){var o,r,l;const e=n._freezeSettings(),t=(function(h,y,m,v){return new x2(h,y,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,cA(v.experimentalLongPollingOptions),v.useFetchStreams,v.isUsingEmulator)})(n._databaseId,((o=n._app)==null?void 0:o.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new rU(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const y=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(y),_online:y}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bn(Wt.fromBase64String(e))}catch(t){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bn(Wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ll(e,Bn._jsonSchema))return Bn.fromBase64String(e.bytes)}}Bn._jsonSchemaVersion="firestore/bytes/1.0",Bn._jsonSchema={type:bt("string",Bn._jsonSchemaVersion),bytes:bt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lm{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new $t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xi._jsonSchemaVersion}}static fromJSON(e){if(Ll(e,xi._jsonSchema))return new xi(e.latitude,e.longitude)}}xi._jsonSchemaVersion="firestore/geoPoint/1.0",xi._jsonSchema={type:bt("string",xi._jsonSchemaVersion),latitude:bt("number"),longitude:bt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,r){if(o.length!==r.length)return!1;for(let l=0;l<o.length;++l)if(o[l]!==r[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Vi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ll(e,Vi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Vi(e.vectorValues);throw new de(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Vi._jsonSchemaVersion="firestore/vectorValue/1.0",Vi._jsonSchema={type:bt("string",Vi._jsonSchemaVersion),vectorValues:bt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mU=/^__.*__$/;class gU{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return this.fieldMask!==null?new Gs(e,this.data,this.fieldMask,t,this.fieldTransforms):new kl(e,this.data,t,this.fieldTransforms)}}function hA(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ee(40011,{Ac:n})}}class cm{constructor(e,t,o,r,l,c){this.settings=e,this.databaseId=t,this.serializer=o,this.ignoreUndefinedProperties=r,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new cm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.Vc({path:t,fc:!1});return o.gc(e),o}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),o=this.Vc({path:t,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return nf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hA(this.Ac)&&mU.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class yU{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=o||Tf(e)}Cc(e,t,o,r=!1){return new cm({Ac:e,methodName:t,Dc:o,path:$t.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function pA(n){const e=n._freezeSettings(),t=Tf(n._databaseId);return new yU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function _U(n,e,t,o,r,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,r);yA("Data must be an object, but it was:",c,o);const h=mA(o,c);let y,m;if(l.merge)y=new ni(c.fieldMask),m=c.fieldTransforms;else if(l.mergeFields){const v=[];for(const T of l.mergeFields){const S=TU(e,T,t);if(!c.contains(S))throw new de(ne.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);SU(v,S)||v.push(S)}y=new ni(v),m=c.fieldTransforms.filter((T=>y.covers(T.field)))}else y=null,m=c.fieldTransforms;return new gU(new Fn(h),y,m)}class fm extends um{_toFieldTransform(e){return new oV(e.path,new Vl)}isEqual(e){return e instanceof fm}}function vU(n,e,t,o=!1){return dm(t,n.Cc(o?4:3,e))}function dm(n,e){if(gA(n=Kr(n)))return yA("Unsupported field value:",e,n),mA(n,e);if(n instanceof um)return(function(o,r){if(!hA(r.Ac))throw r.Sc(`${o._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${o._methodName}() is not currently supported inside arrays`);const l=o._toFieldTransform(r);l&&r.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,r){const l=[];let c=0;for(const h of o){let y=dm(h,r.wc(c));y==null&&(y={nullValue:"NULL_VALUE"}),l.push(y),c++}return{arrayValue:{values:l}}})(n,e)}return(function(o,r){if((o=Kr(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return tV(r.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const l=at.fromDate(o);return{timestampValue:Zc(r.serializer,l)}}if(o instanceof at){const l=new at(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:Zc(r.serializer,l)}}if(o instanceof xi)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bn)return{bytesValue:LS(r.serializer,o._byteString)};if(o instanceof Bt){const l=r.databaseId,c=o.firestore._databaseId;if(!c.isEqual(l))throw r.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Kp(o.firestore._databaseId||r.databaseId,o._key.path)}}if(o instanceof Vi)return(function(c,h){return{mapValue:{fields:{[uS]:{stringValue:cS},[Qc]:{arrayValue:{values:c.toArray().map((m=>{if(typeof m!="number")throw h.Sc("VectorValues must only contain numeric values.");return zp(h.serializer,m)}))}}}}}})(o,r);throw r.Sc(`Unsupported field value: ${ff(o)}`)})(n,e)}function mA(n,e){const t={};return iS(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fs(n,((o,r)=>{const l=dm(r,e.mc(o));l!=null&&(t[o]=l)})),{mapValue:{fields:t}}}function gA(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof at||n instanceof xi||n instanceof Bn||n instanceof Bt||n instanceof um||n instanceof Vi)}function yA(n,e,t){if(!gA(t)||!tS(t)){const o=ff(t);throw o==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+o)}}function TU(n,e,t){if((e=Kr(e))instanceof lm)return e._internalPath;if(typeof e=="string")return _A(n,e);throw nf("Field path arguments must be of type string or ",n,!1,void 0,t)}const EU=new RegExp("[~\\*/\\[\\]]");function _A(n,e,t){if(e.search(EU)>=0)throw nf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new lm(...e.split("."))._internalPath}catch{throw nf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function nf(n,e,t,o,r){const l=o&&!o.isEmpty(),c=r!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let y="";return(l||c)&&(y+=" (found",l&&(y+=` in field ${o}`),c&&(y+=` in document ${r}`),y+=")"),new de(ne.INVALID_ARGUMENT,h+n+y)}function SU(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vA{constructor(e,t,o,r,l){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=r,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new AU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Cf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class AU extends vA{data(){return super.data()}}function Cf(n,e){return typeof e=="string"?_A(n,e):e instanceof lm?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CU(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hm{}class pm extends hm{}function IU(n,e,...t){let o=[];e instanceof hm&&o.push(e),o=o.concat(t),(function(l){const c=l.filter((y=>y instanceof mm)).length,h=l.filter((y=>y instanceof If)).length;if(c>1||c>0&&h>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const r of o)n=r._apply(n);return n}class If extends pm{constructor(e,t,o){super(),this._field=e,this._op=t,this._value=o,this.type="where"}static _create(e,t,o){return new If(e,t,o)}_apply(e){const t=this._parse(e);return TA(e._query,t),new ns(e.firestore,e.converter,hp(e._query,t))}_parse(e){const t=pA(e.firestore);return(function(l,c,h,y,m,v,T){let S;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){kT(T,v);const U=[];for(const q of T)U.push(LT(y,l,q));S={arrayValue:{values:U}}}else S=LT(y,l,T)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||kT(T,v),S=vU(h,c,T,v==="in"||v==="not-in");return Dt.create(m,v,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function RU(n,e,t){const o=e,r=Cf("where",n);return If._create(r,o,t)}class mm extends hm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new mm(e,t)}_parse(e){const t=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return t.length===1?t[0]:si.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,l){let c=r;const h=l.getFlattenedFilters();for(const y of h)TA(c,y),c=hp(c,y)})(e._query,t),new ns(e.firestore,e.converter,hp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class gm extends pm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new gm(e,t)}_apply(e){const t=(function(r,l,c){if(r.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xl(l,c)})(e._query,this._field,this._direction);return new ns(e.firestore,e.converter,(function(r,l){const c=r.explicitOrderBy.concat([l]);return new aa(r.path,r.collectionGroup,c,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function wU(n,e="asc"){const t=e,o=Cf("orderBy",n);return gm._create(o,t)}class ym extends pm{constructor(e,t,o){super(),this.type=e,this._limit=t,this._limitType=o}static _create(e,t,o){return new ym(e,t,o)}_apply(e){return new ns(e.firestore,e.converter,$c(e._query,this._limit,this._limitType))}}function MU(n){return ym._create("limit",n,"F")}function LT(n,e,t){if(typeof(t=Kr(t))=="string"){if(t==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vS(e)&&t.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(ot.fromString(t));if(!_e.isDocumentKey(o))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Z0(n,new _e(o))}if(t instanceof Bt)return Z0(n,t._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ff(t)}.`)}function kT(n,e){if(!Array.isArray(n)||n.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function TA(n,e){const t=(function(r,l){for(const c of r)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class NU{convertValue(e,t="none"){switch(Zo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return vt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Wo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ee(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const o={};return Fs(e,((r,l)=>{o[r]=this.convertValue(l,t)})),o}convertVectorValue(e){var o,r,l;const t=(l=(r=(o=e.fields)==null?void 0:o[Qc].arrayValue)==null?void 0:r.values)==null?void 0:l.map((c=>vt(c.doubleValue)));return new Vi(t)}convertGeoPoint(e){return new xi(vt(e.latitude),vt(e.longitude))}convertArray(e,t){return(e.values||[]).map((o=>this.convertValue(o,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const o=pf(e);return o==null?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(Nl(e));default:return null}}convertTimestamp(e){const t=$o(e);return new at(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=ot.fromString(e);Qe(GS(o),9688,{name:e});const r=new Dl(o.get(1),o.get(3)),l=new _e(o.popFirst(5));return r.isEqual(t)||oo(`Document ${l} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DU(n,e,t){let o;return o=n?n.toFirestore(e):e,o}class Rc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Yr extends vA{constructor(e,t,o,r,l,c){super(e,t,o,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Pc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Cf("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Yr._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Yr._jsonSchemaVersion="firestore/documentSnapshot/1.0",Yr._jsonSchema={type:bt("string",Yr._jsonSchemaVersion),bundleSource:bt("string","DocumentSnapshot"),bundleName:bt("string"),bundle:bt("string")};class Pc extends Yr{data(e={}){return super.data(e)}}class Jr{constructor(e,t,o,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Rc(r.hasPendingWrites,r.fromCache),this.query=o}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((o=>{e.call(t,new Pc(this._firestore,this._userDataWriter,o.key,o,new Rc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,l){if(r._snapshot.oldDocs.isEmpty()){let c=0;return r._snapshot.docChanges.map((h=>{const y=new Pc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Rc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);return h.doc,{type:"added",doc:y,oldIndex:-1,newIndex:c++}}))}{let c=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const y=new Pc(r._firestore,r._userDataWriter,h.doc.key,h.doc,new Rc(r._snapshot.mutatedKeys.has(h.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,v=-1;return h.type!==0&&(m=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),v=c.indexOf(h.doc.key)),{type:bU(h.type),doc:y,oldIndex:m,newIndex:v}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Jr._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Op.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],o=[],r=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),o.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),r.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function bU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ee(61501,{type:n})}}Jr._jsonSchemaVersion="firestore/querySnapshot/1.0",Jr._jsonSchema={type:bt("string",Jr._jsonSchemaVersion),bundleSource:bt("string","QuerySnapshot"),bundleName:bt("string"),bundle:bt("string")};class xU extends NU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,t)}}function VU(n){n=Yc(n,ns);const e=Yc(n.firestore,am),t=dA(e),o=new xU(e);return CU(n._query),cU(t,n._query).then((r=>new Jr(e,o,n,r)))}function PU(n,e){const t=Yc(n.firestore,am),o=dU(n),r=DU(n.converter,e);return UU(t,[_U(pA(n.firestore),"addDoc",o._key,r,n.converter!==null,{}).toMutation(o._key,to.exists(!1))]).then((()=>o))}function UU(n,e){return(function(o,r){const l=new Ko;return o.asyncQueue.enqueueAndForget((async()=>$P(await lU(o),r,l))),l.promise})(dA(n),e)}function LU(){return new fm("serverTimestamp")}(function(e,t=!0){(function(r){oa=r})(Wx),zc(new Rl("firestore",((o,{instanceIdentifier:r,options:l})=>{const c=o.getProvider("app").getImmediate(),h=new am(new h2(o.getProvider("auth-internal")),new g2(c,o.getProvider("app-check-internal")),(function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dl(m.options.projectId,v)})(c,r),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),Hr(q0,F0,e),Hr(q0,F0,"esm2020")})();const kU={apiKey:"AIzaSyAZhCiueUudnHjS6TjU771OP0jkIoWpJgQ",authDomain:"php-firebase-8899.firebaseapp.com",projectId:"php-firebase-8899",storageBucket:"php-firebase-8899.firebasestorage.app",messagingSenderId:"859105024090",appId:"1:859105024090:web:47d80be90b2c1b6aa96063"},OU=HE(kU),OT=hU(OU),Bh={async saveToGlobalArchive(n,e){try{const t=xT(OT,"sparks"),o=e.map(r=>r.isFromHistory?Promise.resolve():PU(t,{title:r.title,description:r.description,category:r.category,uniquePoint:r.uniquePoint,moodTag:n.toLowerCase(),timestamp:Date.now(),isFromHistory:!0,createdAt:LU()}));await Promise.all(o),console.log(`[Firebase] Successfully archived fresh sparks for mood: ${n}`)}catch(t){console.error("[Firebase] Error saving to global archive:",t)}},async getFromGlobalArchive(n){try{const e=xT(OT,"sparks"),t=IU(e,RU("moodTag","==",n.toLowerCase()),wU("createdAt","desc"),MU(20));return(await VU(t)).docs.map(l=>{const c=l.data();return{id:l.id,title:c.title,description:c.description,category:c.category,uniquePoint:c.uniquePoint,timestamp:c.timestamp||Date.now(),isFromHistory:!0}}).sort(()=>.5-Math.random()).slice(0,6)}catch(e){return console.error("[Firebase] Error fetching from archive:",e),this.getLocalSimulation(n)}},getLocalSimulation(n){const e=localStorage.getItem("find-your-spark-global-cache");return(e?JSON.parse(e):[]).filter(o=>o.isFromHistory).sort(()=>.5-Math.random()).slice(0,6)},syncToGlobalSimulation(n){const e=localStorage.getItem("find-your-spark-global-cache"),t=e?JSON.parse(e):[],o=[...n.map(r=>({...r,isFromHistory:!0})),...t].slice(0,100);localStorage.setItem("find-your-spark-global-cache",JSON.stringify(o))}},EA=qt.createContext(void 0),qU=({children:n})=>{const[e,t]=qt.useState("dark");qt.useEffect(()=>{const r=localStorage.getItem("theme"),l=window.matchMedia("(prefers-color-scheme: dark)").matches;t(r||(l?"dark":"light"))},[]),qt.useEffect(()=>{const r=document.documentElement;e==="dark"?r.classList.add("dark"):r.classList.remove("dark"),localStorage.setItem("theme",e)},[e]);const o=()=>{t(r=>r==="light"?"dark":"light")};return j.jsx(EA.Provider,{value:{theme:e,toggleTheme:o},children:n})},FU=()=>{const n=qt.useContext(EA);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n},BU=n=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v2.25m6.364.364l-1.591 1.591M21 12h-2.25m-.364 6.364l-1.591-1.591M12 18.75V21m-4.95-4.95l-1.591 1.591M5.25 12H3m4.25-4.95l-1.59-1.59M12 12a4.5 4.5 0 00-4.5 4.5v.75A.75.75 0 017.5 18h9a.75.75 0 01.75-.75v-.75a4.5 4.5 0 00-4.5-4.5z"})}),GU=n=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})}),HU=()=>{const{theme:n,toggleTheme:e}=FU();return j.jsx("button",{onClick:e,className:"p-2 rounded-full bg-slate-200 dark:bg-gray-800 text-slate-600 dark:text-slate-300 hover:bg-slate-300 dark:hover:bg-gray-700 transition-colors duration-300","aria-label":`Switch to ${n==="light"?"dark":"light"} mode`,children:n==="light"?j.jsx(GU,{className:"w-6 h-6"}):j.jsx(BU,{className:"w-6 h-6"})})},zU=({onTitleClick:n,isMoodSelected:e,language:t,onLanguageChange:o,t:r})=>j.jsxs("header",{className:"w-full text-center py-6 md:py-10 relative",children:[j.jsxs("div",{className:`absolute top-6 ${t==="ar"?"left-4 md:left-8":"right-4 md:right-8"} flex items-center gap-2 md:gap-3`,children:[!e&&j.jsxs("select",{value:t,onChange:l=>o(l.target.value),className:"bg-slate-100 dark:bg-gray-800 border-none rounded-lg px-2 py-1 text-xs font-bold text-slate-600 dark:text-slate-300 outline-none focus:ring-2 focus:ring-cyan-500 transition-all cursor-pointer animate-fade-in",children:[j.jsx("option",{value:"en",children:"EN"}),j.jsx("option",{value:"es",children:"ES"}),j.jsx("option",{value:"fr",children:"FR"}),j.jsx("option",{value:"de",children:"DE"}),j.jsx("option",{value:"ar",children:"AR"}),j.jsx("option",{value:"fr_ca",children:"CA"})]}),j.jsx(HU,{})]}),j.jsx("h1",{onClick:n,className:"text-4xl md:text-6xl font-black text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500 cursor-pointer transition-transform hover:scale-[1.02] active:scale-95 inline-block",children:r("app_title")}),!e&&j.jsx("p",{className:"mt-3 text-base md:text-lg text-slate-500 dark:text-slate-400 max-w-lg mx-auto px-4",children:r("app_tagline")})]}),SA=({moodName:n,...e})=>{switch(n.toLowerCase()){case"happy":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.5 9.5a1 1 0 100-2 1 1 0 000 2zM15.5 9.5a1 1 0 100-2 1 1 0 000 2z",fill:"currentColor"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 14.5c-.5 1-1.5 2-4 2s-3.5-1-4-2"})]});case"sad":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a9 9 0 110-18 9 9 0 010 18z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 15a6 6 0 016 0"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 10a.5.5 0 10-1 0 .5.5 0 001 0zM15 10a.5.5 0 10-1 0 .5.5 0 001 0z",fill:"currentColor"})]});case"energetic":return j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:j.jsx("path",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 2.25L4.5 12h6.75l-1.5 8.25L20.25 12h-7.5l2.25-9.75z"})});case"relaxed":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 12c2.5-3.5 7.5-3.5 10 0"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 15c2.5 3.5 7.5 3.5 10 0"})]});case"stressed":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 21a8.962 8.962 0 01-5.657-2.343m0 0a8.962 8.962 0 010-11.314m0 0a8.962 8.962 0 0111.313 0m0 0a8.962 8.962 0 010 11.314m0 0A8.962 8.962 0 0112 21z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 17.25L6 19.5m12-1.5L18 17.25M6 4.5l2.25 2.25M18 4.5l-2.25 2.25"})]});case"creative":return j.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:[j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.5 14.25c0 .414.336.75.75.75h3.5a.75.75 0 00.75-.75V12a2.5 2.5 0 00-5 0v2.25z"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 18.75h7.5"}),j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 2.25c-3.99 0-7.25 3.26-7.25 7.25 0 2.449 1.214 4.636 3.085 5.955V18a.75.75 0 00.75.75h6.83a.75.75 0 00.75-.75v-2.545a7.22 7.22 0 003.085-5.955C19.25 5.51 15.99 2.25 12 2.25z"}),j.jsx("path",{fill:"currentColor",d:"M12 6.75a.75.75 0 000 1.5.75.75 0 000-1.5z"}),j.jsx("path",{fill:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 4.5h1.5l.75 1.5h-3l.75-1.5z"})]});default:return null}},YU={yellow:"from-yellow-400 to-yellow-500 text-yellow-900 hover:shadow-yellow-500/20 dark:from-yellow-300 dark:to-yellow-500 dark:text-white dark:hover:shadow-yellow-400/30",blue:"from-sky-400 to-blue-500 text-blue-900 hover:shadow-sky-500/20 dark:from-sky-400 dark:to-blue-600 dark:text-white dark:hover:shadow-sky-400/30",orange:"from-orange-400 to-red-500 text-orange-900 hover:shadow-orange-500/20 dark:from-orange-400 dark:to-red-500 dark:text-white dark:hover:shadow-orange-400/30",green:"from-teal-400 to-green-500 text-teal-900 hover:shadow-teal-500/20 dark:from-teal-300 dark:to-green-500 dark:text-white dark:hover:shadow-teal-400/30",red:"from-pink-500 to-rose-500 text-rose-900 hover:shadow-pink-500/20 dark:from-pink-500 dark:to-rose-500 dark:text-white dark:hover:shadow-pink-400/30",purple:"from-purple-500 to-indigo-600 text-purple-900 hover:shadow-purple-500/20 dark:from-purple-500 dark:to-indigo-600 dark:text-white dark:hover:shadow-purple-400/30"},JU=({moods:n,onSelectMood:e,t})=>j.jsxs("div",{className:"w-full",children:[j.jsx("h2",{className:"text-3xl font-semibold mb-8 text-slate-800 dark:text-slate-200",children:t("how_feeling")}),j.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(o=>j.jsxs("button",{onClick:()=>e(o),className:`group p-6 rounded-xl bg-gradient-to-br ${YU[o.color]} text-left flex flex-col justify-between transform transition-all duration-300 hover:-translate-y-2 hover:shadow-2xl hover:brightness-110 focus:outline-none focus:ring-4 focus:ring-opacity-50 focus:ring-cyan-500 dark:focus:ring-cyan-300`,children:[j.jsxs("div",{className:"flex items-center justify-between",children:[j.jsx(SA,{moodName:o.id,className:"w-16 h-16 transition-transform duration-300 group-hover:scale-110"}),j.jsx("span",{className:"text-xl font-bold opacity-0 group-hover:opacity-100 transform group-hover:translate-x-0 -translate-x-4 transition-all duration-300",children:""})]}),j.jsxs("div",{className:"transition-transform duration-300 group-hover:scale-105 origin-left",children:[j.jsx("h3",{className:"text-2xl font-bold mt-4",children:t(o.nameKey)}),j.jsx("p",{className:"opacity-90",children:t(o.descKey)})]})]},o.id))})]}),qT="find-your-spark-ideas-v1",FT="find-your-spark-usage-v1",BT="find-your-spark-favorites-v1",KU=3,Go={saveIdeas:(n,e)=>{const t=Go.getAllSavedIdeas(),o=t[n]||[],r=e.filter(l=>!o.some(c=>c.title===l.title));t[n]=[...o,...r],localStorage.setItem(qT,JSON.stringify(t))},getAllSavedIdeas:()=>{const n=localStorage.getItem(qT);return n?JSON.parse(n):{}},getIdeasByMood:n=>(Go.getAllSavedIdeas()[n]||[]).map(t=>({...t,isFromHistory:!0})),toggleFavorite:n=>{const e=Go.getFavorites(),t=e.findIndex(o=>o.id===n.id||o.title===n.title);t>-1?e.splice(t,1):e.unshift({...n,isFromHistory:!0}),localStorage.setItem(BT,JSON.stringify(e)),window.dispatchEvent(new Event("favoritesChanged"))},isFavorite:(n,e)=>Go.getFavorites().some(o=>o.id===n||o.title===e),getFavorites:()=>{const n=localStorage.getItem(BT);return n?JSON.parse(n):[]},getDailyUsage:()=>{const n=new Date().toISOString().split("T")[0],e=localStorage.getItem(FT),t=e?JSON.parse(e):{date:n,count:0};return t.date!==n?{date:n,count:0}:t},incrementDailyUsage:()=>{const n=Go.getDailyUsage();n.count+=1,localStorage.setItem(FT,JSON.stringify(n))},isLimitReached:()=>Go.getDailyUsage().count>=KU},QU={[eo.Activity]:"bg-sky-100 text-sky-800 dark:bg-sky-500/20 dark:text-sky-300",[eo.Mindfulness]:"bg-teal-100 text-teal-800 dark:bg-teal-500/20 dark:text-teal-300",[eo.Social]:"bg-amber-100 text-amber-800 dark:bg-amber-500/20 dark:text-amber-300",[eo.Creative]:"bg-violet-100 text-violet-800 dark:bg-violet-500/20 dark:text-violet-300",[eo.Inspirational]:"bg-rose-100 text-rose-800 dark:bg-rose-500/20 dark:text-rose-300",[eo.Music]:"bg-indigo-100 text-indigo-800 dark:bg-indigo-500/20 dark:text-indigo-300"},XU=({idea:n,t:e})=>{const[t,o]=qt.useState(!1),[r,l]=qt.useState(!1);qt.useEffect(()=>{l(Go.isFavorite(n.id,n.title))},[n.id,n.title]);const c=()=>{if(t)return;const y=`${n.title}

${n.description}

Found via Find Your Spark`;navigator.clipboard.writeText(y).then(()=>{o(!0),setTimeout(()=>o(!1),2e3)})},h=()=>{Go.toggleFavorite(n),l(!r)};return j.jsxs("div",{className:`bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-7 flex flex-col text-left h-full border ${n.isFromHistory?"border-indigo-100 dark:border-indigo-900/40 shadow-indigo-500/5":"border-slate-100 dark:border-gray-800"} hover:border-cyan-500/50 dark:hover:border-cyan-400/50 transition-all duration-300 transform hover:-translate-y-1 relative group`,children:[j.jsx("div",{className:`absolute top-0 left-7 -translate-y-1/2 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-sm ${n.isFromHistory?"bg-indigo-500 text-white":"bg-cyan-500 text-white"}`,children:n.isFromHistory?e("community_favorite"):e("live_ai_spark")}),j.jsx("button",{onClick:h,className:`absolute top-4 right-4 p-2 rounded-full transition-all duration-300 z-10 ${r?"bg-rose-50 text-rose-500 dark:bg-rose-500/20 dark:text-rose-400 scale-110 shadow-sm":"bg-slate-50 text-slate-300 hover:text-rose-400 dark:bg-gray-800 dark:text-gray-600 dark:hover:text-rose-400"}`,"aria-label":r?"Remove from favorites":"Save to favorites",children:j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:r?"currentColor":"none",stroke:"currentColor",strokeWidth:r?"0":"2",children:j.jsx("path",{fillRule:"evenodd",d:"M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z",clipRule:"evenodd"})})}),j.jsxs("div",{className:"flex-grow pt-4",children:[j.jsx("div",{className:"flex justify-between items-start mb-3 pr-8",children:j.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white leading-tight",children:n.title})}),j.jsx("span",{className:`inline-block px-2.5 py-1 text-[10px] uppercase tracking-wider font-extrabold rounded-lg mb-4 ${QU[n.category]}`,children:e(`cat_${n.category}`)}),j.jsx("p",{className:"text-slate-600 dark:text-slate-400 mb-6 text-sm md:text-base leading-relaxed line-clamp-4",children:n.description})]}),j.jsxs("div",{className:"mt-auto pt-5 border-t border-slate-50 dark:border-gray-800/50 flex justify-between items-center",children:[j.jsxs("div",{className:"flex flex-col gap-1",children:[j.jsx("p",{className:"text-[10px] font-black text-cyan-600 dark:text-cyan-400 uppercase tracking-widest",children:e("the_spark")}),j.jsxs("p",{className:"text-sm text-slate-700 dark:text-slate-300 italic font-medium",children:['"',n.uniquePoint,'"']})]}),j.jsx("button",{onClick:c,className:`p-2.5 rounded-xl transition-all duration-200 ${t?"bg-green-100 text-green-600 dark:bg-green-500/20 dark:text-green-400":"text-slate-400 hover:bg-slate-100 dark:text-gray-500 dark:hover:bg-gray-800"}`,title:e("copy_spark"),children:t?j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:j.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})},$U=({ideas:n,mood:e,t})=>n.length===0?null:j.jsxs("div",{className:"w-full flex flex-col items-center animate-fade-in",children:[j.jsxs("h2",{className:"text-2xl md:text-3xl font-semibold mb-2 text-center flex items-center justify-center flex-wrap px-4",children:[t("custom_sparks",{mood:t(e.nameKey).toLowerCase()}),j.jsx(SA,{moodName:e.id,className:"w-8 h-8 ml-2 hidden sm:block"})]}),j.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8 text-center px-4",children:t("personalized_inspiration")}),j.jsx("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 px-4",children:n.map((o,r)=>j.jsx(XU,{idea:o,t},`${o.title}-${r}`))})]}),WU=({message:n})=>j.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 my-8",children:[j.jsx("div",{className:"w-16 h-16 border-4 border-dashed rounded-full animate-spin border-cyan-500 dark:border-cyan-400"}),j.jsx("p",{className:"text-cyan-600 dark:text-cyan-300 text-lg",children:n})]}),ZU=()=>j.jsx("footer",{className:"w-full text-center p-4 mt-8",children:j.jsx("p",{className:"text-slate-400 dark:text-gray-600 text-sm",children:"Powered By Gamesmanship"})}),jU=n=>j.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:j.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.898 20.562L16.25 22.5l-.648-1.938a3.375 3.375 0 00-2.456-2.456L11.25 18l1.938-.648a3.375 3.375 0 002.456-2.456L16.25 13l.648 1.938a3.375 3.375 0 002.456 2.456L21.25 18l-1.938.648a3.375 3.375 0 00-2.456 2.456z"})}),e4=({onStart:n,t:e})=>j.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-4 h-full animate-fade-in min-h-[80vh]",children:[j.jsx("div",{className:"mb-8",children:j.jsx(jU,{className:"w-24 h-24 text-cyan-400"})}),j.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-fuchsia-500 mb-4",children:e("app_title")}),j.jsx("p",{className:"max-w-md mx-auto text-lg text-slate-600 dark:text-slate-400 mb-10",children:e("intro_desc")}),j.jsx("button",{onClick:n,className:"font-bold text-lg py-4 px-10 rounded-full text-white bg-gradient-to-r from-cyan-500 to-fuchsia-500 hover:from-cyan-600 hover:to-fuchsia-600 transition-all duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-cyan-300 focus:ring-opacity-50 shadow-lg",children:e("get_started")})]}),t4=()=>{const[n,e]=qt.useState(()=>localStorage.getItem("app-language")||"en"),[t,o]=qt.useState(null),[r,l]=qt.useState([]),[c,h]=qt.useState(!1),[y,m]=qt.useState(null),[v,T]=qt.useState(!0),[S,R]=qt.useState(!1);qt.useEffect(()=>{localStorage.setItem("app-language",n),n==="ar"?(document.documentElement.setAttribute("dir","rtl"),document.documentElement.lang="ar"):(document.documentElement.setAttribute("dir","ltr"),document.documentElement.lang=n.split("_")[0])},[n]);const U=(ie,W)=>{let se=HT[n][ie]||ie;return W&&Object.entries(W).forEach(([fe,le])=>{se=se.replace(`{${fe}}`,le)}),se},q=qt.useCallback(async(ie,W=!1)=>{o(ie),h(!0),m(null),l([]),R(!1);try{const se=await Ib(ie,n);await Bh.saveToGlobalArchive(ie.id,se),Bh.syncToGlobalSimulation(se),l(se),h(!1)}catch{const fe=await Bh.getFromGlobalArchive(ie.id);fe.length>0?(l(fe.map(le=>({...le,isFromHistory:!0}))),R(!0)):m("The AI is offline and the Community Archive is currently empty for this mood. Please try again later!"),h(!1)}},[n]),L=()=>{o(null),l([]),m(null),R(!1)},X=()=>T(!1);return j.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-black text-slate-900 dark:text-white flex flex-col items-center transition-colors duration-300",children:[j.jsx("main",{className:"w-full max-w-5xl mx-auto flex-grow flex flex-col items-center px-4 md:px-6",children:v?j.jsx(e4,{onStart:X,language:n,t:U}):j.jsxs(j.Fragment,{children:[j.jsx(zU,{onTitleClick:L,isMoodSelected:!!t,language:n,onLanguageChange:e,t:U}),c&&j.jsx(WU,{message:U("connecting_ai",{mood:U((t==null?void 0:t.nameKey)||"")})}),!c&&!t&&j.jsx(JU,{moods:dI,onSelectMood:q,language:n,t:U}),!c&&t&&j.jsxs(j.Fragment,{children:[j.jsxs("div",{className:"flex flex-col items-center mb-8",children:[j.jsxs("button",{onClick:L,className:"group mb-4 bg-white dark:bg-gray-900 shadow-sm border border-slate-200 dark:border-gray-800 hover:border-cyan-500 text-slate-600 dark:text-slate-300 font-bold py-2.5 px-6 rounded-full transition-all duration-300 flex items-center gap-2",children:[j.jsx("span",{className:n==="ar"?"rotate-180":"",children:""})," ",U("change_mood")]}),S&&j.jsxs("div",{className:"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-800 dark:text-indigo-200 px-6 py-3 rounded-2xl text-sm font-medium border border-indigo-200 dark:border-indigo-800 flex items-center gap-3 shadow-sm",children:[j.jsx("span",{className:"flex h-3 w-3 rounded-full bg-indigo-500 animate-pulse"}),U("community_archive")]})]}),r.length>0&&j.jsx($U,{ideas:r,mood:t,language:n,t:U})]}),y&&!c&&j.jsxs("div",{className:"mt-8 max-w-lg mx-auto text-rose-800 bg-rose-50 dark:text-rose-200 dark:bg-rose-900/30 p-8 rounded-2xl shadow-xl border border-rose-100 dark:border-rose-900/50 text-center animate-fade-in",children:[j.jsx("p",{className:"text-3xl mb-4",children:""}),j.jsx("p",{className:"font-bold text-lg mb-2",children:"Service Note"}),j.jsx("p",{className:"text-sm opacity-90 leading-relaxed",children:y}),j.jsx("button",{onClick:L,className:"mt-6 bg-rose-500 text-white px-8 py-2 rounded-full font-bold hover:bg-rose-600 transition-colors",children:"Try Again"})]})]})}),j.jsx(ZU,{})]})},AA=document.getElementById("root");if(!AA)throw new Error("Could not find root element to mount to");const n4=fI.createRoot(AA);n4.render(j.jsx(iI.StrictMode,{children:j.jsx(qU,{children:j.jsx(t4,{})})}));
